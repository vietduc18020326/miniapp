(self.webpackChunkMiniPolicy=self.webpackChunkMiniPolicy||[]).push([["src_screens_DocumentTypesScreen_EditMasterVersion_tsx"],{11361:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatedBottomSpace=void 0;var n=l(r(84481)),o=r(14931),a=l(r(46763)),i=r(33823);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}var u={code:"function anonymous(){const{aBottom}=this.__closure;return{height:aBottom.value};}"},c=(0,n.memo)((function(e){var t,r=(0,o.useAnimatedSafeAreaInsets)().aBottom,n=(0,a.useAnimatedStyle)(((t=function(){return{height:r.value}}).__closure={aBottom:r},t.__initData=u,t.__workletHash=7203089036154,t));return(0,i.jsx)(a.default.View,Object.assign({},e,{style:[e.style,n]}))}));t.AnimatedBottomSpace=c},1459:function(e,t,r){var n=r(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.EditMasterVersion=void 0;var o,a,i=n(r(19452)),s=n(r(17156)),l=n(r(27424)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}n.default=e,r&&r.set(e,n);return n}(r(84481)),c=r(58198),d=r(64345),p=r(76233),f=r(17575),y=r(35315),m=r(11361),v=r(46763),h=r(39797),j=r(33823);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}var g=(0,u.memo)((function(){var e=(0,d.useNavigationParams)().id,t=(0,p.useMasterVersionDoctypes)(e),r=(0,d.useTheme)(),n=(0,v.useSharedValue)({name:(null==t?void 0:t.name)||"",collection_id:(null==t?void 0:t.collection_id)||"",doctype_id:(null==t?void 0:t.doctype_id)||""}),o=(0,f.useCollectionsByQuery)("all").map((function(e){var t=(0,f.getCollections)(e);return{label:null==t?void 0:t.name,value:e}})),a=(0,y.useDoctypesByQuery)("all").map((function(e){var t=(0,y.getDoctypes)(e);return{label:null==t?void 0:t.name,value:e}})),i=(0,d.useAsyncFn)((0,s.default)((function*(){return yield(0,h.requestEditMasterVersion)(Object.assign({id:e},n.value)).then((function(){return(0,d.goBack)()}))})),[n,e]),u=(0,l.default)(i,2),_=u[0],g=_.loading,x=_.error,O=u[1];return console.log("params",n),(0,d.useAutoToastError)(x),(0,j.jsxs)(c.ScreenWrapper,{children:[(0,j.jsx)(c.DynamicHeader,{title:(0,d.translate)("policy.edit_master_version_info")}),(0,j.jsxs)(c.MyKeyboardAvoidingView,{children:[(0,j.jsxs)(c.FormScroll,{children:[(0,j.jsx)(b,{children:(0,j.jsx)(c.UITextInput,{params:n,title:(0,d.translate)("policy.master_version_name"),required:!0,keyName:"name"})}),(0,j.jsx)(b,{children:(0,j.jsx)(c.UISelectorInput,{title:"Collection",required:!0,params:n,keyName:"collection_id",options:o})}),(0,j.jsx)(b,{children:(0,j.jsx)(c.UISelectorInput,{title:"Document type",required:!0,params:n,keyName:"doctype_id",options:a})})]}),(0,j.jsxs)(M,{children:[(0,j.jsx)(c.BottomButton,{loading:g,onRightPress:O,leftContainerStyle:{borderRadius:8,borderColor:r.primaryColor,borderWidth:1},rightContainerStyle:{borderRadius:8},leftBgColor:r.white,textColor:r.primaryColor,leftText:(0,d.translate)("policy.reset")}),(0,j.jsx)(m.AnimatedBottomSpace,{})]})]})]})}));t.EditMasterVersion=g;var b=d.styled.View(o||(o=(0,i.default)(["\n  margin: 16px 16px 0;\n"]))),M=d.styled.View(a||(a=(0,i.default)(["\n  margin: 16px 16px 0;\n"])))},39797:function(e,t,r){var n=r(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.requestRemoveMasterVersion=t.requestMasterVersionDoctype=t.requestEditMasterVersion=void 0;var o,a,i,s=n(r(861)),l=n(r(17156)),u=r(64345),c=r(87967),d=r(76233);t.requestMasterVersionDoctype=function(e){return(o=o||(0,l.default)((function*(e){var t=(yield u.Fetch.postWithToken("@"+u.Core.systemPath+"/policy/ajax/api/mobile/doc/doctype.mvs",e)).data;return(0,c.batch)((function(){if(t.mvs){(0,d.syncMasterVersionDoctypes)(t.mvs);var r=t.mvs.map((function(e){return e.id.toString()}));(0,d.setMasterVersionDoctypesQuery)((function(t){return Object.assign({},t,{all:e.page&&e.page>1?[].concat((0,s.default)(t.all),(0,s.default)(r)):r})}))}})),t.mvs}))).apply(this,arguments)};t.requestEditMasterVersion=function(e){return(a=a||(0,l.default)((function*(e){var t=(yield u.Fetch.postWithToken("@"+u.Core.systemPath+"/policy/ajax/api/doc/mv/edit",e)).data;return(0,c.batch)((function(){"ok"==t.message&&(0,d.syncMasterVersionDoctypes)((function(t){return[Object.assign({},null==t?void 0:t[e.id],{doctype_id:e.doctype_id,collection_id:e.collection_id,name:e.name})]}))})),t.message}))).apply(this,arguments)};t.requestRemoveMasterVersion=function(e){return(i=i||(0,l.default)((function*(e){var t=(yield u.Fetch.postWithToken("@"+u.Core.systemPath+"/policy/ajax/api/doc/mv/remove",e)).data;return(0,c.batch)((function(){"ok"==t.message&&(0,d.setMasterVersionDoctypesQuery)((function(t){return Object.assign({},t,{all:t.all.filter((function(t){return t!=e.id}))})}))})),t.message}))).apply(this,arguments)}}}]);//# sourceMappingURL=src_screens_DocumentTypesScreen_EditMasterVersion_tsx.chunk.bundle.map?platform=ios