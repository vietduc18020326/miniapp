(self.webpackChunkMiniPolicy=self.webpackChunkMiniPolicy||[]).push([["src_screens_DocumentTypesScreen_DoctypeFilter_tsx","src_screens_DocumentTypesScreen_DoctypeDetailScreen_tsx"],{11361:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatedBottomSpace=void 0;var r=s(n(84481)),a=n(25200),o=s(n(75905)),i=n(33823);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}var u={code:"function anonymous(){const{aBottom}=this.__closure;return{height:aBottom.value};}"},c=(0,r.memo)((function(e){var t,n=(0,a.useAnimatedSafeAreaInsets)().aBottom,r=(0,o.useAnimatedStyle)(((t=function(){return{height:n.value}}).__closure={aBottom:n},t.__initData=u,t.__workletHash=7203089036154,t));return(0,i.jsx)(o.default.View,Object.assign({},e,{style:[e.style,r]}))}));t.AnimatedBottomSpace=c},740:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.FilterComp=void 0;var a,o,i,l,s,u,c,d,f=r(n(861)),p=r(n(27424)),y=r(n(19452)),m=r(n(70215)),v=D(n(84481)),_=n(91087),h=n(4007),x=n(17575),g=n(32602),b=n(35315),j=n(11361),O=n(92571),w=D(n(75905)),M=n(33823),P=["type"];function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function D(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}var S=[{label:(0,h.translate)("policy.bookmarked"),value:"bookmarked"},{label:(0,h.translate)("policy.created"),value:"created"},{label:(0,h.translate)("policy.reviewed"),value:"reviewed"},{label:(0,h.translate)("policy.published"),value:"published"},{label:(0,h.translate)("policy.pending"),value:"pending"},{label:(0,h.translate)("policy.rejected"),value:"rejected"}],C=[{label:(0,h.translate)("policy.issued"),value:"issued"},{label:(0,h.translate)("policy.effective"),value:"effective"}],V={code:"function anonymous(){const{_params}=this.__closure;return _params.value;}"},I={code:"function anonymous(__params,__prevParams){const{_params,runOnJS,setAdvancedExport}=this.__closure;if(!!(__prevParams!==null&&__prevParams!==void 0&&__prevParams.collection)&&__params.collection!==__prevParams.collection){_params.value={..._params.value,folder:undefined};}if(JSON.stringify(__params)!==JSON.stringify(__prevParams)){runOnJS(setAdvancedExport)();}}"},T=(0,v.memo)((function(e){var t,n=e.items,r=e.params,a=e.setParams,o=e.defaultParams,i=(0,v.useRef)({}),l=(0,w.useSharedValue)(r),s=(0,v.useCallback)((function(){for(var e of n)if(Array.isArray(e))for(var t of e){var r,a="string"!=typeof t?null==(r=(0,v.cloneElement)(t({})).props)?void 0:r.keyName:-1!==t.indexOf("date")?[t+"_from",t+"_to"]:t;(Array.isArray(a)?l.value[a[0]]||l.value[a[1]]:l.value[a])&&(l.value=Object.assign({},l.value,{advanced_export:1}))}}),[]);(0,w.useAnimatedReaction)(((t=function(){return l.value}).__closure={_params:l},t.__initData=V,t.__workletHash=9029730044761,t),function(){var e=function(e,t){null!=t&&t.collection&&e.collection!==t.collection&&(l.value=Object.assign({},l.value,{folder:void 0})),JSON.stringify(e)!==JSON.stringify(t)&&(0,w.runOnJS)(s)()};return e.__closure={_params:l,runOnJS:w.runOnJS,setAdvancedExport:s},e.__initData=I,e.__workletHash=0xc6c774537f7,e}(),[]);var u=(0,v.useCallback)((function(){a(l.value),(0,h.goBack)()}),[l,a]),c=(0,v.useCallback)((function(){a(o),(0,h.goBack)()}),[a]),d=(0,h.useTheme)(),f=(0,v.useRef)(null),p=(0,v.useRef)(null);return(0,M.jsxs)(F,{disableOnAndroid:!0,scrollInputAdditionalOffset:110,scrollRef:p,ref:f,children:[(0,M.jsxs)(O.ScrollView,{ref:p,children:[(0,M.jsx)(B,{itemsRef:i,params:l,items:n}),(0,M.jsx)(O.View,{style:{height:16}})]}),(0,M.jsx)(O.View,{style:{height:1,backgroundColor:d.neutral5}}),(0,M.jsx)(_.BottomButton,{containerStyle:{marginHorizontal:16,marginVertical:12,borderRadius:20},leftContainerStyle:{borderWidth:1,borderColor:d.primaryColor,borderRadius:8},rightContainerStyle:{borderRadius:8},leftBgColor:d.white,textColor:d.primaryColor,leftText:(0,h.translate)("policy.reset"),rightText:(0,h.translate)("policy.apply"),onRightPress:u,onLeftPress:c}),(0,M.jsx)(j.AnimatedBottomSpace,{})]})}));t.FilterComp=T;var B=(0,v.memo)((function(e){var t=e.items,n=e.params,r=e.itemsRef;return(0,M.jsx)(M.Fragment,{children:t.map((function(e){return(0,M.jsx)(N,{children:(0,M.jsx)(W,{itemsRef:r,type:e,params:n})})}))})})),A={code:"function anonymous(){const{interpolate,visible,contentHeight}=this.__closure;return{height:interpolate(visible.value,[0,1],[0,contentHeight.value]),opacity:visible.value};}"},R={code:"function anonymous(){const{interpolate,visible}=this.__closure;return{transform:[{rotate:interpolate(visible.value,[0,1],[270,90])+'deg'}]};}"},W=(0,v.memo)((function(e){var t=e.type,n=(0,m.default)(e,P);if(!Array.isArray(t))return(0,M.jsx)(U,Object.assign({},e));var r,a=(0,w.useSharedValue)(0),o=(0,w.useSharedValue)(0),i=((0,h.useTheme)(),(0,w.useAnimatedStyle)(((r=function(){return{height:(0,w.interpolate)(a.value,[0,1],[0,o.value]),opacity:a.value}}).__closure={interpolate:w.interpolate,visible:a,contentHeight:o},r.__initData=A,r.__workletHash=8409949742507,r),[])),l=(0,w.useAnimatedStyle)(function(){var e=function(){return{transform:[{rotate:(0,w.interpolate)(a.value,[0,1],[270,90])+"deg"}]}};return e.__closure={interpolate:w.interpolate,visible:a},e.__initData=R,e.__workletHash=2526022283159,e}(),[]);return(0,M.jsxs)(O.View,{children:[(0,M.jsx)(H,{}),(0,M.jsxs)(L,{onPress:function(){a.value=(0,w.withTiming)(a.value?0:1)},children:[(0,M.jsx)(E,{children:(0,h.translate)("policy.advanced_filter")}),(0,M.jsx)(J,{style:l,source:h.IC_ARROW})]}),(0,M.jsx)(w.default.View,{style:[i,{overflow:"scroll",justifyContent:"flex-end"}],children:(0,M.jsx)(O.View,{onLayout:function(e){o.value=e.nativeEvent.layout.height},children:t.map((function(e){return(0,M.jsx)(U,Object.assign({type:e},n))}))})})]})})),F=(0,h.styled)(_.MyKeyboardAvoidingView)(a||(a=(0,y.default)(["\n  background-color: ",";\n  margin-top: 8px;\n"])),(function(e){return e.theme.white})),H=h.styled.View(o||(o=(0,y.default)(["\n  height: 8px;\n  background-color: ",";\n  width: 140%;\n  align-self: center;\n"])),(function(e){return e.theme.neutral8})),L=h.styled.TouchableOpacity(i||(i=(0,y.default)(["\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 0;\n"]))),E=h.styled.Text(l||(l=(0,y.default)(["\n  font-size: 16px;\n  line-height: 24px;\n  color: ",";\n  font-family: ",";\n"])),(function(e){return e.theme.neutral1}),h.Fonts.Medium),J=(0,h.styled)(w.default.Image)(s||(s=(0,y.default)(["\n  height: 17px;\n  width: 17px;\n"]))),Q={code:"function anonymous(){const{params}=this.__closure;var _params$value;return(_params$value=params.value)===null||_params$value===void 0?void 0:_params$value.collection;}"},q={code:"function anonymous(_collection,_prevCollection){const{runOnJS,setCollection}=this.__closure;if(_collection!==_prevCollection){runOnJS(setCollection)(_collection);}}"},U=(0,v.memo)((function(e){var t,n,r=e.type,a=e.params,o=e.itemsRef;if("string"!=typeof r)return r(a);var i=(0,v.useMemo)((function(){return"receiver"==r?["recipient"]:"doctype"==r?["document_type"]:-1!==r.indexOf("date")?["from_date","to_date"]:[r]}),[r]);if(-1!==r.indexOf("date"))return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Y,{children:(0,h.translate)("policy."+r)}),(0,M.jsxs)(z,{children:[(0,M.jsx)(_.UIInput.DateTime,{style:{flex:1},mode:"date",title:(0,h.translate)("policy."+i[0]),params:a,keyName:r+"_from"}),(0,M.jsx)(_.UIInput.DateTime,{style:{flex:1,marginLeft:16},mode:"date",title:(0,h.translate)("policy."+i[1]),params:a,keyName:r+"_to"})]})]});if("created_by"==r)return(0,M.jsx)(_.UIInput.UserPicker,{title:(0,h.translate)("policy."+i[0]),params:a,keyName:r,type:"user"});var l,s=(0,g.useStoragesByQuery)("all").map((function(e){var t;return{label:(null==(t=(0,g.getStorages)(e))?void 0:t.name)||(0,h.translate)("policy.undefined"),value:e}})),u=(0,x.useCollectionsByQuery)("all").map((function(e){var t;return{label:(null==(t=(0,x.getCollections)(e))?void 0:t.name)||(0,h.translate)("policy.undefined"),value:e}})),c=(0,h.useUserGroupByQuery)("teams").map((function(e){var t;return{label:(null==(t=(0,h.getUserGroup)(e))?void 0:t.name)||(0,h.translate)("policy.undefined"),value:e}})),d=(0,b.useDoctypesByQuery)("all").map((function(e){var t;return{label:(null==(t=(0,b.getDoctypes)(e))?void 0:t.name)||(0,h.translate)("policy.undefined"),value:e}})),y=(0,v.useState)(""),m=(0,p.default)(y,2),j=m[0],O=m[1];"folder"==r&&(0,w.useAnimatedReaction)(((l=function(){var e;return null==(e=a.value)?void 0:e.collection}).__closure={params:a},l.__initData=Q,l.__workletHash=8111418951837,l),function(){var e=function(e,t){e!==t&&(0,w.runOnJS)(O)(e)};return e.__closure={runOnJS:w.runOnJS,setCollection:O},e.__initData=q,e.__workletHash=4403808879510,e}(),[]);var P=(null==(t=(0,x.useCollections)(j))||null==(n=t.folders)?void 0:n.map((function(e){return{label:(null==e?void 0:e.name)||(0,h.translate)("policy.undefined"),value:null==e?void 0:e.id}})))||[],k=(0,v.useMemo)((function(){return"collection"==r?u:"storage"==r?s:"receiver"==r?c:"doctype"==r?d:"folder"==r?P:"sort"==r?C:"filter"==r?S:[]}),[r,j]),D=(0,v.useMemo)((function(){var e=void 0;return"filter"==r?{label:(0,h.translate)("policy.no_filter"),value:e}:"sort"==r?{label:(0,h.translate)("policy.created_time"),value:e}:{label:(0,h.translate)("policy.all"),value:e}}),[r]);return(0,M.jsx)(_.UIInput.Selector,{ref:function(e){o.current&&(o.current[r]=e)},title:(0,h.translate)("policy."+i[0]),params:a,keyName:r,options:[D].concat((0,f.default)(k)),hideClearButton:!0})})),N=h.styled.View(u||(u=(0,y.default)(["\n  margin: 16px 16px 0 16px;\n"]))),z=h.styled.View(c||(c=(0,y.default)(["\n  flex-direction: row;\n"]))),Y=h.styled.Text(d||(d=(0,y.default)(["\n  font-size: 14px;\n  line-height: 20px;\n  font-family: ",";\n  margin-bottom: 4px;\n  margin-top: 12px;\n  color: ",";\n"])),h.Fonts.Regular,(function(e){return e.theme.neutral1}))},19855:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.MenuItem=void 0;var a,o,i,l,s,u=r(n(19452)),c=r(n(70215)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(84481)),f=n(4007),p=n(33823),y=["source","title","textColor"];function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}var v=(0,d.memo)((function(e){var t=e.source,n=e.title,r=e.textColor,a=(0,c.default)(e,y);return(0,p.jsxs)(_,Object.assign({},a,{children:[(0,p.jsxs)(h,{children:[t?(0,p.jsx)(x,{source:t}):null,(0,p.jsx)(g,{textColor:r,children:n})]}),(0,p.jsx)(b,{})]}))}));t.MenuItem=v;var _=f.styled.TouchableOpacity(a||(a=(0,u.default)([""]))),h=f.styled.View(o||(o=(0,u.default)(["\n  flex-direction: row;\n  align-items: center;\n  padding: 16px;\n"]))),x=f.styled.Image(i||(i=(0,u.default)(["\n  margin-right: 8px;\n"]))),g=f.styled.Text(l||(l=(0,u.default)(["\n  color: ",";\n"])),(function(e){return e.textColor||e.theme.neutral1})),b=f.styled.View(s||(s=(0,u.default)(["\n  height: 1px;\n  background-color: ",";\n  margin: 0 16px;\n"])),(function(e){return e.theme.neutral5}))},99604:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.DoctypeDetailScreen=t.DEFAULT_PARAMS=void 0;var a,o,i,l,s=r(n(19452)),u=r(n(27424)),c=n(91087),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(84481)),f=n(4007),p=n(35315),y=n(7405),m=n(30975),v=n(39797),_=n(96738),h=n(75905),x=n(39066),g=n(76233),b=n(20349),j=n(11269),O=n(44707),w=n(29287),M=n(33823);function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}var k={collection:void 0,storage:void 0};t.DEFAULT_PARAMS=k;var D=(0,d.memo)((function(){var e=(0,f.useNavigationParams)().id,t=(0,p.useDoctypes)(e),n=(0,d.useState)(k),r=(0,u.default)(n,2),a=r[0],o=r[1],i=(0,d.useCallback)((function(e,t,n){return(0,M.jsx)(y.PoliciesItem,{id:e,isLast:n,index:t})}),[]),l=(0,d.useCallback)((function(e,t,n){return(0,M.jsx)(x.MasterDoctypeItem,{id:e,isLast:n,index:t})}),[]),s=(0,h.useSharedValue)(0),m=(0,h.useSharedValue)(0),v=(0,h.useSharedValue)(0);return(0,M.jsx)(O.SelectedItemProvider,{children:(0,M.jsxs)(c.ScreenWrapper,{isGrey:!0,children:[(0,M.jsx)(c.DynamicHeader,{hideSeparator:!0,title:(0,f.stripSpecialCharacters)((null==t?void 0:t.name)||""),rightComponent:(0,M.jsx)(T,{children:(0,M.jsx)(j.FilterIcon,{params:a,onPress:function(){(0,b.navigateToDoctypeFilter)({params:a,setParams:o})}})}),animatedCollapseIndex:s}),(0,M.jsxs)(B,{children:[(0,M.jsx)(w.SelectedHeader,{title:(0,f.stripSpecialCharacters)((null==t?void 0:t.name)||""),animatedHeight:m,animatedTop:v}),(0,M.jsx)(I,{animatedCollapseIndex:s,params:a,id:e,renderItem:i,renderItem2:l,animatedHeight:m,doctype:t})]})]})})}));t.DoctypeDetailScreen=D;var S={code:"function anonymous(){const{selectedIds}=this.__closure;return selectedIds.value.length==0;}"},C={code:"function anonymous(layout){const{animatedHeight}=this.__closure;animatedHeight.value=layout.headerHeight;}"},V={code:"function anonymous(index){const{animatedCollapseIndex}=this.__closure;animatedCollapseIndex.value=index;}"},I=(0,d.memo)((function(e){var t,n=e.animatedCollapseIndex,r=e.params,a=e.id,o=e.renderItem,i=e.renderItem2,l=e.doctype,s=e.animatedHeight,u=(0,O.useSelectedItem)(),d=u.selectedState,p=u.selectedIds,y=(0,h.useDerivedValue)(((t=function(){return 0==p.value.length}).__closure={selectedIds:p},t.__initData=S,t.__workletHash=5912787252731,t));return(0,M.jsxs)(c.ScrollableTabView.Provider,{scrollEnabled:y,disabledLoadData:d,onLayout:function(){var e=function(e){s.value=e.headerHeight};return e.__closure={animatedHeight:s},e.__initData=C,e.__workletHash=2514887566720,e}(),onCollapse:function(){var e=function(e){n.value=e};return e.__closure={animatedCollapseIndex:n},e.__initData=V,e.__workletHash=0xc693e964b4e,e}(),tabs:[{title:(0,f.translate)("policy.all_documents"),content:function(e){return(0,M.jsx)(c.ScrollableTabView.List,{index:e.index,params:Object.assign({id:a},r),requestFn:m.requestPolicyByDoctype,getItemByQuery:_.getPoliciesByQuery,useItemByQuery:_.usePoliciesByQuery,query:"doctype",renderItem:o})}},{title:(0,f.translate)("policy.master_versions"),content:function(e){return(0,M.jsx)(c.ScrollableTabView.List,{index:e.index,params:{id:a},requestFn:v.requestMasterVersionDoctype,getItemByQuery:g.getMasterVersionDoctypesByQuery,useItemByQuery:g.useMasterVersionDoctypesByQuery,renderItem:i})}}],children:[(0,M.jsx)(c.ScrollableTabView.CollapsableTabBar,{children:(0,M.jsx)(A,{children:(0,M.jsx)(R,{numberOfLines:2,children:(0,f.stripSpecialCharacters)((null==l?void 0:l.name)||"")})})}),(0,M.jsx)(c.ScrollableTabView.Content,{})]})})),T=f.styled.View(a||(a=(0,s.default)(["\n  margin-right: 16px;\n"]))),B=f.styled.View(o||(o=(0,s.default)(["\n  background-color: ",";\n  flex: 1;\n"])),(function(e){return e.theme.neutral9})),A=f.styled.View(i||(i=(0,s.default)(["\n  padding-left: 16px;\n  background-color: ",";\n"])),(function(e){return e.theme.backgroundColor})),R=f.styled.Text(l||(l=(0,s.default)(["\n  font-size: 20px;\n  line-height: 28px;\n  font-family: ",";\n  color: ",";\n"])),f.Fonts.SemiBold,(function(e){return e.theme.neutral1}))},16735:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DoctypeFilter=void 0;var r=n(4007),a=n(91087),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(84481)),i=n(99604),l=n(740),s=n(33823);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var c=(0,o.memo)((function(){var e=(0,r.useNavigationParams)(),t=e.params,n=e.setParams;return(0,s.jsxs)(a.ScreenWrapper,{children:[(0,s.jsx)(a.DynamicHeader,{title:(0,r.translate)("policy.filter")}),(0,s.jsx)(l.FilterComp,{items:["collection","storage"],params:t,setParams:n,defaultParams:i.DEFAULT_PARAMS})]})}));t.DoctypeFilter=c},50213:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.DoctypeMoreMenu=void 0;var a=r(n(17156)),o=r(n(27424)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(84481)),l=n(91087),s=n(74186),u=n(4007),c=n(19855),d=n(11361),f=n(20349),p=n(39797),y=n(12134),m=n(33823);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}var _=(0,u.memoForwardRef)((function(e,t){var n=(0,l.useAnimatedSnapPoints)(),r=n.onViewLayout,v=n.animatedSnapPoints,_=(0,u.useBoolean)(),h=(0,o.default)(_,3),x=h[0],g=h[1],b=h[2],j=(0,u.useTheme)(),O=(0,u.useAsyncFn)((0,a.default)((function*(){return yield(0,p.requestRemoveMasterVersion)({id:e.id})})),[e.id]),w=(0,o.default)(O,2),M=w[0],P=(M.loading,M.error),k=w[1],D=(0,i.useCallback)((function(){g()}),[]),S=(0,i.useCallback)((function(){var n;(0,u.interactManager)((function(){return(0,f.navigateToEditMasterVersion)({id:e.id})}),300),null==(n=t.current)||n.dismiss()}),[e.id]);return(0,u.useAutoToastError)(P),(0,m.jsxs)(l.MyBottomSheet,{name:"doctypes",ref:t,snapPoints:v,children:[(0,m.jsxs)(s.BottomSheetView,{onLayout:r("ok"),children:[(0,m.jsx)(c.MenuItem,{title:(0,u.translate)("policy.edit"),onPress:S}),(0,m.jsx)(c.MenuItem,{textColor:u.Colors.red1,title:(0,u.translate)("policy.remove"),onPress:D}),(0,m.jsx)(d.AnimatedBottomSpace,{})]}),(0,m.jsx)(y.MyConfirmationDialog,{isVisible:x,onCloseRequest:b,title:(0,u.translate)("policy.remove_master_version"),content:(0,u.translate)("policy.are_you_sure_you_want_to_remove_this_master_version"),onPressRightButton:k,colorLeftButton:j.neutral02,bgColorRightButton:j.red1,titleRightButton:(0,u.translate)("policy.remove")})]})}));t.DoctypeMoreMenu=_},39066:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.MasterDoctypeItem=void 0;var a,o,i,l,s,u,c,d,f,p,y=r(n(19452)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(84481)),v=n(4007),_=n(76233),h=r(n(30381)),x=n(17575),g=n(35315),b=n(50213),j=n(20349),O=n(91087),w=n(33823);function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}var P=(0,m.memo)((function(e){var t=e.id,n=(0,_.useMasterVersionDoctypes)(t),r=(0,v.useUser)(null==n?void 0:n.user_id),a=(0,x.useCollections)(null==n?void 0:n.collection_id),o=(0,g.useDoctypes)(null==n?void 0:n.doctype_id),i=(0,v.useTheme)(),l=(0,m.useRef)(null),s=(0,m.useCallback)((function(){(0,j.navigateToEditMasterVersion)({id:t})}),[t]);return(0,w.jsxs)(k,{onPress:s,children:[(0,w.jsxs)(D,{children:[(0,w.jsx)(C,{children:(0,w.jsx)(V,{numberOfLines:2,children:(0,v.stripSpecialCharacters)(null==n?void 0:n.name)})}),(0,w.jsx)(I,{imageSize:24,source:v.IC_MORE,imageStyle:{tintColor:i.neutral2},onPress:function(){var e;return null==(e=l.current)?void 0:e.present()}})]}),(0,w.jsxs)(S,{children:[(0,w.jsx)(T,{label:(0,v.translate)("policy.created_by"),value:null==r?void 0:r.name}),(0,w.jsx)(T,{label:(0,v.translate)("policy.date"),value:(0,h.default)(null==n?void 0:n.since,"X").format("DD/MM/YYYY")}),(0,w.jsx)(T,{label:(0,v.translate)("policy.type"),value:null==o?void 0:o.name}),(0,w.jsx)(T,{label:(0,v.translate)("policy.collection"),value:null==a?void 0:a.name})]}),(0,w.jsx)(b.DoctypeMoreMenu,{ref:l,id:t})]})}));t.MasterDoctypeItem=P;var k=v.styled.TouchableOpacity(a||(a=(0,y.default)(["\n  padding: 8px 16px;\n  background-color: ",";\n  margin-top: 8px;\n"])),(function(e){return e.theme.backgroundColor})),D=v.styled.View(o||(o=(0,y.default)(["\n  flex-direction: row;\n"]))),S=v.styled.View(i||(i=(0,y.default)([""]))),C=v.styled.View(l||(l=(0,y.default)(["\n  flex: 1;\n"]))),V=v.styled.Text(s||(s=(0,y.default)(["\n  color: ",";\n  font-family: ",";\n  font-size: 16px;\n  line-height: 24px;\n"])),(function(e){return e.theme.neutral1}),v.Fonts.Medium),I=(0,v.styled)(O.UIButton)(u||(u=(0,y.default)([""]))),T=(0,m.memo)((function(e){var t=e.label,n=void 0===t?"":t,r=e.value,a=void 0===r?"":r;return(0,w.jsxs)(B,{children:[(0,w.jsxs)(R,{children:[n,":"]}),(0,w.jsx)(A,{children:(0,w.jsx)(W,{numberOfLines:2,children:a})})]})})),B=v.styled.View(c||(c=(0,y.default)(["\n  flex-direction: row;\n  padding-top: 8px;\n"]))),A=v.styled.View(d||(d=(0,y.default)(["\n  flex: 1;\n"]))),R=v.styled.Text(f||(f=(0,y.default)(["\n  color: ",";\n  font-size: 12px;\n  line-height: 16px;\n  margin-right: 4px;\n  width: 90px;\n"])),(function(e){return e.theme.neutral2})),W=v.styled.Text(p||(p=(0,y.default)(["\n  color: ",";\n  font-family: ",";\n  font-size: 12px;\n  line-height: 16px;\n"])),(function(e){return e.theme.neutral1}),v.Fonts.Medium)},39797:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.requestRemoveMasterVersion=t.requestMasterVersionDoctype=t.requestEditMasterVersion=void 0;var a,o,i,l=r(n(861)),s=r(n(17156)),u=n(4007),c=n(30806),d=n(76233);t.requestMasterVersionDoctype=function(e){return(a=a||(0,s.default)((function*(e){var t=(yield u.Fetch.postWithToken("@"+u.Core.systemPath+"/policy/ajax/api/mobile/doc/doctype.mvs",e)).data;return(0,c.batch)((function(){if(t.mvs){(0,d.syncMasterVersionDoctypes)(t.mvs);var n=t.mvs.map((function(e){return e.id.toString()}));(0,d.setMasterVersionDoctypesQuery)((function(t){return Object.assign({},t,{all:e.page&&e.page>1?[].concat((0,l.default)(t.all),(0,l.default)(n)):n})}))}})),t.mvs}))).apply(this,arguments)};t.requestEditMasterVersion=function(e){return(o=o||(0,s.default)((function*(e){var t=(yield u.Fetch.postWithToken("@"+u.Core.systemPath+"/policy/ajax/api/doc/mv/edit",e)).data;return(0,c.batch)((function(){"ok"==t.message&&(0,d.syncMasterVersionDoctypes)((function(t){return[Object.assign({},null==t?void 0:t[e.id],{doctype_id:e.doctype_id,collection_id:e.collection_id,name:e.name})]}))})),t.message}))).apply(this,arguments)};t.requestRemoveMasterVersion=function(e){return(i=i||(0,s.default)((function*(e){var t=(yield u.Fetch.postWithToken("@"+u.Core.systemPath+"/policy/ajax/api/doc/mv/remove",e)).data;return(0,c.batch)((function(){"ok"==t.message&&(0,d.setMasterVersionDoctypesQuery)((function(t){return Object.assign({},t,{all:t.all.filter((function(t){return t!=e.id}))})}))})),t.message}))).apply(this,arguments)}}}]);//# sourceMappingURL=src_screens_DocumentTypesScreen_DoctypeFilter_tsx.chunk.bundle.map?platform=ios