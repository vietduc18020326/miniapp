{"version":3,"file":"src_screens_MenuScreen_index_tsx.chunk.bundle","mappings":"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","sources":["webpack:///./src/screens/MenuScreen/index.tsx"],"sourcesContent":["import {\n  LeftModalHeader,\n  ScreenWrapper,\n  UIFlashList,\n  UserAvatar,\n} from '@true/ui';\nimport React, {memo, useCallback, useMemo} from 'react';\nimport {\n  Fonts,\n  IC_SEARCH,\n  stripSpecialCharacters,\n  styled,\n  translate,\n  useMe,\n  useUserGroup,\n  useUserGroupByQuery,\n} from '@true/core';\nimport {Button} from '@policy/components/Button';\nimport {View} from 'react-native';\nimport {useStorages, useStoragesByQuery} from '@policy/store/storages';\nimport {\n  navigateToOneTabPolicyScreen,\n  navigateToSearchScreen,\n} from '@policy/utils';\nimport {\n  requestPolicyBySaved,\n  requestPolicyBySender,\n  requestPolicyByStorage,\n} from '@policy/store/policies/functions';\nimport {\n  IC_FILLED_APARTMENT,\n  IC_OUTLINED_SAVE,\n  IC_OUTLINED_TOPIC,\n} from '@true/asset';\n\ninterface IItemData {\n  id: string | number;\n  type: 'sender' | 'saved' | 'storage';\n}\n\ninterface ISectionData {\n  title: string;\n  id: number;\n  icon: any;\n}\n\nexport const MenuScreen = memo(() => {\n  const me = useMe();\n\n  const renderItem = useCallback(\n    ({item, index}: {item: IItemData; index?: number}) => (\n      <Item data={item} index={index} />\n    ),\n    [],\n  );\n\n  const renderSection = useCallback(\n    ({\n      item,\n      index,\n      toggle,\n    }: {\n      item: ISectionData;\n      toggle: () => void;\n      index: number;\n    }) => <Section data={item} index={index} />,\n    [],\n  );\n\n  const storages = useStoragesByQuery('all');\n  const senders = useUserGroupByQuery('teams');\n\n  const data: ISectionData[] = useMemo(\n    () => [\n      {\n        id: 'section_0',\n        title: translate('policy.storages'),\n        // data: storages.map(id => ({id, type: 'storage'})),\n        icon: IC_OUTLINED_TOPIC,\n      },\n      {\n        id: 'section_1',\n        title: translate('policy.senders'),\n        // data: senders.map(id => ({id, type: 'sender'})),\n        icon: IC_FILLED_APARTMENT,\n      },\n      {\n        id: 'section_2',\n        title: translate('policy.saved'),\n        // data: ['expired', 'rejected', 'archived', 'trash'].map(id => ({\n        //   id,\n        //   type: 'saved',\n        // })),\n        icon: IC_OUTLINED_SAVE,\n      },\n    ],\n    [storages, senders],\n  );\n\n  const map: Record<string, IItemData[]> = useMemo(\n    () => ({\n      section_0: storages.map(id => ({id, type: 'storage'})),\n      section_1: senders.map(id => ({id, type: 'sender'})),\n      section_2: ['expired', 'rejected', 'archived', 'trash'].map(id => ({\n        id,\n        type: 'saved',\n      })),\n    }),\n    [storages, senders],\n  );\n\n  return (\n    <ScreenWrapper isGrey={true}>\n      <LeftModalHeader\n        hideSeparator={true}\n        title={translate('policy.menu')}\n        rightComponent={\n          <SRow>\n            <Button source={IC_SEARCH} onPress={navigateToSearchScreen} />\n            {/*<Button source={IC_SETTING} style={styles.headerIcon} />*/}\n          </SRow>\n        }\n      />\n      <SUserInfoWrapper>\n        <UserAvatar userKey={me?.id || ''} size={40} />\n        <SUserView>\n          <SUserText>{me?.name}</SUserText>\n          <SUserMailText>{me?.email}</SUserMailText>\n        </SUserView>\n      </SUserInfoWrapper>\n      <UIFlashList\n        data={data}\n        mapKey={'id'}\n        map={map}\n        estimatedItemSize={50}\n        renderItem={renderItem}\n        renderSection={renderSection}\n      />\n    </ScreenWrapper>\n  );\n});\n\nconst SRow = styled.View`\n  flex-direction: row;\n  margin-right: 16px;\n`;\n\nconst SUserInfoWrapper = styled.View`\n  flex-direction: row;\n  padding: 8px 16px;\n  align-items: center;\n  background-color: ${p => p.theme.backgroundColor};\n  border-bottom-width: 1px;\n  border-color: ${p => p.theme.neutral5};\n`;\n\nconst SUserView = styled.View`\n  margin-left: 12px;\n`;\n\nconst SUserText = styled.Text`\n  font-size: 16px;\n  line-height: 24px;\n  font-family: ${Fonts.Regular};\n\n  color: ${p => p.theme.neutral1};\n`;\n\nconst SUserMailText = styled.Text`\n  font-size: 12px;\n  line-height: 16px;\n  font-family: ${Fonts.Regular};\n  color: ${p => p.theme.neutral2};\n`;\n\nconst Section = memo(\n  ({data, index}: {data: {title: string; icon: any}; index?: number}) => {\n    return (\n      <SSectionContainer>\n        <SSectionIcon source={data.icon} />\n        <SSectionText>{data.title}</SSectionText>\n      </SSectionContainer>\n    );\n  },\n);\n\nconst Item = memo(({data, index}: {data: IItemData; index?: number}) => {\n  const render = useCallback((text: string, onPress?: () => void) => {\n    return (\n      <View>\n        <SItemContainer onPress={onPress}>\n          <SItemText>{text}</SItemText>\n        </SItemContainer>\n      </View>\n    );\n  }, []);\n\n  if (data.type === 'sender') {\n    const sender = useUserGroup(data.id);\n\n    return render(stripSpecialCharacters(sender?.name), () => {\n      navigateToOneTabPolicyScreen({\n        params: {id: data.id},\n        query: 'sender',\n        requestFn: requestPolicyBySender,\n        title: sender?.name || '',\n        items: ['collection', 'storage', 'receiver', 'doctype'],\n      });\n    });\n  }\n\n  if (data.type === 'storage') {\n    const storage = useStorages(data.id);\n\n    return render(stripSpecialCharacters(storage?.name), () => {\n      navigateToOneTabPolicyScreen({\n        params: {id: data.id},\n        query: 'storage',\n        requestFn: requestPolicyByStorage,\n        title: storage?.name || '',\n        items: ['collection', 'doctype'],\n      });\n    });\n  }\n\n  const title = useMemo(\n    () =>\n      data.id.toString() === 'trash'\n        ? translate('policy.soft_deleted')\n        : translate('policy.' + data.id.toString()),\n    [data.id],\n  );\n\n  return render(title, () => {\n    navigateToOneTabPolicyScreen({\n      params: {tail: data.id},\n      query: 'saved',\n      requestFn: requestPolicyBySaved,\n      title: title,\n      items: ['collection', 'storage', 'receiver', 'doctype'],\n      mainKey: 'tail',\n    });\n  });\n});\n\nconst SSectionContainer = styled.View`\n  flex-direction: row;\n  align-items: center;\n  padding: 12px 16px;\n  background-color: ${p => p.theme.backgroundColor};\n  margin-top: 8px;\n`;\nconst SSectionText = styled.Text`\n  color: ${p => p.theme.neutral1};\n  font-size: 16px;\n  line-height: 24px;\n  font-family: ${Fonts.Medium};\n`;\nconst SSectionIcon = styled.Image`\n  margin-right: 8px;\n  height: 24px;\n  width: 24px;\n`;\n\nconst SItemContainer = styled.TouchableOpacity`\n  padding: 16px;\n  background-color: ${p => p.theme.backgroundColor};\n`;\nconst SItemText = styled.Text`\n  color: ${p => p.theme.neutral1};\n`;\n"],"names":["_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_ui","require","_react","obj","nodeInterop","__esModule","default","cache","_getRequireWildcardCache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_interopRequireWildcard","_core","_Button","_reactNative","_storages","_utils","_functions","_asset","_jsxRuntime","WeakMap","cacheBabelInterop","cacheNodeInterop","exports","memo","me","useMe","renderItem","useCallback","_ref","item","index","jsx","Item","data","renderSection","_ref2","toggle","Section","storages","useStoragesByQuery","senders","useUserGroupByQuery","useMemo","id","title","translate","icon","IC_OUTLINED_TOPIC","IC_FILLED_APARTMENT","IC_OUTLINED_SAVE","map","section_0","type","section_1","section_2","jsxs","ScreenWrapper","isGrey","children","LeftModalHeader","hideSeparator","rightComponent","SRow","Button","source","IC_SEARCH","onPress","navigateToSearchScreen","SUserInfoWrapper","UserAvatar","userKey","size","SUserView","SUserText","name","SUserMailText","email","UIFlashList","mapKey","estimatedItemSize","styled","View","_taggedTemplateLiteralLoose2","p","theme","backgroundColor","neutral5","Text","Fonts","Regular","neutral1","neutral2","_ref3","SSectionContainer","SSectionIcon","SSectionText","_ref4","render","text","SItemContainer","SItemText","sender","useUserGroup","stripSpecialCharacters","navigateToOneTabPolicyScreen","params","query","requestFn","requestPolicyBySender","items","storage","useStorages","requestPolicyByStorage","toString","tail","requestPolicyBySaved","mainKey","Medium","Image","TouchableOpacity"],"sourceRoot":""}