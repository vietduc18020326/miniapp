(self.webpackChunkMiniPolicy=self.webpackChunkMiniPolicy||[]).push([["src_screens_PersonalScreen_PersonalFilter_tsx"],{11361:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatedBottomSpace=void 0;var r=u(n(84481)),a=n(14931),l=u(n(46763)),o=n(33823);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=a?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}return r.default=e,n&&n.set(e,r),r}var s={code:"function anonymous(){const{aBottom}=this.__closure;return{height:aBottom.value};}"},c=(0,r.memo)((function(e){var t,n=(0,a.useAnimatedSafeAreaInsets)().aBottom,r=(0,l.useAnimatedStyle)(((t=function(){return{height:n.value}}).__closure={aBottom:n},t.__initData=s,t.__workletHash=7203089036154,t));return(0,o.jsx)(l.default.View,Object.assign({},e,{style:[e.style,r]}))}));t.AnimatedBottomSpace=c},740:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.FilterComp=void 0;var a,l,o,i,u,s,c,f,p=r(n(861)),d=r(n(27424)),m=r(n(19452)),v=r(n(70215)),y=C(n(84481)),_=n(58198),h=n(64345),g=n(17575),b=n(32602),x=n(35315),j=n(11361),O=n(92571),w=C(n(46763)),P=n(33823),k=["type"];function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=a?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}return r.default=e,n&&n.set(e,r),r}var A=[{label:(0,h.translate)("policy.bookmarked"),value:"bookmarked"},{label:(0,h.translate)("policy.created"),value:"created"},{label:(0,h.translate)("policy.reviewed"),value:"reviewed"},{label:(0,h.translate)("policy.published"),value:"published"},{label:(0,h.translate)("policy.pending"),value:"pending"},{label:(0,h.translate)("policy.rejected"),value:"rejected"}],M=[{label:(0,h.translate)("policy.issued"),value:"issued"},{label:(0,h.translate)("policy.effective"),value:"effective"}],D={code:"function anonymous(){const{_params}=this.__closure;return _params.value;}"},R={code:"function anonymous(__params,__prevParams){const{_params,runOnJS,setAdvancedExport}=this.__closure;if(!!(__prevParams!==null&&__prevParams!==void 0&&__prevParams.collection)&&__params.collection!==__prevParams.collection){_params.value={..._params.value,folder:undefined};}if(JSON.stringify(__params)!==JSON.stringify(__prevParams)){runOnJS(setAdvancedExport)();}}"},B=(0,y.memo)((function(e){var t,n=e.items,r=e.params,a=e.setParams,l=e.defaultParams,o=(0,y.useRef)({}),i=(0,w.useSharedValue)(r),u=(0,y.useCallback)((function(){for(var e of n)if(Array.isArray(e))for(var t of e){var r,a="string"!=typeof t?null==(r=(0,y.cloneElement)(t({})).props)?void 0:r.keyName:-1!==t.indexOf("date")?[t+"_from",t+"_to"]:t;(Array.isArray(a)?i.value[a[0]]||i.value[a[1]]:i.value[a])&&(i.value=Object.assign({},i.value,{advanced_export:1}))}}),[]);(0,w.useAnimatedReaction)(((t=function(){return i.value}).__closure={_params:i},t.__initData=D,t.__workletHash=9029730044761,t),function(){var e=function(e,t){null!=t&&t.collection&&e.collection!==t.collection&&(i.value=Object.assign({},i.value,{folder:void 0})),JSON.stringify(e)!==JSON.stringify(t)&&(0,w.runOnJS)(u)()};return e.__closure={_params:i,runOnJS:w.runOnJS,setAdvancedExport:u},e.__initData=R,e.__workletHash=0xc6c774537f7,e}(),[]);var s=(0,y.useCallback)((function(){a(i.value),(0,h.goBack)()}),[i,a]),c=(0,y.useCallback)((function(){a(l),(0,h.goBack)()}),[a]),f=(0,h.useTheme)(),p=(0,y.useRef)(null),d=(0,y.useRef)(null);return(0,P.jsxs)(W,{disableOnAndroid:!0,scrollInputAdditionalOffset:110,scrollRef:d,ref:p,children:[(0,P.jsxs)(O.ScrollView,{ref:d,children:[(0,P.jsx)(V,{itemsRef:o,params:i,items:n}),(0,P.jsx)(O.View,{style:{height:16}})]}),(0,P.jsx)(O.View,{style:{height:1,backgroundColor:f.neutral5}}),(0,P.jsx)(_.BottomButton,{containerStyle:{marginHorizontal:16,marginVertical:12,borderRadius:20},leftContainerStyle:{borderWidth:1,borderColor:f.primaryColor,borderRadius:8},rightContainerStyle:{borderRadius:8},leftBgColor:f.white,textColor:f.primaryColor,leftText:(0,h.translate)("policy.reset"),rightText:(0,h.translate)("policy.apply"),onRightPress:s,onLeftPress:c}),(0,P.jsx)(j.AnimatedBottomSpace,{})]})}));t.FilterComp=B;var V=(0,y.memo)((function(e){var t=e.items,n=e.params,r=e.itemsRef;return(0,P.jsx)(P.Fragment,{children:t.map((function(e){return(0,P.jsx)($,{children:(0,P.jsx)(I,{itemsRef:r,type:e,params:n})})}))})})),J={code:"function anonymous(){const{interpolate,visible,contentHeight}=this.__closure;return{height:interpolate(visible.value,[0,1],[0,contentHeight.value]),opacity:visible.value};}"},H={code:"function anonymous(){const{interpolate,visible}=this.__closure;return{transform:[{rotate:interpolate(visible.value,[0,1],[270,90])+'deg'}]};}"},I=(0,y.memo)((function(e){var t=e.type,n=(0,v.default)(e,k);if(!Array.isArray(t))return(0,P.jsx)(Q,Object.assign({},e));var r,a=(0,w.useSharedValue)(0),l=(0,w.useSharedValue)(0),o=((0,h.useTheme)(),(0,w.useAnimatedStyle)(((r=function(){return{height:(0,w.interpolate)(a.value,[0,1],[0,l.value]),opacity:a.value}}).__closure={interpolate:w.interpolate,visible:a,contentHeight:l},r.__initData=J,r.__workletHash=8409949742507,r),[])),i=(0,w.useAnimatedStyle)(function(){var e=function(){return{transform:[{rotate:(0,w.interpolate)(a.value,[0,1],[270,90])+"deg"}]}};return e.__closure={interpolate:w.interpolate,visible:a},e.__initData=H,e.__workletHash=2526022283159,e}(),[]);return(0,P.jsxs)(O.View,{children:[(0,P.jsx)(F,{}),(0,P.jsxs)(T,{onPress:function(){a.value=(0,w.withTiming)(a.value?0:1)},children:[(0,P.jsx)(N,{children:(0,h.translate)("policy.advanced_filter")}),(0,P.jsx)(U,{style:i,source:h.IC_ARROW})]}),(0,P.jsx)(w.default.View,{style:[o,{overflow:"scroll",justifyContent:"flex-end"}],children:(0,P.jsx)(O.View,{onLayout:function(e){l.value=e.nativeEvent.layout.height},children:t.map((function(e){return(0,P.jsx)(Q,Object.assign({type:e},n))}))})})]})})),W=(0,h.styled)(_.MyKeyboardAvoidingView)(a||(a=(0,m.default)(["\n  background-color: ",";\n  margin-top: 8px;\n"])),(function(e){return e.theme.white})),F=h.styled.View(l||(l=(0,m.default)(["\n  height: 8px;\n  background-color: ",";\n  width: 140%;\n  align-self: center;\n"])),(function(e){return e.theme.neutral8})),T=h.styled.TouchableOpacity(o||(o=(0,m.default)(["\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 0;\n"]))),N=h.styled.Text(i||(i=(0,m.default)(["\n  font-size: 16px;\n  line-height: 24px;\n  color: ",";\n  font-family: ",";\n"])),(function(e){return e.theme.neutral1}),h.Fonts.Medium),U=(0,h.styled)(w.default.Image)(u||(u=(0,m.default)(["\n  height: 17px;\n  width: 17px;\n"]))),E={code:"function anonymous(){const{params}=this.__closure;var _params$value;return(_params$value=params.value)===null||_params$value===void 0?void 0:_params$value.collection;}"},L={code:"function anonymous(_collection,_prevCollection){const{runOnJS,setCollection}=this.__closure;if(_collection!==_prevCollection){runOnJS(setCollection)(_collection);}}"},Q=(0,y.memo)((function(e){var t,n,r=e.type,a=e.params,l=e.itemsRef;if("string"!=typeof r)return r(a);var o=(0,y.useMemo)((function(){return"receiver"==r?["recipient"]:"doctype"==r?["document_type"]:-1!==r.indexOf("date")?["from_date","to_date"]:[r]}),[r]);if(-1!==r.indexOf("date"))return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(G,{children:(0,h.translate)("policy."+r)}),(0,P.jsxs)(z,{children:[(0,P.jsx)(_.UIInput.DateTime,{style:{flex:1},mode:"date",title:(0,h.translate)("policy."+o[0]),params:a,keyName:r+"_from"}),(0,P.jsx)(_.UIInput.DateTime,{style:{flex:1,marginLeft:16},mode:"date",title:(0,h.translate)("policy."+o[1]),params:a,keyName:r+"_to"})]})]});if("created_by"==r)return(0,P.jsx)(_.UIInput.UserPicker,{title:(0,h.translate)("policy."+o[0]),params:a,keyName:r,type:"user"});var i,u=(0,b.useStoragesByQuery)("all").map((function(e){var t;return{label:(null==(t=(0,b.getStorages)(e))?void 0:t.name)||(0,h.translate)("policy.undefined"),value:e}})),s=(0,g.useCollectionsByQuery)("all").map((function(e){var t;return{label:(null==(t=(0,g.getCollections)(e))?void 0:t.name)||(0,h.translate)("policy.undefined"),value:e}})),c=(0,h.useUserGroupByQuery)("teams").map((function(e){var t;return{label:(null==(t=(0,h.getUserGroup)(e))?void 0:t.name)||(0,h.translate)("policy.undefined"),value:e}})),f=(0,x.useDoctypesByQuery)("all").map((function(e){var t;return{label:(null==(t=(0,x.getDoctypes)(e))?void 0:t.name)||(0,h.translate)("policy.undefined"),value:e}})),m=(0,y.useState)(""),v=(0,d.default)(m,2),j=v[0],O=v[1];"folder"==r&&(0,w.useAnimatedReaction)(((i=function(){var e;return null==(e=a.value)?void 0:e.collection}).__closure={params:a},i.__initData=E,i.__workletHash=8111418951837,i),function(){var e=function(e,t){e!==t&&(0,w.runOnJS)(O)(e)};return e.__closure={runOnJS:w.runOnJS,setCollection:O},e.__initData=L,e.__workletHash=4403808879510,e}(),[]);var k=(null==(t=(0,g.useCollections)(j))||null==(n=t.folders)?void 0:n.map((function(e){return{label:(null==e?void 0:e.name)||(0,h.translate)("policy.undefined"),value:null==e?void 0:e.id}})))||[],S=(0,y.useMemo)((function(){return"collection"==r?s:"storage"==r?u:"receiver"==r?c:"doctype"==r?f:"folder"==r?k:"sort"==r?M:"filter"==r?A:[]}),[r,j]),C=(0,y.useMemo)((function(){var e=void 0;return"filter"==r?{label:(0,h.translate)("policy.no_filter"),value:e}:"sort"==r?{label:(0,h.translate)("policy.created_time"),value:e}:{label:(0,h.translate)("policy.all"),value:e}}),[r]);return(0,P.jsx)(_.UIInput.Selector,{ref:function(e){l.current&&(l.current[r]=e)},title:(0,h.translate)("policy."+o[0]),params:a,keyName:r,options:[C].concat((0,p.default)(S)),hideClearButton:!0})})),$=h.styled.View(s||(s=(0,m.default)(["\n  margin: 16px 16px 0 16px;\n"]))),z=h.styled.View(c||(c=(0,m.default)(["\n  flex-direction: row;\n"]))),G=h.styled.Text(f||(f=(0,m.default)(["\n  font-size: 14px;\n  line-height: 20px;\n  font-family: ",";\n  margin-bottom: 4px;\n  margin-top: 12px;\n  color: ",";\n"])),h.Fonts.Regular,(function(e){return e.theme.neutral1}))},58803:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PersonalFilter=void 0;var r=n(58198),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=a?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e,n&&n.set(e,r);return r}(n(84481)),l=n(64345),o=n(55211),i=n(740),u=n(33823);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var c=(0,a.memo)((function(){var e=(0,l.useNavigationParams)(),t=e.params,n=e.setParams;return(0,u.jsxs)(r.ScreenWrapper,{children:[(0,u.jsx)(r.DynamicHeader,{title:(0,l.translate)("policy.filter")}),(0,u.jsx)(i.FilterComp,{items:["collection","folder","storage","receiver","doctype",["created_date","effective_date","expired_date"]],params:t,setParams:n,defaultParams:o.DEFAULT_PARAMS})]})}));t.PersonalFilter=c}}]);//# sourceMappingURL=src_screens_PersonalScreen_PersonalFilter_tsx.chunk.bundle.map?platform=ios