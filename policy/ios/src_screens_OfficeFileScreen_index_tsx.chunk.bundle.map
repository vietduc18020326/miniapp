{"version":3,"file":"src_screens_OfficeFileScreen_index_tsx.chunk.bundle","mappings":"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","sources":["webpack:///./src/components/AnimatedBottomSpace.tsx","webpack:///./src/screens/OfficeFileScreen/FileWebView.tsx","webpack:///./src/screens/OfficeFileScreen/index.tsx"],"sourcesContent":["import React, {memo} from 'react';\nimport {useAnimatedSafeAreaInsets} from 'react-native-safe-area-context';\nimport Animated, {useAnimatedStyle} from 'react-native-reanimated';\nimport {ViewProps} from 'react-native';\nimport {flatStyles} from '@true/core';\n\nexport const AnimatedBottomSpace = memo((props: ViewProps) => {\n  const {aBottom} = useAnimatedSafeAreaInsets();\n  const animatedStyle = useAnimatedStyle(() => ({\n    height: aBottom.value,\n  }));\n\n  return <Animated.View {...props} style={[props.style, animatedStyle]} />;\n});\n","import React, {memo, useRef, useState} from 'react';\nimport WebView from 'react-native-webview';\nimport {interactManager} from '@true/core';\nimport {ActivityIndicator, View} from 'react-native';\n\nconst jsCode = `(function() {\n  window.ReactNativeWebView.postMessage(JSON.stringify(document.getElementsByTagName(\"title\")));\n})();`;\n\nexport const FileWebView = memo(({url}: {url: string}) => {\n  const ref = useRef<WebView>(null);\n  const timeout = useRef<any>(null);\n  const timeout2 = useRef<any>(null);\n\n  const [mounted, setMounted] = useState(false);\n\n  return (\n    <View style={{flex: 1}}>\n      <WebView\n        ref={ref}\n        style={{opacity: 99, flex: 1}}\n        scalesPageToFit={false}\n        javaScriptEnabled={true}\n        injectedJavaScript={jsCode}\n        onMessage={e => {\n          if (e.nativeEvent?.data == '{}') {\n            return interactManager(\n              () => {\n                ref.current?.reload();\n              },\n              300,\n              true,\n              timeout,\n            );\n          }\n          if (!mounted) {\n            interactManager(\n              () => {\n                setMounted(true);\n              },\n              300,\n              true,\n              timeout2,\n            );\n          }\n        }}\n        // injectedJavaScript={`const meta = document.createElement('meta'); meta.setAttribute('content', 'width=device-width, initial-scale=1, maximum-scale=1 ,user-scalable=1'); meta.setAttribute('name', 'viewport'); document.getElementsByTagName('head')[0].appendChild(meta); `}\n        source={{\n          // uri: `https://view.officeapps.live.com/op/embed.aspx?src=${url}`,\n          uri: `http://docs.google.com/gview?url=${url}&embedded=true`,\n        }}\n      />\n      {!mounted ? (\n        <View\n          style={{\n            position: 'absolute',\n            bottom: 0,\n            top: 0,\n            width: '100%',\n            alignItems: 'center',\n            justifyContent: 'center',\n          }}>\n          <ActivityIndicator />\n        </View>\n      ) : null}\n    </View>\n  );\n});\n","import {DynamicHeader, ScreenWrapper} from '@true/ui';\nimport React, {memo} from 'react';\nimport {useNavigationParams} from '@true/core';\nimport {AnimatedBottomSpace} from '@policy/components/AnimatedBottomSpace';\nimport {FileWebView} from '@policy/screens/OfficeFileScreen/FileWebView';\n\nexport interface OfficeFileScreenProps {\n  title: string;\n  url: string;\n}\n\nexport const OfficeFileScreen = memo(() => {\n  const {title, url} = useNavigationParams<OfficeFileScreenProps>();\n\n  return (\n    <ScreenWrapper>\n      <DynamicHeader title={title} />\n      <FileWebView url={url} />\n      <AnimatedBottomSpace />\n    </ScreenWrapper>\n  );\n});\n"],"names":["_react","_interopRequireWildcard","require","_reactNativeSafeAreaContext","_reactNativeReanimated","_jsxRuntime","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_worklet_7203089036154_init_data","code","exports","memo","props","anonymous","aBottom","useAnimatedSafeAreaInsets","animatedStyle","useAnimatedStyle","height","value","__closure","__initData","__workletHash","jsx","View","assign","style","_reactNativeWebview","_interopRequireDefault","_core","_reactNative","_ref","url","ref","useRef","timeout","timeout2","_useState","useState","_useState2","_slicedToArray2","mounted","setMounted","jsxs","flex","children","opacity","scalesPageToFit","javaScriptEnabled","injectedJavaScript","onMessage","e","_e$nativeEvent","nativeEvent","data","interactManager","_ref$current","current","reload","source","uri","position","bottom","top","width","alignItems","justifyContent","ActivityIndicator","_ui","_AnimatedBottomSpace","_FileWebView","_useNavigationParams","useNavigationParams","title","ScreenWrapper","DynamicHeader","FileWebView","AnimatedBottomSpace"],"sourceRoot":""}