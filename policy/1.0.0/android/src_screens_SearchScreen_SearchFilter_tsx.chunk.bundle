(self.webpackChunkMiniPolicy=self.webpackChunkMiniPolicy||[]).push([["src_screens_SearchScreen_SearchFilter_tsx","src_screens_SearchScreen_index_tsx"],{11361:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatedBottomSpace=void 0;var n=s(r(84481)),a=r(25200),l=s(r(46763)),o=r(33823);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=a?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}var u={code:"function anonymous(){const{aBottom}=this.__closure;return{height:aBottom.value};}"};t.AnimatedBottomSpace=(0,n.memo)((function(e){var t,r=(0,a.useAnimatedSafeAreaInsets)().aBottom,n=(0,l.useAnimatedStyle)(((t=function(){return{height:r.value}}).__closure={aBottom:r},t.__initData=u,t.__workletHash=7203089036154,t));return(0,o.jsx)(l.default.View,Object.assign({},e,{style:[e.style,n]}))}))},740:function(e,t,r){var n=r(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.FilterComp=void 0;var a,l,o,i,s,u,c,d,f=n(r(861)),p=n(r(27424)),m=n(r(19452)),y=n(r(70215)),v=C(r(84481)),_=r(91087),h=r(4007),b=r(17575),g=r(32602),x=r(35315),j=r(11361),O=r(92571),w=C(r(46763)),S=r(33823),P=["type"];function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(k=function(e){return e?r:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=k(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=a?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}var M=[{label:(0,h.translate)("policy.bookmarked"),value:"bookmarked"},{label:(0,h.translate)("policy.created"),value:"created"},{label:(0,h.translate)("policy.reviewed"),value:"reviewed"},{label:(0,h.translate)("policy.published"),value:"published"},{label:(0,h.translate)("policy.pending"),value:"pending"},{label:(0,h.translate)("policy.rejected"),value:"rejected"}],B=[{label:(0,h.translate)("policy.issued"),value:"issued"},{label:(0,h.translate)("policy.effective"),value:"effective"}],I={code:"function anonymous(){const{_params}=this.__closure;return _params.value;}"},V={code:"function anonymous(__params,__prevParams){const{_params,runOnJS,setAdvancedExport}=this.__closure;if(!!(__prevParams!==null&&__prevParams!==void 0&&__prevParams.collection)&&__params.collection!==__prevParams.collection){_params.value={..._params.value,folder:undefined};}if(JSON.stringify(__params)!==JSON.stringify(__prevParams)){runOnJS(setAdvancedExport)();}}"},A=(t.FilterComp=(0,v.memo)((function(e){var t,r=e.items,n=e.params,a=e.setParams,l=e.defaultParams,o=(0,v.useRef)({}),i=(0,w.useSharedValue)(n),s=(0,v.useCallback)((function(){for(var e of r)if(Array.isArray(e))for(var t of e){var n,a="string"!=typeof t?null==(n=(0,v.cloneElement)(t({})).props)?void 0:n.keyName:-1!==t.indexOf("date")?[t+"_from",t+"_to"]:t;(Array.isArray(a)?i.value[a[0]]||i.value[a[1]]:i.value[a])&&(i.value=Object.assign({},i.value,{advanced_export:1}))}}),[]);(0,w.useAnimatedReaction)(((t=function(){return i.value}).__closure={_params:i},t.__initData=I,t.__workletHash=9029730044761,t),function(){var e=function(e,t){null!=t&&t.collection&&e.collection!==t.collection&&(i.value=Object.assign({},i.value,{folder:void 0})),JSON.stringify(e)!==JSON.stringify(t)&&(0,w.runOnJS)(s)()};return e.__closure={_params:i,runOnJS:w.runOnJS,setAdvancedExport:s},e.__initData=V,e.__workletHash=0xc6c774537f7,e}(),[]);var u=(0,v.useCallback)((function(){a(i.value),(0,h.goBack)()}),[i,a]),c=(0,v.useCallback)((function(){a(l),(0,h.goBack)()}),[a]),d=(0,h.useTheme)(),f=(0,v.useRef)(null),p=(0,v.useRef)(null);return(0,S.jsxs)(W,{disableOnAndroid:!0,scrollInputAdditionalOffset:110,scrollRef:p,ref:f,children:[(0,S.jsxs)(O.ScrollView,{ref:p,children:[(0,S.jsx)(A,{itemsRef:o,params:i,items:r}),(0,S.jsx)(O.View,{style:{height:16}})]}),(0,S.jsx)(O.View,{style:{height:1,backgroundColor:d.neutral5}}),(0,S.jsx)(_.BottomButton,{containerStyle:{marginHorizontal:16,marginVertical:12,borderRadius:20},leftContainerStyle:{borderWidth:1,borderColor:d.primaryColor,borderRadius:8},rightContainerStyle:{borderRadius:8},leftBgColor:d.white,textColor:d.primaryColor,leftText:(0,h.translate)("policy.reset"),rightText:(0,h.translate)("policy.apply"),onRightPress:u,onLeftPress:c}),(0,S.jsx)(j.AnimatedBottomSpace,{})]})})),(0,v.memo)((function(e){var t=e.items,r=e.params,n=e.itemsRef;return(0,S.jsx)(S.Fragment,{children:t.map((function(e){return(0,S.jsx)(U,{children:(0,S.jsx)(R,{itemsRef:n,type:e,params:r})})}))})}))),D={code:"function anonymous(){const{interpolate,visible,contentHeight}=this.__closure;return{height:interpolate(visible.value,[0,1],[0,contentHeight.value]),opacity:visible.value};}"},T={code:"function anonymous(){const{interpolate,visible}=this.__closure;return{transform:[{rotate:interpolate(visible.value,[0,1],[270,90])+'deg'}]};}"},R=(0,v.memo)((function(e){var t=e.type,r=(0,y.default)(e,P);if(!Array.isArray(t))return(0,S.jsx)(E,Object.assign({},e));var n,a=(0,w.useSharedValue)(0),l=(0,w.useSharedValue)(0),o=((0,h.useTheme)(),(0,w.useAnimatedStyle)(((n=function(){return{height:(0,w.interpolate)(a.value,[0,1],[0,l.value]),opacity:a.value}}).__closure={interpolate:w.interpolate,visible:a,contentHeight:l},n.__initData=D,n.__workletHash=8409949742507,n),[])),i=(0,w.useAnimatedStyle)(function(){var e=function(){return{transform:[{rotate:(0,w.interpolate)(a.value,[0,1],[270,90])+"deg"}]}};return e.__closure={interpolate:w.interpolate,visible:a},e.__initData=T,e.__workletHash=2526022283159,e}(),[]);return(0,S.jsxs)(O.View,{children:[(0,S.jsx)(H,{}),(0,S.jsxs)(F,{onPress:function(){a.value=(0,w.withTiming)(a.value?0:1)},children:[(0,S.jsx)(J,{children:(0,h.translate)("policy.advanced_filter")}),(0,S.jsx)(N,{style:i,source:h.IC_ARROW})]}),(0,S.jsx)(w.default.View,{style:[o,{overflow:"scroll",justifyContent:"flex-end"}],children:(0,S.jsx)(O.View,{onLayout:function(e){l.value=e.nativeEvent.layout.height},children:t.map((function(e){return(0,S.jsx)(E,Object.assign({type:e},r))}))})})]})})),W=(0,h.styled)(_.MyKeyboardAvoidingView)(a||(a=(0,m.default)(["\n  background-color: ",";\n  margin-top: 8px;\n"])),(function(e){return e.theme.white})),H=h.styled.View(l||(l=(0,m.default)(["\n  height: 8px;\n  background-color: ",";\n  width: 140%;\n  align-self: center;\n"])),(function(e){return e.theme.neutral8})),F=h.styled.TouchableOpacity(o||(o=(0,m.default)(["\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 0;\n"]))),J=h.styled.Text(i||(i=(0,m.default)(["\n  font-size: 16px;\n  line-height: 24px;\n  color: ",";\n  font-family: ",";\n"])),(function(e){return e.theme.neutral1}),h.Fonts.Medium),N=(0,h.styled)(w.default.Image)(s||(s=(0,m.default)(["\n  height: 17px;\n  width: 17px;\n"]))),L={code:"function anonymous(){const{params}=this.__closure;var _params$value;return(_params$value=params.value)===null||_params$value===void 0?void 0:_params$value.collection;}"},Q={code:"function anonymous(_collection,_prevCollection){const{runOnJS,setCollection}=this.__closure;if(_collection!==_prevCollection){runOnJS(setCollection)(_collection);}}"},E=(0,v.memo)((function(e){var t,r,n=e.type,a=e.params,l=e.itemsRef;if("string"!=typeof n)return n(a);var o=(0,v.useMemo)((function(){return"receiver"==n?["recipient"]:"doctype"==n?["document_type"]:-1!==n.indexOf("date")?["from_date","to_date"]:[n]}),[n]);if(-1!==n.indexOf("date"))return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)($,{children:(0,h.translate)("policy."+n)}),(0,S.jsxs)(q,{children:[(0,S.jsx)(_.UIInput.DateTime,{style:{flex:1},mode:"date",title:(0,h.translate)("policy."+o[0]),params:a,keyName:n+"_from"}),(0,S.jsx)(_.UIInput.DateTime,{style:{flex:1,marginLeft:16},mode:"date",title:(0,h.translate)("policy."+o[1]),params:a,keyName:n+"_to"})]})]});if("created_by"==n)return(0,S.jsx)(_.UIInput.UserPicker,{title:(0,h.translate)("policy."+o[0]),params:a,keyName:n,type:"user"});var i,s=(0,g.useStoragesByQuery)("all").map((function(e){var t;return{label:(null==(t=(0,g.getStorages)(e))?void 0:t.name)||(0,h.translate)("policy.undefined"),value:e}})),u=(0,b.useCollectionsByQuery)("all").map((function(e){var t;return{label:(null==(t=(0,b.getCollections)(e))?void 0:t.name)||(0,h.translate)("policy.undefined"),value:e}})),c=(0,h.useUserGroupByQuery)("teams").map((function(e){var t;return{label:(null==(t=(0,h.getUserGroup)(e))?void 0:t.name)||(0,h.translate)("policy.undefined"),value:e}})),d=(0,x.useDoctypesByQuery)("all").map((function(e){var t;return{label:(null==(t=(0,x.getDoctypes)(e))?void 0:t.name)||(0,h.translate)("policy.undefined"),value:e}})),m=(0,v.useState)(""),y=(0,p.default)(m,2),j=y[0],O=y[1];"folder"==n&&(0,w.useAnimatedReaction)(((i=function(){var e;return null==(e=a.value)?void 0:e.collection}).__closure={params:a},i.__initData=L,i.__workletHash=8111418951837,i),function(){var e=function(e,t){e!==t&&(0,w.runOnJS)(O)(e)};return e.__closure={runOnJS:w.runOnJS,setCollection:O},e.__initData=Q,e.__workletHash=4403808879510,e}(),[]);var P=(null==(t=(0,b.useCollections)(j))||null==(r=t.folders)?void 0:r.map((function(e){return{label:(null==e?void 0:e.name)||(0,h.translate)("policy.undefined"),value:null==e?void 0:e.id}})))||[],k=(0,v.useMemo)((function(){return"collection"==n?u:"storage"==n?s:"receiver"==n?c:"doctype"==n?d:"folder"==n?P:"sort"==n?B:"filter"==n?M:[]}),[n,j]),C=(0,v.useMemo)((function(){var e=void 0;return"filter"==n?{label:(0,h.translate)("policy.no_filter"),value:e}:"sort"==n?{label:(0,h.translate)("policy.created_time"),value:e}:{label:(0,h.translate)("policy.all"),value:e}}),[n]);return(0,S.jsx)(_.UIInput.Selector,{ref:function(e){l.current&&(l.current[n]=e)},title:(0,h.translate)("policy."+o[0]),params:a,keyName:n,options:[C].concat((0,f.default)(k)),hideClearButton:!0})})),U=h.styled.View(u||(u=(0,m.default)(["\n  margin: 16px 16px 0 16px;\n"]))),q=h.styled.View(c||(c=(0,m.default)(["\n  flex-direction: row;\n"]))),$=h.styled.Text(d||(d=(0,m.default)(["\n  font-size: 14px;\n  line-height: 20px;\n  font-family: ",";\n  margin-bottom: 4px;\n  margin-top: 12px;\n  color: ",";\n"])),h.Fonts.Regular,(function(e){return e.theme.neutral1}))},24812:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SearchFilter=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=a?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(84481)),a=r(91087),l=r(4007),o=r(47531),i=r(740),s=r(33823);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}t.SearchFilter=(0,n.memo)((function(){var e=(0,l.useNavigationParams)(),t=e.params,r=e.setParams;return(0,s.jsxs)(a.ScreenWrapper,{children:[(0,s.jsx)(a.DynamicHeader,{title:(0,l.translate)("policy.filter")}),(0,s.jsx)(i.FilterComp,{items:["collection","folder","storage","receiver","doctype","created_by","created_date","effective_date","expired_date"],params:t,setParams:r,defaultParams:o.defaultParams})]})}))},47531:function(e,t,r){var n=r(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.defaultParams=t.SearchScreen=void 0;var a,l,o,i,s,u,c=n(r(19452)),d=n(r(27424)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=a?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(n,l,o):n[l]=e[l]}n.default=e,r&&r.set(e,n);return n}(r(84481)),p=r(91087),m=r(4007),y=r(20349),v=r(30975),_=r(96738),h=r(7405),b=r(11269),g=r(44707),x=r(29287),j=r(46763),O=r(33823);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}var S=t.defaultParams={storage:void 0,receiver:void 0,collection:void 0,folder:void 0,doctype:void 0,created_date_from:"",created_date_to:"",effective_date_from:"",effective_date_to:"",expired_date_from:"",expired_date_to:"",q:"",created_by:void 0},P={code:"function anonymous(){const{selectedIds}=this.__closure;return selectedIds.value.length==0;}"},k=(0,f.memo)((function(){var e,t=(0,f.useState)(S),r=(0,d.default)(t,2),n=r[0],a=r[1],l=(0,g.useSelectedItem)(),o=l.selectedState,i=l.selectedIds,s=(0,j.useDerivedValue)(((e=function(){return 0==i.value.length}).__closure={selectedIds:i},e.__initData=P,e.__workletHash=5912787252731,e)),u=(0,f.useCallback)((function(e,t,r){return(0,O.jsx)(h.PoliciesItem,{id:e,isLast:r})}),[]);return(0,O.jsxs)(p.FullScreenWrapper,{isGrey:!0,children:[(0,O.jsx)(C,{children:(0,O.jsxs)(B,{children:[(0,O.jsx)(I,{onPress:m.goBack,children:(0,O.jsx)(V,{source:m.IC_ARROW})}),(0,O.jsx)(A,{children:(0,O.jsx)(p.SearchBar,{containerStyle:{height:40,marginTop:0,marginBottom:0},onSearchTextChange:function(e){a((function(t){return Object.assign({},t,{q:e})}))}})}),(0,O.jsx)(b.FilterIcon,{params:n,onPress:function(){return(0,y.navigateToSearchFilter)({params:n,setParams:a})}})]})}),(0,O.jsxs)(M,{children:[(0,O.jsx)(x.SelectedHeader,{title:(0,m.translate)("policy.search")}),(0,O.jsxs)(p.ScrollableTabView.Provider,{disabledLoadData:o,scrollEnabled:s,params:n,requestFn:v.requestSearchPolicy,query:"search",getItemByQuery:_.getPoliciesByQuery,useItemByQuery:_.usePoliciesByQuery,renderItem:u,tabs:[{title:(0,m.translate)("policy.sent_to_me"),content:function(e){return(0,O.jsx)(p.ScrollableTabView.List,{index:0,tab:"documents"})}},{title:(0,m.translate)("policy.followings"),content:function(e){return(0,O.jsx)(p.ScrollableTabView.List,{index:1,tab:"following"})}},{title:(0,m.translate)("policy.created_by_me"),content:function(e){return(0,O.jsx)(p.ScrollableTabView.List,{index:2,tab:"sent"})}}],children:[(0,O.jsx)(p.ScrollableTabView.TabBar,{}),(0,O.jsx)(p.ScrollableTabView.Content,{})]})]})]})})),C=(t.SearchScreen=(0,f.memo)((function(){return(0,O.jsx)(g.SelectedItemProvider,{children:(0,O.jsx)(k,{})})})),(0,m.styled)(p.EmptyHeader)(a||(a=(0,c.default)(["\n  background-color: ",";\n"])),(function(e){return e.theme.backgroundColor}))),M=m.styled.View(l||(l=(0,c.default)(["\n  background-color: ",";\n  flex: 1;\n"])),(function(e){return e.theme.neutral9})),B=m.styled.View(o||(o=(0,c.default)(["\n  flex-direction: row;\n  padding: 0 16px;\n  align-items: center;\n"]))),I=m.styled.TouchableOpacity.attrs((function(e){return{hitSlop:{top:8,bottom:8,left:8,right:8}}}))(i||(i=(0,c.default)([""]))),V=m.styled.Image(s||(s=(0,c.default)([""]))),A=m.styled.View(u||(u=(0,c.default)(["\n  flex: 1;\n  margin-right: 8px;\n"])))}}]);//# sourceMappingURL=src_screens_SearchScreen_SearchFilter_tsx.chunk.bundle.map?platform=android