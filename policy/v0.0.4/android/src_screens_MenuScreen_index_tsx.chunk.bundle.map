{"version":3,"file":"src_screens_MenuScreen_index_tsx.chunk.bundle","mappings":"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","sources":["webpack:///./src/screens/MenuScreen/index.tsx"],"sourcesContent":["import {\n  LeftModalHeader,\n  ScreenWrapper,\n  UIFlashList,\n  UserAvatar,\n} from '@true/ui';\nimport React, {memo, useCallback, useMemo} from 'react';\nimport {\n  Fonts,\n  IC_SEARCH,\n  stripSpecialCharacters,\n  styled,\n  translate,\n  useMe,\n  useUserGroup,\n  useUserGroupByQuery,\n} from '@true/core';\nimport {Button} from '@policy/components/Button';\nimport {View} from 'react-native';\nimport {useStorages, useStoragesByQuery} from '@policy/store/storages';\nimport {\n  navigateToOneTabPolicyScreen,\n  navigateToSearchScreen,\n} from '@policy/utils';\nimport {\n  requestPolicyBySaved,\n  requestPolicyBySender,\n  requestPolicyByStorage,\n} from '@policy/store/policies/functions';\nimport {Icons} from '@true/asset';\n\ninterface IItemData {\n  id: string | number;\n  type: 'sender' | 'saved' | 'storage';\n}\n\ninterface ISectionData {\n  title: string;\n  id: number;\n  icon: any;\n}\n\nexport const MenuScreen = memo(() => {\n  const me = useMe();\n\n  const renderItem = useCallback(\n    ({item, index}: {item: IItemData; index?: number}) => (\n      <Item data={item} index={index} />\n    ),\n    [],\n  );\n\n  const renderSection = useCallback(\n    ({\n      item,\n      index,\n      toggle,\n    }: {\n      item: ISectionData;\n      toggle: () => void;\n      index: number;\n    }) => <Section data={item} index={index} />,\n    [],\n  );\n\n  const storages = useStoragesByQuery('all');\n  const senders = useUserGroupByQuery('teams');\n\n  const data: ISectionData[] = useMemo(\n    () => [\n      {\n        id: 'section_0',\n        title: translate('policy.storages'),\n        // data: storages.map(id => ({id, type: 'storage'})),\n        icon: Icons.Outlined.DOCUMENT_TEXT,\n      },\n      {\n        id: 'section_1',\n        title: translate('policy.senders'),\n        // data: senders.map(id => ({id, type: 'sender'})),\n        icon: Icons.Outlined.BUILDING_OFFICE_2,\n      },\n      {\n        id: 'section_2',\n        title: translate('policy.saved'),\n        // data: ['expired', 'rejected', 'archived', 'trash'].map(id => ({\n        //   id,\n        //   type: 'saved',\n        // })),\n        icon: Icons.Outlined.SAVE,\n      },\n    ],\n    [storages, senders],\n  );\n\n  const map: Record<string, IItemData[]> = useMemo(\n    () => ({\n      section_0: storages.map(id => ({id, type: 'storage'})),\n      section_1: senders.map(id => ({id, type: 'sender'})),\n      section_2: ['expired', 'rejected', 'archived', 'trash'].map(id => ({\n        id,\n        type: 'saved',\n      })),\n    }),\n    [storages, senders],\n  );\n\n  return (\n    <ScreenWrapper isGrey={true}>\n      <LeftModalHeader\n        hideSeparator={true}\n        title={translate('policy.menu')}\n        rightComponent={\n          <SRow>\n            <Button source={IC_SEARCH} onPress={navigateToSearchScreen} />\n            {/*<Button source={IC_SETTING} style={styles.headerIcon} />*/}\n          </SRow>\n        }\n      />\n      <SUserInfoWrapper>\n        <UserAvatar userKey={me?.id || ''} size={40} />\n        <SUserView>\n          <SUserText>{me?.name}</SUserText>\n          <SUserMailText>{me?.email}</SUserMailText>\n        </SUserView>\n      </SUserInfoWrapper>\n      <UIFlashList\n        data={data}\n        mapKey={'id'}\n        map={map}\n        estimatedItemSize={50}\n        renderItem={renderItem}\n        renderSection={renderSection}\n      />\n    </ScreenWrapper>\n  );\n});\n\nconst SRow = styled.View`\n  flex-direction: row;\n  margin-right: 16px;\n`;\n\nconst SUserInfoWrapper = styled.View`\n  flex-direction: row;\n  padding: 8px 16px;\n  align-items: center;\n  background-color: ${p => p.theme.backgroundColor};\n  border-bottom-width: 1px;\n  border-color: ${p => p.theme.neutral5};\n`;\n\nconst SUserView = styled.View`\n  margin-left: 12px;\n`;\n\nconst SUserText = styled.Text`\n  font-size: 16px;\n  line-height: 24px;\n  font-family: ${Fonts.Regular};\n\n  color: ${p => p.theme.neutral1};\n`;\n\nconst SUserMailText = styled.Text`\n  font-size: 12px;\n  line-height: 16px;\n  font-family: ${Fonts.Regular};\n  color: ${p => p.theme.neutral2};\n`;\n\nconst Section = memo(\n  ({data, index}: {data: {title: string; icon: any}; index?: number}) => {\n    return (\n      <SSectionContainer>\n        <SSectionIcon source={data.icon} />\n        <SSectionText>{data.title}</SSectionText>\n      </SSectionContainer>\n    );\n  },\n);\n\nconst Item = memo(({data, index}: {data: IItemData; index?: number}) => {\n  const render = useCallback((text: string, onPress?: () => void) => {\n    return (\n      <View>\n        <SItemContainer onPress={onPress}>\n          <SItemText>{text}</SItemText>\n        </SItemContainer>\n      </View>\n    );\n  }, []);\n\n  if (data.type === 'sender') {\n    const sender = useUserGroup(data.id);\n\n    return render(stripSpecialCharacters(sender?.name), () => {\n      navigateToOneTabPolicyScreen({\n        params: {id: data.id},\n        query: 'sender',\n        requestFn: requestPolicyBySender,\n        title: sender?.name || '',\n        items: ['collection', 'storage', 'receiver', 'doctype'],\n      });\n    });\n  }\n\n  if (data.type === 'storage') {\n    const storage = useStorages(data.id);\n\n    return render(stripSpecialCharacters(storage?.name), () => {\n      navigateToOneTabPolicyScreen({\n        params: {id: data.id},\n        query: 'storage',\n        requestFn: requestPolicyByStorage,\n        title: storage?.name || '',\n        items: ['collection', 'doctype'],\n      });\n    });\n  }\n\n  const title = useMemo(\n    () =>\n      data.id.toString() === 'trash'\n        ? translate('policy.soft_deleted')\n        : translate('policy.' + data.id.toString()),\n    [data.id],\n  );\n\n  return render(title, () => {\n    navigateToOneTabPolicyScreen({\n      params: {tail: data.id},\n      query: 'saved',\n      requestFn: requestPolicyBySaved,\n      title: title,\n      items: ['collection', 'storage', 'receiver', 'doctype'],\n      mainKey: 'tail',\n    });\n  });\n});\n\nconst SSectionContainer = styled.View`\n  flex-direction: row;\n  align-items: center;\n  padding: 12px 16px;\n  background-color: ${p => p.theme.backgroundColor};\n  margin-top: 8px;\n`;\nconst SSectionText = styled.Text`\n  color: ${p => p.theme.neutral1};\n  font-size: 16px;\n  line-height: 24px;\n  font-family: ${Fonts.Medium};\n`;\nconst SSectionIcon = styled.Image`\n  margin-right: 8px;\n  height: 24px;\n  width: 24px;\n`;\n\nconst SItemContainer = styled.TouchableOpacity`\n  padding: 16px;\n  background-color: ${p => p.theme.backgroundColor};\n`;\nconst SItemText = styled.Text`\n  color: ${p => p.theme.neutral1};\n`;\n"],"names":["_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_templateObject9","_templateObject10","_ui","require","_react","obj","nodeInterop","__esModule","default","cache","_getRequireWildcardCache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_interopRequireWildcard","_core","_Button","_reactNative","_storages","_utils","_functions","_asset","_jsxRuntime","WeakMap","cacheBabelInterop","cacheNodeInterop","exports","memo","me","useMe","renderItem","useCallback","_ref","item","index","jsx","Item","data","renderSection","_ref2","toggle","Section","storages","useStoragesByQuery","senders","useUserGroupByQuery","useMemo","id","title","translate","icon","Icons","Outlined","DOCUMENT_TEXT","BUILDING_OFFICE_2","SAVE","map","section_0","type","section_1","section_2","jsxs","ScreenWrapper","isGrey","children","LeftModalHeader","hideSeparator","rightComponent","SRow","Button","source","IC_SEARCH","onPress","navigateToSearchScreen","SUserInfoWrapper","UserAvatar","userKey","size","SUserView","SUserText","name","SUserMailText","email","UIFlashList","mapKey","estimatedItemSize","styled","View","_taggedTemplateLiteralLoose2","p","theme","backgroundColor","neutral5","Text","Fonts","Regular","neutral1","neutral2","_ref3","SSectionContainer","SSectionIcon","SSectionText","_ref4","render","text","SItemContainer","SItemText","sender","useUserGroup","stripSpecialCharacters","navigateToOneTabPolicyScreen","params","query","requestFn","requestPolicyBySender","items","storage","useStorages","requestPolicyByStorage","toString","tail","requestPolicyBySaved","mainKey","Medium","Image","TouchableOpacity"],"sourceRoot":""}