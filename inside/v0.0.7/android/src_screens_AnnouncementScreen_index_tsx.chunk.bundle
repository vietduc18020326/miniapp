(self.webpackChunkInside=self.webpackChunkInside||[]).push([["src_screens_AnnouncementScreen_index_tsx"],{79384:function(e,n,t){var r=t(64836);Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementThumbnail=void 0;var u,a,o,i,l,s,c,d,f=r(t(19452)),m=t(4007),p=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_(n);if(t&&t.has(e))return t.get(e);var r={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=u?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(t(84481)),h=t(25736),y=t(42755),x=t(48764),b=t(73781),g=t(91087),j=t(20349),v=t(92571),A=r(t(30381)),O=t(60301),w=t(25277),C=t(33823);function _(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(_=function(e){return e?t:n})(e)}n.AnnouncementThumbnail=(0,p.memo)((function(e){var n,t,r=e.id,u=(0,y.useAnnouncements)(r),a=(0,b.getChannels)((null==u?void 0:u.channel_id)||0),o=(0,p.useMemo)((function(){var e=x.Buffer.from((null==u?void 0:u.image)||"","base64").toString("utf-8");if(e){var n=JSON.parse(e);if(n&&n.image)return n}return null}),[null==u?void 0:u.image]),i=(0,p.useCallback)((function(){(0,j.navigateToDetailPostScreen)({id:r||0})}),[r]);return(0,C.jsxs)(S,{onPress:i,children:[(0,C.jsx)(T,{children:(0,C.jsx)(k,{source:{uri:(null==o?void 0:o.image)||""},resizeMode:"cover"})}),(0,C.jsxs)(P,{children:[(0,C.jsx)(g.UIText.HeaderSmall,{numberOfLines:2,children:null==u?void 0:u.name}),(0,C.jsxs)(I,{style:O.globalStyles.mt4,children:[(0,C.jsx)(M,{source:w.Icons.Filled.GLOBAL}),(0,C.jsx)(q,{numberOfLines:1,children:null==a?void 0:a.name})]}),(0,C.jsxs)(I,{children:[(0,C.jsx)(M,{source:w.Icons.Filled.USER}),(0,C.jsx)(q,{numberOfLines:1,children:null==a?void 0:a.name})]}),(0,C.jsxs)(I,{children:[(0,C.jsx)(M,{source:w.Icons.Filled.CLOCK}),(0,C.jsx)(q,{numberOfLines:1,children:(0,A.default)(1e3*(null==u?void 0:u.since)).format("HH:mm DD/MM/YYYY")}),null!=u&&u.seens&&(null==u||null==(n=u.seens)?void 0:n.length)>0?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(h.STextDivider,{children:" | "}),(0,C.jsxs)(F,{children:["Seen by "+(null==u||null==(t=u.seens)?void 0:t.length)," "]})]}):null]})]})]})}));var S=(0,m.styled)(v.Pressable)(u||(u=(0,f.default)(["\n  flex-direction: row;\n  padding: 16px;\n  background-color: white;\n  border-bottom-width: 1px;\n  border-bottom-color: ",";\n"])),(function(e){return e.theme.neutral6})),P=m.styled.View(a||(a=(0,f.default)(["\n  flex: 3;\n"]))),T=m.styled.View(o||(o=(0,f.default)(["\n  display: flex;\n  flex: 2;\n  margin-right: 12px;\n  background-color: ",";\n  border-radius: 8px;\n"])),(function(e){return e.theme.neutral7})),k=m.styled.Image(i||(i=(0,f.default)(["\n  height: 100%;\n  width: 100%;\n  max-height: 100px;\n  border-radius: 8px;\n"]))),q=(0,m.styled)(g.UIText.CaptionMedium400)(l||(l=(0,f.default)(["\n  color: ",";\n"])),(function(e){return e.theme.neutral2})),F=(0,m.styled)(q)(s||(s=(0,f.default)(["\n  color: #05944f;\n"]))),I=(0,m.styled)(h.FlexCenter)(c||(c=(0,f.default)(["\n  margin-bottom: 8px;\n"]))),M=m.styled.Image(d||(d=(0,f.default)(["\n  width: 16px;\n  height: 16px;\n  tint-color: ",";\n  margin-right: 4px;\n"])),(function(e){return e.theme.neutral2}))},56793:function(e,n,t){var r=t(64836);Object.defineProperty(n,"__esModule",{value:!0}),n.FilterAnnouncement=void 0;var u,a,o,i,l,s=r(t(19452)),c=t(84481),d=t(25736),f=t(4007),m=t(60301),p=t(92571),h=t(25277),y=t(33823),x=(n.FilterAnnouncement=(0,c.memo)((function(){return(0,y.jsx)(x,{children:(0,y.jsxs)(d.FlexSpaceBetween,{children:[(0,y.jsxs)(g,{children:[(0,y.jsx)(b,{style:m.globalStyles.mr4,children:"All channels"}),(0,y.jsx)(j,{source:h.Icons.Outlined.CHEVRON_LEFT})]}),(0,y.jsx)(v,{children:(0,y.jsx)(p.Image,{source:h.Icons.Outlined.MAGNIFYING_GLASS})})]})})})),f.styled.View(u||(u=(0,s.default)(["\n  background-color: white;\n  padding: 12px 16px;\n"])))),b=f.styled.Text(a||(a=(0,s.default)(["\n  font-family: ",";\n\n  font-weight: 700;\n  font-size: 16px;\n  color: #242424;\n"])),f.Fonts.Regular),g=f.styled.TouchableOpacity(o||(o=(0,s.default)(["\n  flex-direction: row;\n  align-items: center;\n"]))),j=f.styled.Image(i||(i=(0,s.default)(["\n  width: 8px;\n  height: 8px;\n  transform: rotate(90deg);\n"]))),v=f.styled.TouchableOpacity(l||(l=(0,s.default)(["\n  width: 24px;\n  height: 24px;\n  align-items: center;\n  justify-content: center;\n"])))},27278:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0}),n.AnnouncementScreen=void 0;var r=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f(n);if(t&&t.has(e))return t.get(e);var r={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=u?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}(t(84481)),u=t(55766),a=t(20349),o=t(91087),i=t(79384),l=t(59824),s=t(42755),c=t(56793),d=t(33823);function f(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(f=function(e){return e?t:n})(e)}n.AnnouncementScreen=(0,r.memo)((function(){var e=(0,r.useCallback)((function(e,n,t){return(0,d.jsx)(i.AnnouncementThumbnail,{id:e},n)}),[]),n=(0,r.useCallback)((function(){(0,a.navigateToCreatePostScreen)({type:"announcement"})}),[]);return(0,d.jsxs)(o.ScreenWrapper,{isGrey:!0,children:[(0,d.jsx)(u.CustomHeader,{title:"Announcements",isSearch:!1,isBack:!0,onCreate:n}),(0,d.jsxs)(o.ScrollableTabView.Provider,{params:{},renderItem:e,getItemByQuery:s.getAnnouncementsByQuery,useItemByQuery:s.useAnnouncementsByQuery,tabs:[{title:"All",content:function(e){return(0,d.jsx)(o.ScrollableTabView.List,{index:e.index,ListHeaderComponent:(0,d.jsx)(c.FilterAnnouncement,{}),requestFn:l.requestAllAnnouncements})}},{title:"Created by me",content:function(e){return(0,d.jsx)(o.ScrollableTabView.List,{index:e.index,ListHeaderComponent:(0,d.jsx)(c.FilterAnnouncement,{}),requestFn:l.requestCreatedAnnouncements,query:"created"})}}],children:[(0,d.jsx)(o.ScrollableTabView.TabBar,{}),(0,d.jsx)(o.ScrollableTabView.Content,{})]})]})}))},59824:function(e,n,t){var r=t(64836);Object.defineProperty(n,"__esModule",{value:!0}),n.requestCreatedAnnouncementsChannel=n.requestCreatedAnnouncements=n.requestAnnouncementsChannel=n.requestAllAnnouncements=void 0;var u,a,o,i,l=r(t(38416)),s=r(t(17156)),c=t(4007),d=t(30806),f=t(42755);n.requestAllAnnouncements=(u=(0,s.default)((function*(){var e=(yield c.Fetch.postWithToken("@"+c.Core.systemPath+"/inside/ajax/api/announcement/gets")).data;return(0,d.batch)((function(){e.anns.length&&((0,f.syncAnnouncements)(e.anns),(0,f.setAnnouncementsQuery)((function(n){return Object.assign({},n,(0,l.default)({},"all",e.anns.map((function(e){return e.id.toString()}))))})))})),e.anns})),function(){return u.apply(this,arguments)}),n.requestCreatedAnnouncements=(a=(0,s.default)((function*(){var e=(yield c.Fetch.postWithToken("@"+c.Core.systemPath+"/inside/ajax/api/announcement/gets?created=mine")).data;return(0,d.batch)((function(){e.anns.length&&((0,f.syncAnnouncements)(e.anns),(0,f.setAnnouncementsQuery)((function(n){return Object.assign({},n,(0,l.default)({},"created",e.anns.map((function(e){return e.id.toString()}))))})))})),e.anns})),function(){return a.apply(this,arguments)}),n.requestAnnouncementsChannel=(o=(0,s.default)((function*(e){console.log("params",e);var n=(yield c.Fetch.postWithToken("@"+c.Core.systemPath+"/inside/ajax/api/channel/update/announcement?path="+e.path+(null!=e&&e.q?"&q="+e.q:""))).data;return(0,d.batch)((function(){n.announcements.length&&((0,f.syncAnnouncements)(n.announcements),(0,f.setAnnouncementsQuery)((function(t){return Object.assign({},t,(0,l.default)({},e.path,n.announcements.map((function(e){return e.id.toString()}))))})))})),n.announcements})),function(e){return o.apply(this,arguments)}),n.requestCreatedAnnouncementsChannel=(i=(0,s.default)((function*(e){var n=(yield c.Fetch.postWithToken("@"+c.Core.systemPath+"/inside/ajax/api/channel/update/announcement?created=mine&path="+e.path+(null!=e&&e.q?"&q="+e.q:""))).data;return(0,d.batch)((function(){n.announcements.length&&(0,f.setAnnouncementsQuery)((function(t){return Object.assign({},t,(0,l.default)({},"created_"+e.path,n.announcements.map((function(e){return e.id.toString()}))))}))})),n.announcements})),function(e){return i.apply(this,arguments)})}}]);//# sourceMappingURL=src_screens_AnnouncementScreen_index_tsx.chunk.bundle.map?platform=android