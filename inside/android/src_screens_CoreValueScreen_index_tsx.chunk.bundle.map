{"version":3,"file":"src_screens_CoreValueScreen_index_tsx.chunk.bundle","mappings":"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","sources":["webpack:///./src/screens/CoreValueScreen/CoreValueThumbnail.tsx","webpack:///./src/screens/CoreValueScreen/index.tsx","webpack:///./src/store/corevalues/function.ts"],"sourcesContent":["import {memo, useCallback} from 'react';\nimport {useCoreValues} from '@/store/corevalues';\nimport {styled, useTheme} from '@true/core';\nimport {Fonts} from '@true/core';\nimport {HTMLRenderer} from '@true/ui';\nimport {formatPlainText, navigateToDetailPostScreen} from '@/utils';\nimport {Dimensions, Text, View} from 'react-native';\nimport {SvgXml} from 'react-native-svg';\nimport {SvgIcon} from '@/utils/Svgts';\nimport SeeMore from '@/components/Text/SeeMore';\n\ninterface CoreValueThumbnailProps {\n  id: number;\n  index: number;\n}\n\nexport const CoreValueThumbnail = memo(function (\n  props: CoreValueThumbnailProps,\n) {\n  const {id, index} = props;\n  const data = useCoreValues(id);\n  const theme = useTheme();\n  const onNavigateToDetail = useCallback(() => {\n    navigateToDetailPostScreen({\n      id: data?.update_id || 0,\n      user_id: data?.user_id || 0,\n      time: data?.since || 0,\n      hid: data?.hid || '',\n    });\n  }, []);\n  return (\n    <SContainer onPress={onNavigateToDetail}>\n      <SImageBackground backgroundColor={data?.icon.split(' ')[1]} />\n      <SStyleSvg backgroundColor={data?.icon.split(' ')[1]}>\n        <SvgXml\n          // @ts-ignore\n          xml={SvgIcon[data?.icon.split(' ')[0] || 'icon_home']}\n          width={24}\n          height={24}\n          fill={'#FFFFFF'}\n        />\n      </SStyleSvg>\n      <STitle>{`0${index}. ${data?.name}`}</STitle>\n      <View\n        style={{\n          overflow: 'hidden',\n          paddingTop: 4,\n        }}>\n        <SeeMore\n          id={'corevalue' + id.toString()}\n          numberOfLines={4}\n          style={{fontSize: 14, lineHeight: 20, color: theme.neutral1}}\n          linkStyle={{fontSize: 14, lineHeight: 20}}>\n          {formatPlainText(data?.content || '')}\n        </SeeMore>\n      </View>\n    </SContainer>\n  );\n});\n\nconst margin = 12;\nconst widthScreen = Dimensions.get('window').width;\nconst width = widthScreen / 2 - margin * 2;\n\nconst SContainer = styled.TouchableOpacity`\n  width: ${width}px;\n  height: ${width * 1.2}px;\n  border-radius: 8px;\n  padding: 12px;\n  margin-top: 12px;\n`;\nconst STitle = styled.Text`\n  font-family: ${Fonts.Regular};\n\n  font-weight: 700;\n  font-size: 20px;\n  line-height: 28px;\n  color: #242424;\n`;\nconst SImageBackground = styled.View<{backgroundColor?: string}>`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: ${p => p.backgroundColor || '#2A91D6'};\n  opacity: 0.1;\n  border-radius: 8px;\n`;\nconst SStyleSvg = styled.View<{backgroundColor?: string}>`\n  width: 36px;\n  height: 36px;\n  align-items: center;\n  justify-content: center;\n  border-radius: 8px;\n  background-color: ${p => p.backgroundColor || '#7A8DED'};\n  margin-bottom: 8px;\n`;\n","import {memo, useCallback, useEffect} from 'react';\nimport {ActivityIndicator} from 'react-native';\nimport {styled, useAsyncFn, useMe} from '@true/core';\nimport {FlashList} from '@shopify/flash-list';\nimport {ScreenWrapper} from '@true/ui';\nimport {requestCoreValues} from '@/store/corevalues/function';\nimport {CoreValueThumbnail} from '@/screens/CoreValueScreen/CoreValueThumbnail';\nimport {useCoreValuesByQuery} from '@/store/corevalues';\nimport {CustomHeader} from '@/components/CustomHeader';\nimport {navigateToCreateCoreValueScreen} from '@/utils';\nimport {EUserRole} from '@/utils/helper';\n\nexport const CoreValueScreen = memo(function () {\n  const listCoreValues = useCoreValuesByQuery('all');\n  const me = useMe();\n  const renderItem = useCallback(({item, index}: any) => {\n    return <CoreValueThumbnail id={item} index={index + 1} />;\n  }, []);\n\n  const [{loading}, refreshLetter] = useAsyncFn(async () => {\n    await requestCoreValues();\n    return;\n  }, []);\n\n  const onCreate = useCallback(() => {\n    if (me && Number(me?.role) === EUserRole.ADMIN) {\n      navigateToCreateCoreValueScreen({\n        id: -1,\n      });\n    }\n    return null;\n  }, [me]);\n\n  useEffect(() => {\n    requestCoreValues().then();\n  }, []);\n\n  return (\n    <ScreenWrapper>\n      <CustomHeader\n        isBack\n        title={'Board letters'}\n        onCreate={onCreate}\n        isSearch={false}\n        isDivider\n      />\n      <SContainer>\n        <SFlashList\n          data={listCoreValues}\n          renderItem={renderItem}\n          numColumns={2}\n          keyExtractor={keyExtractor}\n          refreshing={loading}\n          onRefresh={refreshLetter}\n          onEndReachedThreshold={1}\n          removeClippedSubviews={true}\n          // ListHeaderComponent={renderHeader}\n          ListEmptyComponent={<ActivityIndicator />}\n        />\n      </SContainer>\n    </ScreenWrapper>\n  );\n});\n\nconst SFlashList = styled(FlashList)`\n  flex: 1;\n`;\nconst keyExtractor = (item: any) => item;\nconst SContainer = styled.View`\n  flex: 1;\n  background-color: white;\n  padding-left: 20px;\n`;\nexport default CoreValueScreen;\n","import { Core, Fetch } from \"@true/core\";\nimport { batch } from \"react-redux\";\nimport { ICoreValue, ICreateCoreValue } from \"@/store/corevalues/type\";\nimport { setCoreValuesQuery, syncCoreValues } from \"@/store/corevalues/index\";\n\nexport const requestCoreValues = async () => {\n  const { data } = await Fetch.postWithToken<{\n    core_values: ICoreValue[];\n  }>(`@${Core.systemPath}/inside/ajax/api/company/corevalue/gets`);\n\n  batch(() => {\n    if (data[\"core_values\"].length) {\n      syncCoreValues(data.core_values);\n      setCoreValuesQuery(prev => ({\n        ...prev,\n        [\"all\"]: data[\"core_values\"].map(item => item.id.toString())\n      }));\n    }\n  });\n  return data[\"core_values\"];\n};\nexport const requestCoreValueId = async (params: {\n  corevalue_id: string | number;\n}) => {\n  const { data } = await Fetch.postWithToken<{\n    cv: ICoreValue;\n  }>(\n    `@${Core.systemPath}/inside/ajax/api/company/corevalue/get?corevalue_id=${params.corevalue_id}`\n  );\n\n  batch(() => {\n    if (data.cv) {\n      syncCoreValues([data.cv]);\n    }\n  });\n  return data.cv;\n};\nexport const requestCreateCoreValues = async (params: ICreateCoreValue) => {\n  const { data } = await Fetch.postWithToken(\n    `@${Core.systemPath}/inside/ajax/api/company/corevalue/create`,\n    params\n  );\n  // batch(() => {\n  //   // syncLetters([data.event]);\n  //   set(prev => ({\n  //     ...prev,\n  //     ['all']: [data.event.id, ...prev.all],\n  //   }));\n  // });\n};\n\nexport const requestEditCoreValues = async (params: ICreateCoreValue) => {\n  const { data } = await Fetch.postWithToken(\n    `@${Core.systemPath}/inside/ajax/api/company/corevalue/edit`,\n    params\n  );\n  // batch(() => {\n  //   if (data.event) {\n  //     syncEvents([data.event]);\n  //   }\n  // });\n};\n"],"names":["_templateObject","_templateObject2","_templateObject3","_templateObject4","_react","require","_corevalues","_core","_utils","_reactNative","_reactNativeSvg","_Svgts","_SeeMore","_interopRequireDefault","_jsxRuntime","width","exports","memo","props","id","index","data","useCoreValues","theme","useTheme","onNavigateToDetail","useCallback","navigateToDetailPostScreen","update_id","user_id","time","since","hid","jsxs","SContainer","onPress","children","jsx","SImageBackground","backgroundColor","icon","split","SStyleSvg","SvgXml","xml","SvgIcon","height","fill","STitle","name","View","style","overflow","paddingTop","default","toString","numberOfLines","fontSize","lineHeight","color","neutral1","linkStyle","formatPlainText","content","Dimensions","get","margin","styled","TouchableOpacity","_taggedTemplateLiteralLoose2","Text","Fonts","Regular","p","_flashList","_ui","_function","_CoreValueThumbnail","_CustomHeader","_helper","CoreValueScreen","listCoreValues","useCoreValuesByQuery","me","useMe","renderItem","_ref","item","CoreValueThumbnail","_useAsyncFn","useAsyncFn","_asyncToGenerator2","requestCoreValues","_useAsyncFn2","_slicedToArray2","loading","refreshLetter","onCreate","Number","role","EUserRole","ADMIN","navigateToCreateCoreValueScreen","useEffect","then","ScreenWrapper","CustomHeader","isBack","title","isSearch","isDivider","SFlashList","numColumns","keyExtractor","refreshing","onRefresh","onEndReachedThreshold","removeClippedSubviews","ListEmptyComponent","ActivityIndicator","FlashList","_ref2","_ref3","_ref4","_reactRedux","_index","Fetch","postWithToken","Core","systemPath","batch","length","syncCoreValues","core_values","setCoreValuesQuery","prev","Object","assign","_defineProperty2","map","apply","arguments","params","corevalue_id","cv","_x","_x2","_x3"],"sourceRoot":""}