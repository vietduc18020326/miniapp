(self.webpackChunkInside=self.webpackChunkInside||[]).push([["src_screens_CreatePollScreen_index_tsx"],{98317:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatedCollapseItem=void 0;var r,i=a(n(19452)),o=n(84481),l=a(n(95194)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(a,i,o):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(46763)),s=n(4007),c=n(91087),d=n(33823);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}var h={code:"function anonymous({nativeEvent:{layout:{height:_height}}}){const{height}=this.__closure;height.value=_height;}"},p={code:"function anonymous(){const{height}=this.__closure;return{height:height.value,overflow:'scroll',width:'100%'};}"},v={code:"function anonymous(){const{height,isRemoved}=this.__closure;return{_height:height.value,_isRemoved:isRemoved.value};}"},m={code:"function anonymous(cur,prev){const{runOnJS,onRemove}=this.__closure;if(cur._isRemoved){runOnJS(onRemove)(cur._height);}}"},_={code:"function anonymous(){const{isRemoved,height,withDelay,withTiming}=this.__closure;isRemoved.value=true;height.value=withDelay(500,withTiming(0,{duration:500}));}"},g=(t.AnimatedCollapseItem=(0,s.memoForwardRef)((function(e,t){var n,a=e.children,r=e.contentStyle,i=e.onRemoveItem,l=(0,u.useSharedValue)(0),f=(0,u.useSharedValue)(!1),y=(0,u.useWorkletCallback)(((n=function(e){var t=e.nativeEvent.layout.height;l.value=t}).__closure={height:l},n.__initData=h,n.__workletHash=0xe0a2fdc6a7a,n),[l]),w=(0,o.useCallback)((function(e){(0,c.toBoolean)(e)||(0,s.interactManager)(i,100)}),[i]),b=(0,u.useAnimatedStyle)(function(){var e=function(){return{height:l.value,overflow:"scroll",width:"100%"}};return e.__closure={height:l},e.__initData=p,e.__workletHash=1112699002297,e}(),[l]);(0,u.useAnimatedReaction)(function(){var e=function(){return{_height:l.value,_isRemoved:f.value}};return e.__closure={height:l,isRemoved:f},e.__initData=v,e.__workletHash=5708069767645,e}(),function(){var e=function(e,t){e._isRemoved&&(0,u.runOnJS)(w)(e._height)};return e.__closure={runOnJS:u.runOnJS,onRemove:w},e.__initData=m,e.__workletHash=7981997842796,e}(),[l]);var x=(0,u.useWorkletCallback)(function(){var e=function(){f.value=!0,l.value=(0,u.withDelay)(500,(0,u.withTiming)(0,{duration:500}))};return e.__closure={isRemoved:f,height:l,withDelay:u.withDelay,withTiming:u.withTiming},e.__initData=_,e.__workletHash=0xb1ef66cf8a5,e}(),[]);return(0,o.useImperativeHandle)(t,(function(){return{remove:x}})),(0,d.jsx)(g,{style:b,children:(0,d.jsx)(u.default.View,{style:r,onLayout:y,children:a})})})),(0,l.default)(u.default.View)(r||(r=(0,i.default)(["\n  //padding: 12px 16px;\n"]))))},25137:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatedCollapseList=void 0;var r,i,o=a(n(19452)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(a,i,o):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(46763)),u=a(n(95194)),s=n(4007),c=n(33823);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}var f={code:"function anonymous({nativeEvent:{layout:{height:_height}}}){const{contentHeight,props}=this.__closure;contentHeight.value=_height;if(props.height){props.height.value=_height;}}"},h={code:"function anonymous(){const{contentHeight}=this.__closure;return{value:contentHeight.value};}"},p={code:"function anonymous(cur,prev){const{animatedHeight,withTiming}=this.__closure;if(!(prev!==null&&prev!==void 0&&prev.value)&&cur.value){animatedHeight.value=cur.value;return;}if(prev&&cur.value!==(prev===null||prev===void 0?void 0:prev.value)){animatedHeight.value=withTiming(cur.value,{duration:500});}}"},v={code:"function anonymous(){const{type,animatedHeight}=this.__closure;if(type&&type==='height'){return{height:animatedHeight.value};}return{maxHeight:animatedHeight.value};}"},m={code:"function anonymous(){const{_animatedHeight}=this.__closure;return{..._animatedHeight.value,overflow:'scroll'};}"},_=(t.AnimatedCollapseList=(0,s.memoForwardRef)((function(e,t){var n,a=(0,l.useSharedValue)(0),r=(0,l.useSharedValue)(0),i=e.type,o=(0,l.useWorkletCallback)(((n=function(t){var n=t.nativeEvent.layout.height;a.value=n,e.height&&(e.height.value=n)}).__closure={contentHeight:a,props:e},n.__initData=f,n.__workletHash=0xc43cb51fa93,n),[a]);(0,l.useAnimatedReaction)(function(){var e=function(){return{value:a.value}};return e.__closure={contentHeight:a},e.__initData=h,e.__workletHash=0xbd513c4332e,e}(),function(){var e=function(e,t){null!=t&&t.value||!e.value?t&&e.value!==(null==t?void 0:t.value)&&(r.value=(0,l.withTiming)(e.value,{duration:500})):r.value=e.value};return e.__closure={animatedHeight:r,withTiming:l.withTiming},e.__initData=p,e.__workletHash=0xb7a79815c63,e}(),[a]);var u=(0,l.useDerivedValue)(function(){var e=function(){return i&&"height"===i?{height:r.value}:{maxHeight:r.value}};return e.__closure={type:i,animatedHeight:r},e.__initData=v,e.__workletHash=9707989539303,e}(),[i,r]),s=(0,l.useAnimatedStyle)(function(){var e=function(){return Object.assign({},u.value,{overflow:"scroll"})};return e.__closure={_animatedHeight:u},e.__initData=m,e.__workletHash=9732393610198,e}(),[r,u]);return(0,c.jsx)(_,{children:(0,c.jsx)(g,{style:[{overflow:"scroll"},s],children:(0,c.jsx)(l.default.View,{style:e.contentStyle,onLayout:o,children:e.children})})})})),(0,u.default)(l.default.View)(r||(r=(0,o.default)(["\n  //padding: 12px 16px;\n"])))),g=(0,u.default)(l.default.View)(i||(i=(0,o.default)([""])))},77556:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatedCollapseWrapper=void 0;var r,i,o=a(n(19452)),l=n(4007),u=f(n(84481)),s=f(n(46763)),c=n(33823);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(a,i,o):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}var h={code:"function anonymous(){const{visible}=this.__closure;if(visible.value==1){visible.value=0;return;}else{visible.value=1;}}"},p={code:"function anonymous(){const{visible,contentHeight}=this.__closure;return{_visible:visible.value,_contentHeight:contentHeight.value};}"},v={code:"function anonymous(cur,prev){const{animatedHeight,withTiming}=this.__closure;if((prev===null||prev===void 0?void 0:prev._contentHeight)==0){animatedHeight.value=0;return;}if(cur._visible==1){animatedHeight.value=withTiming(cur._contentHeight,{duration:200});}else{animatedHeight.value=withTiming(0,{duration:200});}}"},m={code:"function anonymous(){const{animatedHeight,interpolate,contentHeight}=this.__closure;return{height:animatedHeight.value,opacity:interpolate(animatedHeight.value,[0,contentHeight.value],[0,1])};}"},_={code:"function anonymous(e){const{contentHeight}=this.__closure;contentHeight.value=e.nativeEvent.layout.height;}"},g=(t.AnimatedCollapseWrapper=(0,l.memoForwardRef)((function(e,t){var n,a=(0,s.useSharedValue)(0),r=(0,s.useSharedValue)(0),i=(0,s.useSharedValue)(0),o=(0,s.useWorkletCallback)(((n=function(){1!=a.value?a.value=1:a.value=0}).__closure={visible:a},n.__initData=h,n.__workletHash=0xc0e3fdf7338,n),[a]),l=(0,u.useCallback)((function(e){console.log(e),a.value=e}),[a]);(0,u.useImperativeHandle)(t,(function(){return{toggle:o,press:l}})),(0,s.useAnimatedReaction)(function(){var e=function(){return{_visible:a.value,_contentHeight:i.value}};return e.__closure={visible:a,contentHeight:i},e.__initData=p,e.__workletHash=227105931522,e}(),function(){var e=function(e,t){0!=(null==t?void 0:t._contentHeight)?1==e._visible?r.value=(0,s.withTiming)(e._contentHeight,{duration:200}):r.value=(0,s.withTiming)(0,{duration:200}):r.value=0};return e.__closure={animatedHeight:r,withTiming:s.withTiming},e.__initData=v,e.__workletHash=4902463581841,e}());var d=(0,s.useAnimatedStyle)(function(){var e=function(){return{height:r.value,opacity:(0,s.interpolate)(r.value,[0,i.value],[0,1])}};return e.__closure={animatedHeight:r,interpolate:s.interpolate,contentHeight:i},e.__initData=m,e.__workletHash=1505093327717,e}()),f=(0,s.useWorkletCallback)(function(){var e=function(e){i.value=e.nativeEvent.layout.height};return e.__closure={contentHeight:i},e.__initData=_,e.__workletHash=0xf0f72b63548,e}(),[]);return(0,c.jsx)(g,{children:(0,c.jsx)(y,{style:[{overflow:"scroll"},d],children:(0,c.jsx)(s.default.View,{style:e.contentStyle,onLayout:f,children:e.children})})})})),(0,l.styled)(s.default.View)(r||(r=(0,o.default)(["\n  //padding: 12px 16px;\n"])))),y=(0,l.styled)(s.default.View)(i||(i=(0,o.default)([""])))},92551:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarWithSelectChannel=void 0;var r,i,o,l,u=a(n(19452)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(a,i,o):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(84481)),c=n(4007),d=n(25277),f=n(91087),h=n(46763),p=n(33823);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}var m={code:"function anonymous(){const{widthButton}=this.__closure;return{width:widthButton.value};}"},_={code:"function anonymous(e){const{widthButton}=this.__closure;widthButton.value=e.nativeEvent.layout.width;}"},g=(t.AvatarWithSelectChannel=(0,s.memo)((function(e){var t,n=e.bottomSheetRef,a=e.label,r=e.typePost,i=(0,c.useMe)(),o=(0,h.useSharedValue)(200),l=(0,h.useAnimatedStyle)(((t=function(){return{width:o.value}}).__closure={widthButton:o},t.__initData=m,t.__workletHash=8674385749251,t),[]),u=(0,h.useWorkletCallback)(function(){var e=function(e){o.value=e.nativeEvent.layout.width};return e.__closure={widthButton:o},e.__initData=_,e.__workletHash=0xcd259325f91,e}(),[o]);return(0,p.jsxs)(g,{children:[(0,p.jsx)(f.Avatar,{size:48,userKey:(null==i?void 0:i.id)||"0",disableClick:!0}),(0,p.jsxs)(y,{children:[(0,p.jsxs)(f.UIText.BodyMedium500,{onLayout:u,children:[null==i?void 0:i.name," create ",r]}),(0,p.jsx)(w,{style:l,title:a||"Select channel",onPress:function(){var e;null==(e=n.current)||e.present()},children:(0,p.jsx)(b,{source:d.IC_OUTLINED_EXPAND_MORE})})]})]})})),c.styled.View(r||(r=(0,u.default)(["\n  flex-direction: row;\n  align-items: center;\n  gap: 12px;\n"])))),y=c.styled.View(i||(i=(0,u.default)(["\n  justify-content: center;\n  gap: 4px;\n"]))),w=(0,c.styled)(f.UIButton).attrs((function(e){return{textStyle:Object.assign({},f.UITextStyle.body_medium_400,{color:e.theme.neutral2,width:"85%"}),textProps:{numberOfLines:1}}}))(o||(o=(0,u.default)(["\n  flex-direction: row;\n  border-radius: 40px;\n  border-width: 1px;\n  border-color: ",";\n  justify-content: space-between;\n  align-items: center;\n  height: 32px;\n  padding-left: 16px;\n  padding-right: 8px;\n"])),(function(e){return e.theme.neutral5})),b=c.styled.Image(l||(l=(0,u.default)(["\n  width: 24px;\n  height: 24px;\n  tint-color: ",";\n"])),(function(e){return e.theme.neutral2}))},6932:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.UICheckBoxCollapse=void 0;var r,i,o,l=a(n(19452)),u=a(n(38416)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(a,i,o):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(84481)),c=n(46763),d=n(4007),f=n(47800),h=n(91087),p=n(77556),v=n(92571),m=n(33823);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}var g={code:"function anonymous(){const{params,keyNameCheckbox}=this.__closure;return params.value[keyNameCheckbox];}"},y=(t.UICheckBoxCollapse=(0,s.memo)((function(e){var t,n=e.params,a=e.keyNameCheckbox,r=e.childComponent,i=e.title,o=(0,s.useRef)(null),l=(0,d.useMounted)(300),h=(0,c.useDerivedValue)(((t=function(){return n.value[a]}).__closure={params:n,keyNameCheckbox:a},t.__initData=g,t.__workletHash=4630928280947,t),[a]);(0,s.useEffect)((function(){var e;l&&(null==o||null==(e=o.current)||null==e.press||e.press(n.value[a]||0))}),[l]);var _=(0,s.useCallback)((function(){var e,t=h.value?0:1;null==o||null==(e=o.current)||null==e.press||e.press(t),n.value=Object.assign({},n.value,(0,u.default)({},a,t))}),[a]);return(0,m.jsxs)(b,{children:[(0,m.jsxs)(y,{onPress:_,children:[(0,m.jsx)(f.UICheckbox,{value:h}),(0,m.jsx)(w,{children:i})]}),(0,m.jsx)(p.AnimatedCollapseWrapper,{ref:o,children:(0,m.jsx)(v.View,{style:{marginTop:8},children:r})})]})})),(0,d.styled)(h.UIButton)(r||(r=(0,l.default)(["\n  flex: 1;\n  flex-direction: row;\n"])))),w=d.styled.Text(i||(i=(0,l.default)(["\n  font-size: 14px;\n  color: ",";\n  padding-left: 12px;\n"])),(function(e){return e.theme.neutral1})),b=d.styled.View(o||(o=(0,l.default)(["\n  flex: 1;\n  margin: 8px 0;\n"])))},81003:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.PollOptions=void 0;var r,i,o,l=a(n(19452)),u=a(n(861)),s=a(n(27424)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(a,i,o):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(84481)),d=n(25137),f=n(22581),h=n(25277),p=n(4007),v=n(91087),m=a(n(30381)),_=n(33823);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}t.PollOptions=(0,c.memo)((function(e){var t=e.isMultipleSelection,n=e.onPressAddOption,a=e.optionsRef,r=(0,c.useState)([{id:(0,m.default)().valueOf().toString(),value:""}]),i=(0,s.default)(r,2),o=i[0],l=i[1];(0,c.useEffect)((function(){o&&a&&(a.current=(0,u.default)(o))}),[o]);var h=(0,c.useMemo)((function(){return(0,u.default)(o.values())}),[o]),p=(0,c.useCallback)((function(e,t){console.log("xx"),l((function(n){return n.map((function(n){return n.id===t?Object.assign({},n,{value:e}):n}))}))}),[]),v=(0,c.useCallback)((function(e){l((function(t){return t.filter((function(t){return t.id!==e}))}))}),[]),g=(0,c.useCallback)((function(){n(),l((function(e){return e.concat({id:(0,m.default)().valueOf().toString(),value:""})}))}),[n]);return(0,_.jsxs)(y,{children:[(0,_.jsx)(w,{children:"Poll options"}),(0,_.jsx)(d.AnimatedCollapseList,{children:o&&o.length?o.map((function(e,n){return(0,_.jsx)(f.SimplePollOption,{value:e.value||"",id:e.id,index:n,onChange:p,onDelete:v,autoFocus:n>0,isMultipleSelection:t},e.id)})):null}),h.length<20?(0,_.jsx)(b,{onPress:g}):null]})}));var y=p.styled.View(r||(r=(0,l.default)(["\n  padding-bottom: 12px;\n  margin-top: 8px;\n  background-color: ",";\n"])),(function(e){return e.theme.white})),w=(0,p.styled)(v.UIText.HeaderMedium)(i||(i=(0,l.default)(["\n  color: ",";\n"])),(function(e){return e.theme.neutral1})),b=(0,p.styled)(v.UIButton).attrs((function(e){return{source:h.IC_OUTLINED_ADD,imageSize:24,imageStyle:{tintColor:e.theme.neutral2},title:"Add more poll option...",textStyle:Object.assign({},v.UITextStyle.body_medium_400,{color:e.theme.neutral2,marginLeft:8})}}))(o||(o=(0,l.default)(["\n  padding: 16px;\n  border: 1px solid ",";\n  border-radius: 8px;\n  margin-top: 8px;\n"])),(function(e){return e.theme.neutral5}))},22581:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.SimplePollOption=void 0;var r,i,o,l,u,s,c=a(n(19452)),d=a(n(17156)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(a,i,o):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(84481)),h=n(4007),p=n(25277),v=n(98317),m=n(46763),_=n(33823);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}var y={code:"function anonymous(){const{interactManager,refItem}=this.__closure;interactManager(async function(){var _refItem,_refItem$current;(_refItem=refItem)===null||_refItem===void 0?void 0:(_refItem$current=_refItem.current)===null||_refItem$current===void 0?void 0:_refItem$current.remove();},100);}"},w=(t.SimplePollOption=(0,f.memo)((function(e){var t,n=e.index,a=e.onChange,r=e.onDelete,i=e.value,o=e.autoFocus,l=e.isMultipleSelection,u=e.id,s=(0,f.useRef)(null),c=(0,f.useCallback)((function(){r&&r(u)}),[u,r]),g=(0,m.useWorkletCallback)(((t=function(){(0,h.interactManager)((0,d.default)((function*(){var e;null==s||null==(e=s.current)||e.remove()})),100)}).__closure={interactManager:h.interactManager,refItem:s},t.__initData=y,t.__workletHash=9005914301602,t),[]),C=(0,f.useCallback)((function(e){a&&a(e,u)}),[a,u]);return(0,_.jsx)(v.AnimatedCollapseItem,{ref:s,onRemoveItem:c,children:(0,_.jsxs)(b,{children:[(0,_.jsx)(k,{isMultipleSelection:l}),(0,_.jsxs)(x,{children:[(0,_.jsx)(j,{value:i,placeholder:n+1+". Option name",onChangeText:C,autoFocus:o}),(0,_.jsx)(w,{onPress:g,children:(0,_.jsx)(O,{source:p.IC_FILLED_CANCEL})})]})]})})})),h.styled.TouchableOpacity(r||(r=(0,c.default)(["\n  width: 24px;\n  height: 24px;\n  align-items: flex-end;\n  justify-content: center;\n"])))),b=h.styled.View(i||(i=(0,c.default)(["\n  flex-direction: row;\n  margin-top: 8px;\n  border: 1px solid #ebebeb;\n  border-radius: 8px;\n  padding: 16px;\n  align-items: center;\n"]))),x=h.styled.View(o||(o=(0,c.default)(["\n  background-color: ",";\n  align-items: center;\n  flex: 1;\n  flex-direction: row;\n  justify-content: space-between;\n"])),(function(e){return e.theme.backgroundColor})),j=h.styled.TextInput.attrs((function(e){return{placeholderTextColor:e.theme.grey4}}))(l||(l=(0,c.default)(["\n  flex: 1;\n  font-size: 14px;\n  color: ",";\n  margin: 0;\n  font-family: ",";\n  line-height: 20px;\n  padding-bottom: 4px;\n  justify-content: center;\n  align-self: center;\n  align-items: center;\n"])),(function(e){return e.theme.neutral1}),h.Fonts.Regular),k=h.styled.View(u||(u=(0,c.default)(["\n  width: 20px;\n  height: 20px;\n  border-radius: ","px;\n  border-color: ",";\n  border-width: 1px;\n  margin-right: 8px;\n"])),(function(e){return e.isMultipleSelection?4:24}),(function(e){return e.theme.neutral2})),O=h.styled.Image(s||(s=(0,c.default)(["\n  width: 24px;\n  height: 24px;\n  tint-color: ",";\n"])),(function(e){return e.theme.neutral3}))},6974:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CreatePollScreen=void 0;var r,i,o,l=a(n(19452)),u=a(n(38416)),s=a(n(861)),c=a(n(17156)),d=a(n(27424)),f=n(91087),h=U(n(84481)),p=n(70075),v=U(n(46763)),m=n(4007),_=n(6093),g=n(73781),y=n(11361),w=n(60301),b=n(60569),x=n(92910),j=n(86702),k=n(66492),O=n(19855),C=n(36571),P=n(33435),H=n(92551),M=n(81003),S=n(58053),I=n(6932),D=a(n(78663)),T=n(92571),V=a(n(30381)),A=n(33823);function W(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(W=function(e){return e?n:t})(e)}function U(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=W(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(a,i,o):a[i]=e[i]}return a.default=e,n&&n.set(e,a),a}var B=Array.from({length:11},(function(e,t){return{label:0===t?"Unlimited":String(t),value:0===t?"Unlimited":String(t)}})),R={code:"function anonymous(){const{params}=this.__closure;return!!params.value.channel_id;}"},N={code:"function anonymous(_key,_value){const{params}=this.__closure;params.value={...params.value,[_key]:_value};}"},E=t.CreatePollScreen=(0,h.memo)((function(){var e,t=(0,m.useNavigationParams)().id,n=(0,h.useRef)(null),a=(0,v.useAnimatedRef)(),r=(0,v.useSharedValue)(_.initParamCreatePoll),i=(0,m.useBoolean)(),o=(0,d.default)(i,3),l=o[0],W=(o[1],o[2]),U=(0,h.useRef)(null),E=(0,g.useChannelsByQuery)("joined").map((function(e){var t;return{label:(null==(t=(0,g.getChannels)(e))?void 0:t.name)||"Undefined channel",value:e}})),q=(0,h.useState)(""),z=(0,d.default)(q,2),J=z[0],G=z[1],$=null==(e=(0,b.useUpdates)(t))?void 0:e.attachment,K=(0,h.useRef)([]);(0,h.useEffect)((function(){if(E&&E.length>0){var e=E.find((function(e){return e.value===r.value.channel_id.toString()}));e&&G(e.label)}}),[r,G,E]);var Q,X=B.map((function(e){return{label:e.label||"Undefined channel",value:e.value}})),Z=(0,h.useCallback)((function(){console.log(K.current),r.value.has_limit&&r.value.limited_answers&&K.current.length===r.value.limited_answers||K.current.length}),[K,r]),ee=(0,h.useCallback)((function(){(0,m.goBack)()}),[]),te=(0,j.useAsyncFn)((0,c.default)((function*(){var e,n=(0,s.default)(K.current).map((function(e){return e.value})),a=Object.assign({},r.value,{name:r.value.name,multi:r.value.multi?"on":"off",has_etime:r.value.has_etime?"on":"off","etime-date":(0,V.default)(1e3*r.value.etime).format("DD/MM/YYYY"),"etime-time":(0,V.default)(1e3*r.value.etime).format("HH:mm"),has_stime:r.value.has_stime?"on":"off","stime-date":(0,V.default)(1e3*r.value.stime).format("DD/MM/YYYY"),"stime-time":(0,V.default)(1e3*r.value.stime).format("HH:mm"),allow_update:r.value.allow_update?"on":"off",allow_added:r.value.allow_added?"on":"off",limited_answers:(0,m.normalizeStringForSearch)(""+(r.value.limited_answers||"0")),channel_id:null==(e=r.value)?void 0:e.channel_id,id:null==$?void 0:$.id,has_limit:r.value.has_limit?"on":"off"});a.name&&a.name.trim()?n.filter((function(e){return(0,f.toBoolean)(e.trim())})).length||-1!=t?a["stime-date"]&&a["stime-time"]&&a["etime-date"]&&a["etime-time"]&&a.has_etime&&a.has_stime&&a["etime-date"]<=a["stime-date"]?m.ToastService.show((0,k.translate)("Error in the start time and end time",{vi:"Thời gian bắt đầu phải nhỏ hơn thời gian kết thúc",en:"Error in the start time and end time"})):a.has_limit&&Number(a.limited_answers)>10?m.ToastService.show((0,k.translate)("Limit number of answers is 10",{vi:"Câu trả lời tối đa là 10",en:"Limit number of answers is 10"})):(-1!==t?(yield(0,C.requestEditPoll)(a),m.ToastService.show("Edit poll successfully")):(yield(0,C.requestCreatePoll)(Object.assign({},a,{options:n})),m.ToastService.show("Create poll successfully")),(0,m.goBack)()):m.ToastService.show((0,k.translate)("At least one vote",{vi:"Phải có ít nhất một bình chọn",en:"At least one vote"})):m.ToastService.show((0,k.translate)("Poll name is required",{vi:"Vui lòng nhập vào tên bình chọn",en:"Poll name is required"}))})),[t,r]),ne=(0,d.default)(te,2),ae=ne[0],re=ae.loading,ie=ae.error,oe=ne[1],le=(0,v.useDerivedValue)(((Q=function(){return!!r.value.channel_id}).__closure={params:r},Q.__initData=R,Q.__workletHash=0xde52d00aea6,Q),[]),ue=(0,h.useCallback)((function(e,t){(0,v.runOnUI)(function(){var e=function(e,t){r.value=Object.assign({},r.value,(0,u.default)({},e,t))};return e.__closure={params:r},e.__initData=N,e.__workletHash=690685769123,e}())(e,t)}),[r]),se=(0,h.useCallback)((function(e,t){return(0,A.jsx)(O.MenuItem,{title:e.label,onPress:function(){var t;ue("channel_id",e.value),G(e.label),null==(t=U.current)||t.dismiss()}},t)}),[U]);return(0,m.useAutoToastError)(ie),(0,h.useEffect)((function(){var e,t,n,a=Object.assign({},_.initParamCreatePoll);$&&(a={channel_id:(null==$?void 0:$.channel_id)||0,name:(null==$?void 0:$.name)||"",multi:Boolean(Number(null==$?void 0:$.config.multi)),has_etime:Boolean(Number(null==$?void 0:$.config.has_etime)),etime:null==$||null==(e=$.config)?void 0:e.etime,has_stime:Boolean(Number(null==$?void 0:$.config.has_etime)),stime:null==$||null==(t=$.config)?void 0:t.stime,allow_update:Boolean(Number(null==$?void 0:$.config.allow_update)),allow_added:Boolean(Number(null==$?void 0:$.config.allow_added)),has_limit:Boolean(Number(null==$?void 0:$.config.has_limit)),limited_answers:Number((null==$||null==(n=$.config)?void 0:n.limited_answers)||3)});r.value=a}),[t]),(0,A.jsx)(f.FullScreenWrapper,{isGrey:!0,children:(0,A.jsxs)(f.MyKeyboardAvoidingView,{ref:n,scrollRef:a,children:[(0,A.jsx)(D.default,{isVisible:re}),(0,A.jsx)(p.HeaderCreatePost,{title:"Create a poll",active:le,onPress:oe,loading:re,onGoBack:ee}),(0,A.jsx)(Y,{ref:a,keyboardShouldPersistTaps:"handled",children:(0,A.jsxs)(L,{children:[(0,A.jsxs)(F,{children:[(0,A.jsxs)(T.View,{style:w.globalStyles.mb4,children:[(0,A.jsx)(f.UIText.HeaderMedium,{children:"General information"}),(0,A.jsx)(T.View,{style:w.globalStyles.mt12,children:(0,A.jsx)(H.AvatarWithSelectChannel,{bottomSheetRef:U,label:J,typePost:"a poll"})})]}),(0,A.jsx)(f.UIInput.Text,{title:"Poll name",keyName:"name",params:r,placeholder:"---",defaultValue:"",required:!0}),(0,A.jsx)(f.UITextInput,{title:"Poll content",keyName:"content",params:r,defaultValue:"",onChangeValue:ue}),(0,A.jsx)(f.UIInput.UserPicker,{title:"Followers",keyName:"followers",params:r,onChangeValue:ue,multiple:!0,type:"user"})]}),(0,A.jsx)(F,{children:-1==t?(0,A.jsx)(M.PollOptions,{optionsRef:K,isMultipleSelection:!!$&&$.config.multi,onPressAddOption:Z}):null}),(0,A.jsxs)(F,{children:[(0,A.jsx)(f.UIText.HeaderMedium,{children:"Settings"}),(0,A.jsx)(I.UICheckBoxCollapse,{title:"Multiple answers per user (MA)",keyNameCheckbox:"multi",params:r,childComponent:(0,A.jsx)(f.UIInput.Selector,{keyName:"limited_answers",params:r,title:"Limited answer",onChangeValue:ue,options:X})}),(0,A.jsx)(I.UICheckBoxCollapse,{title:"Enable started time",keyNameCheckbox:"has_stime",params:r,childComponent:(0,A.jsx)(f.UIDateTimeInput,{keyName:"stime",params:r,title:(0,k.translate)("Started vote"),onChangeValue:ue,mode:"datetime"})}),(0,A.jsx)(I.UICheckBoxCollapse,{title:"Enable voting deadline",keyNameCheckbox:"has_etime",params:r,childComponent:(0,A.jsx)(f.UIDateTimeInput,{keyName:"etime",params:r,title:(0,k.translate)("Voting deadline"),onChangeValue:ue,mode:"datetime"})}),(0,A.jsx)(f.UIText.HeaderMedium,{children:"Advanced settings"}),(0,A.jsx)(S.CheckboxWithText,{params:r,keyName:"allow_update",title:"Allow users to update their voting after voted"}),(0,A.jsx)(S.CheckboxWithText,{params:r,keyName:"allow_added",title:"Allow users to add new options to the voting"}),(0,A.jsx)(I.UICheckBoxCollapse,{title:"Limited answers for multiple-answers voting",keyNameCheckbox:"has_limit",params:r,childComponent:(0,A.jsx)(f.UITextInput,{keyName:"limited_answers",params:r,title:(0,k.translate)("Limit number of answers")+" (10)",onChangeValue:ue,placeholder:(0,k.translate)("Limit number of answers")+" (10)",keyboardType:"number-pad"})})]}),(0,A.jsx)(y.AnimatedBottomSpace,{})]})}),(0,A.jsx)(x.DiscardDialog,{title:"Discard change",content:"You have made changes to this item that have not been saved. If you leave this page, your changes will be lost.",visible:l,onClose:W}),(0,A.jsx)(P.BottomSheetMenu,{name:"channel",ref:U,items:E,renderMenuItem:se,titleHeader:"Select channel"})]})})})),L=(t.default=E,(0,m.styled)(v.default.View)(r||(r=(0,l.default)(["\n  flex: 1;\n  gap: 8px;\n"])))),F=m.styled.View(i||(i=(0,l.default)(["\n  margin-top: 8px;\n  background-color: white;\n  padding: 12px 16px;\n  gap: 8px;\n"]))),Y=m.styled.ScrollView(o||(o=(0,l.default)(["\n  flex: 1;\n"])))},70075:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderCreatePost=void 0;var r,i,o=a(n(19452)),l=n(84481),u=n(25736),s=n(4007),c=n(25277),d=n(91087),f=n(25200),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(a,i,o):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(46763)),p=n(33823);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}var m={code:"function anonymous(){const{aTop}=this.__closure;return{paddingTop:aTop.value};}"},_={code:"function anonymous(){const{interpolateColor,active,theme}=this.__closure;return{backgroundColor:interpolateColor(active.value?1:0,[0,1],[theme.neutral3,theme.primaryColor]),width:'100%'};}"},g={code:"function anonymous(){const{active}=this.__closure;return{pointerEvents:active.value?'auto':'none'};}"},y=(t.HeaderCreatePost=(0,l.memo)((function(e){var t,n=(0,f.useAnimatedSafeAreaInsets)().aTop,a=(0,h.useAnimatedStyle)(((t=function(){return{paddingTop:n.value}}).__closure={aTop:n},t.__initData=m,t.__workletHash=9978501313055,t)),r=(0,s.useTheme)(),i=e.title,o=e.active,l=e.id,v=e.onPress,b=(e.loading,e.onGoBack),x=(0,h.useAnimatedStyle)(function(){var e=function(){return{backgroundColor:(0,h.interpolateColor)(o.value?1:0,[0,1],[r.neutral3,r.primaryColor]),width:"100%"}};return e.__closure={interpolateColor:h.interpolateColor,active:o,theme:r},e.__initData=_,e.__workletHash=0xefaedf5ccd0,e}(),[r]),j=(0,h.useAnimatedProps)(function(){var e=function(){return{pointerEvents:o.value?"auto":"none"}};return e.__closure={active:o},e.__initData=g,e.__workletHash=0xcd0f6a5dae1,e}());return(0,p.jsxs)(y,{style:a,children:[(0,p.jsxs)(u.FlexCenter,{gap:8,children:[(0,p.jsx)(d.UIButton,{source:c.IC_OUTLINED_LEFT,onPress:b||s.goBack}),(0,p.jsx)(d.UIText.HeaderLarge,{children:i})]}),(0,p.jsx)(h.default.View,{animatedProps:j,children:(0,p.jsx)(w,{title:l?"Update":"Create",onPress:v,style:x})})]})})),(0,s.styled)(h.default.View)(r||(r=(0,o.default)(["\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom-color: ",";\n  border-bottom-width: 1px;\n  padding: 6px 16px;\n  background-color: white;\n"])),(function(e){return e.theme.neutral4}))),w=(0,s.styled)(d.UIButton).attrs((function(e){return{textStyle:Object.assign({},d.UITextStyle.body_medium_500,{color:"#fff"})}}))(i||(i=(0,o.default)(["\n  width: 94px;\n  height: 32px;\n  border-radius: 8px;\n  align-items: center;\n  justify-content: center;\n  padding: 4px 16px;\n  background-color: ",";\n"])),(function(e){return e.theme.primaryColor}))}}]);//# sourceMappingURL=src_screens_CreatePollScreen_index_tsx.chunk.bundle.map?platform=android