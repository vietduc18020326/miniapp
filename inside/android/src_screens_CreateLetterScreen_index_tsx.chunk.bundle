(self.webpackChunkInside=self.webpackChunkInside||[]).push([["src_screens_CreateLetterScreen_index_tsx"],{51705:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.MyInputBackground=void 0;var a,o,i,l,u,s,c,d,f=r(n(19452)),p=r(n(27424)),m=n(84481),h=n(4007),x=n(20349),g=n(25277),y=n(71527),v=n(22532),b=n(33823),_=(t.MyInputBackground=(0,m.memo)((function(e){var t=e.onSelectedImage,n=e.image,r=(0,m.useState)(""),a=(0,p.default)(r,2),o=a[0],i=a[1],l=(0,m.useCallback)((function(e){i(e.url),t(e)}),[t]),u=(0,m.useCallback)((function(){(0,x.openCameraRollScreen)({onSubmit:l})}),[]),s=(0,m.useMemo)((function(){var e=o||n;return Object.values(y.BG_TEMPLATE).includes(e)?(0,v.getTemplateImage)(e):{uri:e}}),[o,n]);return(0,b.jsxs)(_,{children:[(0,b.jsx)(j,{children:"Background"}),(0,b.jsx)(k,{resizeMode:"cover",source:s,children:o||n?(0,b.jsx)(w,{hasImage:o||n,onPress:u,children:(0,b.jsx)(T,{hasImage:o||n,children:"Change"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(I,{children:[(0,b.jsx)(O,{source:g.IC_OUTLINED_IMAGE}),(0,b.jsx)(C,{children:"Upload your background"})]}),(0,b.jsx)(w,{hasImage:o||n,onPress:u,children:(0,b.jsx)(T,{children:"Choose file"})})]})})]})})),h.styled.TouchableOpacity(a||(a=(0,f.default)(["\n  justify-content: center;\n  border-radius: 4px;\n  border: 1px solid #ebebeb;\n  padding: 0 16px 12px 16px;\n"])))),j=h.styled.Text(o||(o=(0,f.default)(["\n  font-family: ",";\n  font-size: 14px;\n  line-height: 20px;\n  color: ",";\n  margin-top: 8px;\n  margin-bottom: 4px;\n"])),h.Fonts.Regular,(function(e){return e.theme.neutral2})),k=h.styled.ImageBackground(i||(i=(0,f.default)(["\n  background-color: ",";\n  min-height: 180px;\n  border-radius: 8px;\n"])),(function(e){return e.theme.neutral9})),C=h.styled.Text(l||(l=(0,f.default)(["\n  font-family: ",";\n  font-size: 14px;\n  line-height: 20px;\n  color: ",";\n"])),h.Fonts.Regular,(function(e){return e.theme.neutral2})),w=h.styled.TouchableOpacity(u||(u=(0,f.default)(["\n  width: 120px;\n  height: 40px;\n  padding: 4px 16px;\n  justify-content: center;\n  align-items: center;\n  border-radius: 8px;\n  background: ",";\n  margin-top: ","px;\n  align-self: center;\n"])),(function(e){return e.hasImage?"rgba(0, 0, 0, 0.65)":"#EAEAEA"}),(function(e){return e.hasImage?68:12})),I=h.styled.View(s||(s=(0,f.default)(["\n  align-items: center;\n  justify-content: center;\n  margin-right: 4px;\n  margin-top: 36px;\n"]))),O=h.styled.Image(c||(c=(0,f.default)(["\n  width: 32px;\n  height: 32px;\n  tint-color: ",";\n"])),(function(e){return e.theme.neutral2})),T=h.styled.Text(d||(d=(0,f.default)(["\n  font-family: ",";\n  font-size: 14px;\n  line-height: 24px;\n  color: ",";\n"])),h.Fonts.Medium,(function(e){return e.hasImage?e.theme.white:e.theme.neutral2}))},268:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.CreateLetterScreen=void 0;var a,o,i,l,u=r(n(19452)),s=r(n(38416)),c=r(n(17156)),d=r(n(27424)),f=P(n(84481)),p=n(4007),m=P(n(46763)),h=n(6494),x=n(91087),g=n(11361),y=n(92910),v=n(86702),b=n(68412),_=n(17118),j=n(48764),k=n(51705),C=n(70075),w=n(58053),I=r(n(78663)),O=n(33823);function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}var M={code:"function anonymous(){const{params}=this.__closure;return!!params.value.name;}"},S={code:"function anonymous(_key,_value){const{params}=this.__closure;params.value={...params.value,[_key]:_value};}"},A=(t.CreateLetterScreen=(0,f.memo)((function(){var e=(0,p.useNavigationParams)().id,t=(0,m.useSharedValue)(h.initCreateLetter),n=(0,f.useRef)(null),r=(0,m.useAnimatedRef)(),a=(0,f.useRef)(null),o=(0,p.useBoolean)(),i=(0,d.default)(o,3),l=i[0],u=(i[1],i[2]),T=(0,f.useCallback)((function(e){a.current=e,t.value.image=e.url}),[a,t]),P=(0,v.useAsyncFn)((0,c.default)((function*(){-1!==e?yield(0,b.requestEditLetter)(t.value):(yield(0,b.requestCreateLetter)(t.value),p.ToastService.show("Create letter successfully")),(0,p.goBack)()})),[e,t]),V=(0,d.default)(P,2),E=V[0],W=E.loading,U=E.error,H=V[1];(0,p.useAutoToastError)(U);var N=(0,f.useCallback)((function(){console.log("ss"),(0,p.goBack)()}),[]);(0,f.useEffect)((function(){var n=Object.assign({},h.initCreateLetter);if(e>0){var r=(0,_.getLetters)(e);JSON.parse(j.Buffer.from((null==r?void 0:r.image)||"eyJ0eXBlIjoiIiwiY29sb3IiOiIiLCJvcGFjaXR5IjowLCJwZXJjZW50IjoxMDAsImltYWdlIjoiIiwidGV4dHMiOltdfQ","base64").toString("utf-8"));n={id:null==r?void 0:r.id,content:(null==r?void 0:r.content)||"",name:(null==r?void 0:r.name)||"",image:null==r?void 0:r.image,files:null==r?void 0:r.files,notify:null==r?void 0:r.notify,notify_email:null==r?void 0:r.notify_email,disable_comment:null==r?void 0:r.disable_comment}}t.value=n}),[e]);var F,R=(0,m.useDerivedValue)(((F=function(){return!!t.value.name}).__closure={params:t},F.__initData=M,F.__workletHash=0xc157b0598d0,F),[]),G=(0,f.useCallback)((function(e,n){(0,m.runOnUI)(function(){var e=function(e,n){t.value=Object.assign({},t.value,(0,s.default)({},e,n))};return e.__closure={params:t},e.__initData=S,e.__workletHash=690685769123,e}())(e,n)}),[t]);return(0,O.jsx)(x.ScreenWrapper,{children:(0,O.jsxs)(x.MyKeyboardAvoidingView,{ref:n,scrollRef:r,children:[(0,O.jsx)(C.HeaderCreatePost,{onPress:H,title:"Create a board letter",active:R,id:e,loading:W,onGoBack:N}),(0,O.jsx)(I.default,{isVisible:W}),(0,O.jsx)(L,{ref:r,keyboardShouldPersistTaps:"handled",children:(0,O.jsxs)(A,{children:[(0,O.jsxs)(B,{children:[(0,O.jsx)(k.MyInputBackground,{onSelectedImage:T,image:t.value.image}),(0,O.jsx)(x.UIInput.Text,{title:"Title",keyName:"name",params:t,placeholder:"---",defaultValue:"",onChangeValue:G,required:!0}),(0,O.jsx)(x.UITextInput,{title:"Content",keyName:"content",params:t,defaultValue:"",onChangeValue:G})]}),(0,O.jsxs)(B,{children:[(0,O.jsx)(D,{children:"Advanced settings"}),(0,O.jsx)(w.CheckboxWithText,{params:t,keyName:"draft",title:"Save as a draft"}),(0,O.jsx)(w.CheckboxWithText,{params:t,keyName:"disable_comment",title:"Disable comments"}),(0,O.jsx)(w.CheckboxWithText,{params:t,keyName:"notify",title:"Send notification"}),(0,O.jsx)(w.CheckboxWithText,{params:t,keyName:"notify_email",title:"Send email to everyone"}),(0,O.jsx)(g.AnimatedBottomSpace,{})]})]})}),(0,O.jsx)(y.DiscardDialog,{title:"Discard change",content:"You have made changes to this item that have not been saved. If you leave this page, your changes will be lost.",visible:l,onClose:u})]})})})),(0,p.styled)(m.default.View)(a||(a=(0,u.default)(["\n  flex: 1;\n  padding: 12px 16px;\n  gap: 12px;\n"])))),B=p.styled.View(o||(o=(0,u.default)(["\n  gap: 12px;\n  background-color: ",";\n"])),(function(e){return e.theme.white})),D=p.styled.Text(i||(i=(0,u.default)(["\n  font-family: ",";\n  font-size: 16px;\n  line-height: 24px;\n  color: ",";\n"])),p.Fonts.Medium,(function(e){return e.theme.neutral1})),L=p.styled.ScrollView(l||(l=(0,u.default)(["\n  flex: 1;\n  background-color: white;\n  margin-top: 8px;\n"])))},70075:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderCreatePost=void 0;var a,o,i=r(n(19452)),l=n(84481),u=n(25736),s=n(4007),c=n(25277),d=n(91087),f=n(25200),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(46763)),m=n(33823);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var x={code:"function anonymous(){const{aTop}=this.__closure;return{paddingTop:aTop.value};}"},g={code:"function anonymous(){const{interpolateColor,active,theme}=this.__closure;return{backgroundColor:interpolateColor(active.value?1:0,[0,1],[theme.neutral3,theme.primaryColor]),width:'100%'};}"},y={code:"function anonymous(){const{active}=this.__closure;return{pointerEvents:active.value?'auto':'none'};}"},v=(t.HeaderCreatePost=(0,l.memo)((function(e){var t,n=(0,f.useAnimatedSafeAreaInsets)().aTop,r=(0,p.useAnimatedStyle)(((t=function(){return{paddingTop:n.value}}).__closure={aTop:n},t.__initData=x,t.__workletHash=9978501313055,t)),a=(0,s.useTheme)(),o=e.title,i=e.active,l=e.id,h=e.onPress,_=(e.loading,e.onGoBack),j=(0,p.useAnimatedStyle)(function(){var e=function(){return{backgroundColor:(0,p.interpolateColor)(i.value?1:0,[0,1],[a.neutral3,a.primaryColor]),width:"100%"}};return e.__closure={interpolateColor:p.interpolateColor,active:i,theme:a},e.__initData=g,e.__workletHash=0xefaedf5ccd0,e}(),[a]),k=(0,p.useAnimatedProps)(function(){var e=function(){return{pointerEvents:i.value?"auto":"none"}};return e.__closure={active:i},e.__initData=y,e.__workletHash=0xcd0f6a5dae1,e}());return(0,m.jsxs)(v,{style:r,children:[(0,m.jsxs)(u.FlexCenter,{gap:8,children:[(0,m.jsx)(d.UIButton,{source:c.IC_OUTLINED_LEFT,onPress:_||s.goBack}),(0,m.jsx)(d.UIText.HeaderLarge,{children:o})]}),(0,m.jsx)(p.default.View,{animatedProps:k,children:(0,m.jsx)(b,{title:l?"Update":"Create",onPress:h,style:j})})]})})),(0,s.styled)(p.default.View)(a||(a=(0,i.default)(["\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom-color: ",";\n  border-bottom-width: 1px;\n  padding: 6px 16px;\n  background-color: white;\n"])),(function(e){return e.theme.neutral4}))),b=(0,s.styled)(d.UIButton).attrs((function(e){return{textStyle:Object.assign({},d.UITextStyle.body_medium_500,{color:"#fff"})}}))(o||(o=(0,i.default)(["\n  width: 94px;\n  height: 32px;\n  border-radius: 8px;\n  align-items: center;\n  justify-content: center;\n  padding: 4px 16px;\n  background-color: ",";\n"])),(function(e){return e.theme.primaryColor}))},6494:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.initCreateLetter=void 0;t.initCreateLetter={name:"",content:""}}}]);//# sourceMappingURL=src_screens_CreateLetterScreen_index_tsx.chunk.bundle.map?platform=android