{"version":3,"file":"src_screens_ChannelScreen_index_tsx.chunk.bundle","mappings":"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","sources":["webpack:///./src/screens/ChannelScreen/ChannelThumbnail.tsx","webpack:///./src/screens/ChannelScreen/index.tsx"],"sourcesContent":["import {Fonts, getUserByQuery, styled} from '@true/core';\nimport React, {memo, useCallback} from 'react';\nimport {useChannels} from '@/store/channels';\nimport {navigateToDetailChannelScreen} from '@/utils';\nimport FastImage from 'react-native-fast-image';\nimport {globalStyles} from '@/utils/globalStyle';\nimport {Dimensions, View} from 'react-native';\nimport {Icons, IMAGE_THUMBNAIL_CHANNEL} from '@true/asset';\n\ninterface ChannelThumbnailProps {\n  id: number;\n}\n\nexport const ChannelThumbnail = memo(function (props: ChannelThumbnailProps) {\n  const {id} = props;\n  const channel = useChannels(id);\n  const onPress = useCallback(() => {\n    navigateToDetailChannelScreen({\n      id: id,\n      path: channel?.path || '',\n    });\n  }, []);\n\n  return (\n    <SContainer onPress={onPress}>\n      <SCoverImage\n        source={\n          channel?.image ? {uri: channel?.image} : IMAGE_THUMBNAIL_CHANNEL\n        }\n        resizeMode={'cover'}\n      />\n      <SIconChannel>\n        <SImage source={Icons.Outlined.GLOBAL} />\n      </SIconChannel>\n      <SWrapperView>\n        <View>\n          <STextTitle numberOfLines={2} style={globalStyles.mt4}>\n            {channel?.name}\n          </STextTitle>\n          <STextGrey style={globalStyles.mt4}>\n            {channel?.metatype === 'company' ? 'Company-wide' : 'Group'}\n          </STextGrey>\n        </View>\n        <STextGreyBold style={globalStyles.mt8}>\n          {channel?.metatype === 'company'\n            ? getUserByQuery('allIds').length\n            : channel?.followers.length}{' '}\n          members\n        </STextGreyBold>\n      </SWrapperView>\n    </SContainer>\n  );\n});\nconst widthScreen = Dimensions.get('window').width;\nconst SContainer = styled.TouchableOpacity`\n  background-color: white;\n  border-radius: 8px;\n  align-items: center;\n  margin-top: 8px;\n  width: ${(widthScreen - 16) / 2 - 16}px;\n  padding-bottom: 8px;\n  border: 1px solid ${p => p.theme.neutral5};\n  height: 210px;\n`;\nconst SCoverImage = styled(FastImage)`\n  width: 100%;\n  height: 100px;\n  max-height: 100px;\n  border-top-right-radius: 8px;\n  border-top-left-radius: 8px;\n  background-color: #1c1ca3;\n`;\nconst SWrapperView = styled.View`\n  flex: 1;\n  align-items: center;\n  justify-content: space-between;\n`;\nconst STextTitle = styled.Text`\n  color: ${p => p.theme.neutral1};\n  text-align: center;\n  font-family: ${Fonts.Regular};\n  font-size: 16px;\n\n  font-weight: 500;\n  width: 149px;\n  line-height: 24px; /* 150% */\n`;\nconst STextGrey = styled.Text`\n  color: ${p => p.theme.neutral2};\n  font-family: ${Fonts.Regular};\n  font-size: 12px;\n\n  font-weight: 400;\n  line-height: 16px; /* 133.333% */\n  text-align: center;\n`;\nconst STextGreyBold = styled(STextGrey)`\n  font-weight: 500;\n`;\nconst SIconChannel = styled.View`\n  width: 40px;\n  height: 40px;\n  background-color: ${p => p.theme.primaryColor};\n  border-radius: 8px;\n  border: 2.22222px solid #ffffff;\n  margin-top: -32px;\n  align-items: center;\n  justify-content: center;\n`;\nconst SImage = styled.Image`\n  width: 24px;\n  height: 24px;\n  tint-color: #fff;\n`;\n","import {ScreenWrapper, ScrollableTabView, UIFlashList} from '@true/ui';\nimport React, {memo, useCallback, useMemo, useState} from 'react';\nimport {ChannelThumbnail} from '@/screens/ChannelScreen/ChannelThumbnail';\nimport {\n  requestAllChannels,\n  requestJoinedChannels,\n} from '@/store/channels/function';\nimport {\n  getChannels,\n  getChannelsByQuery,\n  useChannelsByQuery,\n} from '@/store/channels';\nimport {normalizeStringForSearch, styled, useMe} from '@true/core';\nimport {EUserRole} from '@/utils/helper';\nimport {CustomHeader} from '@/components/CustomHeader';\nimport {navigateToCreateChannelScreen} from '@/utils';\nimport {IFilterParams} from '@/screens/SearchScreen/type';\nimport {EmptySearchView} from '@/components/EmptyView';\nimport {IMAGE_EMPTY_SEARCH} from '@true/asset';\n\nexport const ChannelScreen = memo(function () {\n  const me = useMe();\n  const [params, setParams] = useState<IFilterParams>({});\n  const [search, setSearch] = useState('');\n  const isAdmin = useMemo(() => {\n    return Number(me?.role) === EUserRole.ADMIN;\n  }, []);\n  const renderItem = useCallback(\n    (item: any, index?: number, isLast?: boolean) => {\n      return <ChannelThumbnail id={item} />;\n    },\n    [],\n  );\n  const renderItemFlashList = useCallback(({item}: any) => {\n    return <ChannelThumbnail id={item} />;\n  }, []);\n\n  const onChangeText = useCallback(\n    async (q: string) => {\n      setSearch(q);\n    },\n    [params],\n  );\n\n  const onCreateChannel = useCallback(() => {\n    navigateToCreateChannelScreen({\n      id: -1,\n    });\n  }, []);\n  const onSetData = useCallback(\n    (prevData: string[]) => {\n      return (prevData || []).filter(item =>\n        normalizeStringForSearch(\n          getChannels(item as string)?.name || '',\n        ).includes(search),\n      );\n    },\n    [search],\n  );\n  const channelIds = useMemo(() => {\n    const ids = getChannelsByQuery('all') || [];\n    return onSetData(ids);\n  }, [search, onSetData]);\n  const renderContent = useMemo(() => {\n    if (me && Number(me.role) === EUserRole.ADMIN) {\n      return (\n        <ScrollableTabView.Provider\n          params={{}}\n          renderItem={renderItem}\n          getItemByQuery={getChannelsByQuery}\n          useItemByQuery={useChannelsByQuery}\n          tabs={[\n            {\n              title: 'Joined channels',\n              content: (p: any) => (\n                <ScrollableTabView.List\n                  {...p}\n                  itemHeight={210}\n                  requestFn={requestJoinedChannels}\n                  tab={'joined'}\n                  numColumns={2}\n                  setData={onSetData}\n                />\n              ),\n            },\n            {\n              title: 'All channels',\n              content: (p: any) => (\n                <ScrollableTabView.List\n                  {...p}\n                  itemHeight={210}\n                  requestFn={requestAllChannels}\n                  numColumns={2}\n                  setData={onSetData}\n                />\n              ),\n            },\n          ]}>\n          <ScrollableTabView.TabBar />\n          <SContentWrapper>\n            <ScrollableTabView.Content />\n          </SContentWrapper>\n        </ScrollableTabView.Provider>\n      );\n    } else\n      return (\n        <SContentWrapper>\n          <UIFlashList\n            data={channelIds}\n            renderItem={renderItemFlashList}\n            numColumns={2}\n            estimatedItemSize={210}\n            ListEmptyComponent={\n              <EmptySearchView\n                title={'No channel was found'}\n                image={IMAGE_EMPTY_SEARCH}\n              />\n            }\n          />\n        </SContentWrapper>\n      );\n  }, [me, search, channelIds, renderItem, renderItemFlashList]);\n\n  return (\n    <ScreenWrapper isGrey={false}>\n      <CustomHeader\n        onCreate={onCreateChannel}\n        hideCreateButton={!isAdmin}\n        title={'Channel'}\n        isSearch\n        onChangeText={onChangeText}\n      />\n      {renderContent}\n    </ScreenWrapper>\n  );\n});\nconst SContentWrapper = styled.View`\n  flex: 1;\n  margin-left: 12px;\n`;\nexport default ChannelScreen;\n"],"names":["_templateObject","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","_templateObject7","_templateObject8","_core","require","_react","e","r","__esModule","default","t","_getRequireWildcardCache","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","_interopRequireWildcard","_channels","_utils","_reactNativeFastImage","_interopRequireDefault","_globalStyle","_reactNative","_asset","_jsxRuntime","WeakMap","exports","memo","props","id","channel","useChannels","onPress","useCallback","navigateToDetailChannelScreen","path","jsxs","SContainer","children","jsx","SCoverImage","source","image","uri","IMAGE_THUMBNAIL_CHANNEL","resizeMode","SIconChannel","SImage","Icons","Outlined","GLOBAL","SWrapperView","View","STextTitle","numberOfLines","style","globalStyles","mt4","name","STextGrey","metatype","STextGreyBold","mt8","getUserByQuery","length","followers","widthScreen","Dimensions","width","styled","TouchableOpacity","_taggedTemplateLiteralLoose2","p","theme","neutral5","FastImage","Text","neutral1","Fonts","Regular","neutral2","primaryColor","Image","_ui","_ChannelThumbnail","_function","_helper","_CustomHeader","_EmptyView","ChannelScreen","_ref2","me","useMe","_useState","useState","_useState2","_slicedToArray2","params","_useState3","_useState4","search","setSearch","isAdmin","useMemo","Number","role","EUserRole","ADMIN","renderItem","item","index","isLast","ChannelThumbnail","renderItemFlashList","_ref","onChangeText","_asyncToGenerator2","q","_x","apply","arguments","onCreateChannel","navigateToCreateChannelScreen","onSetData","prevData","filter","_getChannels","normalizeStringForSearch","getChannels","includes","channelIds","ids","getChannelsByQuery","renderContent","ScrollableTabView","Provider","getItemByQuery","useItemByQuery","useChannelsByQuery","tabs","title","content","List","assign","itemHeight","requestFn","requestJoinedChannels","tab","numColumns","setData","requestAllChannels","TabBar","SContentWrapper","Content","UIFlashList","data","estimatedItemSize","ListEmptyComponent","EmptySearchView","IMAGE_EMPTY_SEARCH","ScreenWrapper","isGrey","CustomHeader","onCreate","hideCreateButton","isSearch"],"sourceRoot":""}