(self.webpackChunkInside=self.webpackChunkInside||[]).push([["src_screens_DetailPostScreen_index_tsx"],{46034:function(e,t,n){var l=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DetailPostScreen=void 0;var o,i,r,a,s,u,c,d,p=l(n(19452)),f=l(n(27424)),h=I(n(84481)),x=n(91087),_=n(4007),y=I(n(46763)),v=n(92571),m=n(25277),g=n(25200),j=n(60301),w=n(48814),P=n(60569),b=l(n(13301)),O=n(25736),k=n(36571),T=n(27811),S=n(20349),C=n(33823);function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}function I(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var l={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var r=o?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(l,i,r):l[i]=e[i]}return l.default=e,n&&n.set(e,l),l}var D={code:"function anonymous(){const{aTop}=this.__closure;return{paddingTop:aTop.value};}"},E={code:"function anonymous(event){const{scroll_x}=this.__closure;const scrollValue=event.nativeEvent.contentOffset.y;scroll_x.value=scrollValue;}"},F={code:"function anonymous(){const{interpolate,scroll_x,Extrapolation}=this.__closure;const info_header_opacity=interpolate(scroll_x.value,[0,120],[0,1],{extrapolateRight:Extrapolation.CLAMP});return{opacity:info_header_opacity};}"},M=t.DetailPostScreen=(0,h.memo)((function(){var e,t,n,l=(0,_.useNavigationParams)().id,o=(0,P.useUpdates)(l),i=(0,_.useUser)((null==o?void 0:o.user_id)||0),r=(0,g.useAnimatedSafeAreaInsets)().aTop,a=(0,y.useAnimatedStyle)(((n=function(){return{paddingTop:r.value}}).__closure={aTop:r},n.__initData=D,n.__workletHash=9978501313055,n)),s=(0,y.useSharedValue)(0),u=(0,y.useWorkletCallback)(function(){var e=function(e){var t=e.nativeEvent.contentOffset.y;s.value=t};return e.__closure={scroll_x:s},e.__initData=E,e.__workletHash=4428087754035,e}(),[]),c=(0,h.useMemo)((function(){return(null==o?void 0:o.since)||0}),[]),d=(0,y.useAnimatedStyle)(function(){var e=function(){return{opacity:(0,y.interpolate)(s.value,[0,120],[0,1],{extrapolateRight:y.Extrapolation.CLAMP})}};return e.__closure={interpolate:y.interpolate,scroll_x:s,Extrapolation:y.Extrapolation},e.__initData=F,e.__workletHash=4966309020424,e}()),p=(0,h.useCallback)((function(){var e,t=(null==o||null==(e=o.attachment)?void 0:e.hid)||(null==o?void 0:o.hid)||"",n=(null==o?void 0:o.user_id)||0;(0,S.openActionPostScreen)(),(0,T.setActiveUpdate)(null==o?void 0:o.truetype,l,n,t)}),[]),A=(0,_.useAsyncFn)((function(){return(0,k.requestUpdatePost)({update_id:l})}),[l]),I=(0,f.default)(A,2),M=I[0],q=(M.loading,M.error,I[1]),B=(0,_.useAsyncFn)((function(){return(0,k.requestUpdatePost)({update_id:l})}),[l]),K=(0,f.default)(B,2),Z=K[0],G=Z.loading,J=(Z.error,K[1]);return(0,h.useEffect)((function(){q().then()}),[]),(0,C.jsx)(x.FullScreenWrapper,{children:(0,C.jsxs)(x.Comment.Provider,{appName:"inside",type:"comment",hid:(null==o||null==(e=o.attachment)?void 0:e.hid)||(null==o?void 0:o.hid)||"",token:(null==o||null==(t=o.attachment)?void 0:t.token)||(null==o?void 0:o.token)||"",children:[(0,C.jsxs)(V,{style:a,children:[(0,C.jsxs)(O.FlexCenter,{children:[(0,C.jsx)(L,{onPress:_.goBack,children:(0,C.jsx)(v.Image,{source:m.Icons.Outlined.CHEVRON_LEFT})}),(0,C.jsxs)(N,{style:d,children:[(0,C.jsx)(x.Avatar,{size:32,userKey:(null==o?void 0:o.user_id)||0}),(0,C.jsxs)(v.View,{style:j.globalStyles.ml8,children:[(0,C.jsx)(R,{children:null==i?void 0:i.name}),(0,C.jsxs)(O.FlexCenter,{children:["update"!==(null==o?void 0:o.truetype)?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(W,{children:(0,C.jsx)(z,{source:b.default.getTypePostImage((null==o?void 0:o.truetype)||"update")})}),(0,C.jsx)(H,{style:j.globalStyles.ml4,children:""+b.default.getReactionText((null==o?void 0:o.truetype)||"update")}),(0,C.jsx)(O.STextDivider,{children:" | "})]}):null,(0,C.jsx)(H,{children:(0,C.jsx)(x.TimeAgo,{time:1e3*c})})]})]})]})]}),(0,C.jsx)(U,{onPress:p,children:(0,C.jsx)(v.Image,{source:m.Icons.Outlined.HORIZONTAL_3DOTS})})]}),(0,C.jsx)(x.Comment.List,{refreshing:G,onLoadData:J,ListHeaderComponent:(0,C.jsx)(w.PostThumbnail,{isInFeed:!1,id:l}),onScroll:u,appName:"inside"}),(0,C.jsx)(x.Comment.Input,{}),(0,C.jsx)(x.Comment.BottomSheet,{})]})})})),V=(0,_.styled)(y.default.View)(o||(o=(0,p.default)(["\n  background-color: white;\n  padding: 8px 16px 8px 0;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n"]))),L=_.styled.TouchableOpacity(i||(i=(0,p.default)(["\n  width: 48px;\n  height: 48px;\n  align-items: center;\n  justify-content: center;\n"]))),R=_.styled.Text(r||(r=(0,p.default)(["\n  font-family: ",";\n\n  font-weight: 500;\n  font-size: 12px;\n  line-height: 16px;\n  color: #242424;\n"])),_.Fonts.Regular),H=_.styled.Text(a||(a=(0,p.default)(["\n  font-family: ",";\n\n  font-weight: 400;\n  font-size: 12px;\n  line-height: 16px;\n  color: #666666;\n"])),_.Fonts.Regular),N=(0,_.styled)(y.default.View)(s||(s=(0,p.default)(["\n  flex-direction: row;\n  align-items: center;\n"]))),U=_.styled.TouchableOpacity.attrs((function(e){return{hitSlop:{top:8,bottom:8,left:8,right:8}}}))(u||(u=(0,p.default)(["\n  width: 24px;\n  height: 24px;\n  align-items: center;\n  justify-content: flex-start;\n"]))),W=_.styled.View(c||(c=(0,p.default)(["\n  width: 16px;\n  height: 16px;\n  align-items: center;\n  justify-content: center;\n"]))),z=_.styled.Image(d||(d=(0,p.default)(["\n  tint-color: #666666;\n  width: 16px;\n  height: 16px;\n"])));t.default=M}}]);//# sourceMappingURL=src_screens_DetailPostScreen_index_tsx.chunk.bundle.map?platform=ios