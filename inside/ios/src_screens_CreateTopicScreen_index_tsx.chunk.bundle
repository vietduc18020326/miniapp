(self.webpackChunkInside=self.webpackChunkInside||[]).push([["src_screens_CreateTopicScreen_index_tsx"],{47268:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarWithSelectChannel=void 0;var a,o,s,i,c=r(n(19452)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(84481)),A=n(4007),l=n(14025),d=n(91087),p=n(46763),C=n(33823);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}var h={code:"function anonymous(){const{widthButton}=this.__closure;return{width:widthButton.value};}",location:"/Users/phamduc/inside/src/components/AvatarWithSelectChannel/index.tsx",sourceMap:'{"version":3,"names":["anonymous","widthButton","__closure","width","value"],"sources":["/Users/phamduc/inside/src/components/AvatarWithSelectChannel/index.tsx"],"mappings":"AA0BI,SAAAA,UAAA,QAAAC,WAAA,OAAAC,SAAA,OAAO,CACLC,KAAK,CAAEF,WAAW,CAACG,KACrB,CAAC"}',version:"3.5.4"},v={code:"function anonymous(e){const{widthButton}=this.__closure;widthButton.value=e.nativeEvent.layout.width;}",location:"/Users/phamduc/inside/src/components/AvatarWithSelectChannel/index.tsx",sourceMap:'{"version":3,"names":["anonymous","e","widthButton","__closure","value","nativeEvent","layout","width"],"sources":["/Users/phamduc/inside/src/components/AvatarWithSelectChannel/index.tsx"],"mappings":"AAgCI,QAAC,CAAAA,SAAyBA,CAAAC,CAAA,QAAAC,WAAA,OAAAC,SAAA,CACxBD,WAAW,CAACE,KAAK,CAAGH,CAAC,CAACI,WAAW,CAACC,MAAM,CAACC,KAAK,CAChD"}',version:"3.5.4"},m=(0,u.memo)((function(e){var t,r,a=e.bottomSheetRef,o=e.label,s=e.typePost,i=(0,A.useMe)(),c=(0,p.useSharedValue)(200),u=(0,p.useAnimatedStyle)((t=[new n.g.Error,-2,-27],(r=function(){return{width:c.value}}).__closure={widthButton:c},r.__initData=h,r.__workletHash=8674385749251,r.__stackDetails=t,r),[]),f=(0,p.useWorkletCallback)(function(){var e=[new n.g.Error,-2,-27],t=function(e){c.value=e.nativeEvent.layout.width};return t.__closure={widthButton:c},t.__initData=v,t.__workletHash=0xcd259325f91,t.__stackDetails=e,t}(),[c]);return(0,C.jsxs)(y,{children:[(0,C.jsx)(d.Avatar,{size:48,userKey:(null==i?void 0:i.id)||"0",disableClick:!0}),(0,C.jsxs)(_,{children:[(0,C.jsxs)(d.UIText.BodyMedium500,{onLayout:f,children:[null==i?void 0:i.name," create ",s]}),(0,C.jsx)(x,{style:u,title:o||"Select channel",onPress:function(){var e;null==(e=a.current)||e.present()},children:(0,C.jsx)(g,{source:l.IC_OUTLINED_EXPAND_MORE})})]})]})}));t.AvatarWithSelectChannel=m;var y=A.styled.View(a||(a=(0,c.default)(["\n  flex-direction: row;\n  align-items: center;\n  gap: 12px;\n"]))),_=A.styled.View(o||(o=(0,c.default)(["\n  justify-content: center;\n  gap: 4px;\n"]))),x=(0,A.styled)(d.UIButton).attrs((function(e){return{textStyle:Object.assign({},d.UITextStyle.body_medium_400,{color:e.theme.neutral2,width:"85%"}),textProps:{numberOfLines:1}}}))(s||(s=(0,c.default)(["\n  flex-direction: row;\n  border-radius: 40px;\n  border-width: 1px;\n  border-color: ",";\n  justify-content: space-between;\n  align-items: center;\n  height: 32px;\n  padding-left: 16px;\n  padding-right: 8px;\n"])),(function(e){return e.theme.neutral5})),g=A.styled.Image(i||(i=(0,c.default)(["\n  width: 24px;\n  height: 24px;\n  tint-color: ",";\n"])),(function(e){return e.theme.neutral2}))},70075:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderCreatePost=void 0;var a,o,s=r(n(19452)),i=n(84481),c=n(25736),u=n(4007),A=n(14025),l=n(91087),d=n(25200),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(46763)),C=n(33823);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}var h={code:"function anonymous(){const{aTop}=this.__closure;return{paddingTop:aTop.value};}",location:"/Users/phamduc/inside/src/screens/CreatePostScreen/HeaderCreatePost.tsx",sourceMap:'{"version":3,"names":["anonymous","aTop","__closure","paddingTop","value"],"sources":["/Users/phamduc/inside/src/screens/CreatePostScreen/HeaderCreatePost.tsx"],"mappings":"AAwB8C,SAAAA,UAAA,QAAAC,IAAA,OAAAC,SAAA,OAAO,CACjDC,UAAU,CAAEF,IAAI,CAACG,KACnB,CAAC"}',version:"3.5.4"},v={code:"function anonymous(){const{interpolateColor,active,theme}=this.__closure;return{backgroundColor:interpolateColor(active.value?1:0,[0,1],[theme.neutral3,theme.primaryColor]),width:'100%'};}",location:"/Users/phamduc/inside/src/screens/CreatePostScreen/HeaderCreatePost.tsx",sourceMap:'{"version":3,"names":["anonymous","interpolateColor","active","theme","__closure","backgroundColor","value","neutral3","primaryColor","width"],"sources":["/Users/phamduc/inside/src/screens/CreatePostScreen/HeaderCreatePost.tsx"],"mappings":"AA8B4C,SAAAA,SAAMA,CAAA,QAAAC,gBAAA,CAAAC,MAAA,CAAAC,KAAA,OAAAC,SAAA,CAC9C,MAAO,CACLC,eAAe,CAAEJ,gBAAgB,CAC/BC,MAAM,CAACI,KAAK,CAAG,CAAC,CAAG,CAAC,CACpB,CAAC,CAAC,CAAE,CAAC,CAAC,CACN,CAACH,KAAK,CAACI,QAAQ,CAAEJ,KAAK,CAACK,YAAY,CACrC,CAAC,CACDC,KAAK,CAAE,MACT,CAAC,CACH"}',version:"3.5.4"},m={code:"function anonymous(){const{active}=this.__closure;return{pointerEvents:active.value?'auto':'none'};}",location:"/Users/phamduc/inside/src/screens/CreatePostScreen/HeaderCreatePost.tsx",sourceMap:'{"version":3,"names":["anonymous","active","__closure","pointerEvents","value"],"sources":["/Users/phamduc/inside/src/screens/CreatePostScreen/HeaderCreatePost.tsx"],"mappings":"AAyCyC,SAAAA,SAAMA,CAAA,QAAAC,MAAA,OAAAC,SAAA,CAC3C,MAAO,CACLC,aAAa,CAAEF,MAAM,CAACG,KAAK,CAAG,MAAM,CAAG,MACzC,CAAC,CACH"}',version:"3.5.4"},y=(0,i.memo)((function(e){var t,r,a=(0,d.useAnimatedSafeAreaInsets)().aTop,o=(0,p.useAnimatedStyle)((t=[new n.g.Error,-2,-27],(r=function(){return{paddingTop:a.value}}).__closure={aTop:a},r.__initData=h,r.__workletHash=9978501313055,r.__stackDetails=t,r)),s=(0,u.useTheme)(),i=e.title,f=e.active,y=e.id,g=e.onPress,b=(e.loading,e.onGoBack),w=(0,p.useAnimatedStyle)(function(){var e=[new n.g.Error,-4,-27],t=function(){return{backgroundColor:(0,p.interpolateColor)(f.value?1:0,[0,1],[s.neutral3,s.primaryColor]),width:"100%"}};return t.__closure={interpolateColor:p.interpolateColor,active:f,theme:s},t.__initData=v,t.__workletHash=0xefaedf5ccd0,t.__stackDetails=e,t}(),[s]),j=(0,p.useAnimatedProps)(function(){var e=[new n.g.Error,-2,-27],t=function(){return{pointerEvents:f.value?"auto":"none"}};return t.__closure={active:f},t.__initData=m,t.__workletHash=0xcd0f6a5dae1,t.__stackDetails=e,t}());return(0,C.jsxs)(_,{style:o,children:[(0,C.jsxs)(c.FlexCenter,{gap:8,children:[(0,C.jsx)(l.UIButton,{source:A.IC_OUTLINED_LEFT,onPress:b||u.goBack}),(0,C.jsx)(l.UIText.HeaderLarge,{children:i})]}),(0,C.jsx)(p.default.View,{animatedProps:j,children:(0,C.jsx)(x,{title:y?"Update":"Create",onPress:g,style:w})})]})}));t.HeaderCreatePost=y;var _=(0,u.styled)(p.default.View)(a||(a=(0,s.default)(["\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom-color: ",";\n  border-bottom-width: 1px;\n  padding: 6px 16px;\n  background-color: white;\n"])),(function(e){return e.theme.neutral4})),x=(0,u.styled)(l.UIButton).attrs((function(e){return{textStyle:Object.assign({},l.UITextStyle.body_medium_500,{color:"#fff"})}}))(o||(o=(0,s.default)(["\n  width: 94px;\n  height: 32px;\n  border-radius: 8px;\n  align-items: center;\n  justify-content: center;\n  padding: 4px 16px;\n  background-color: ",";\n"])),(function(e){return e.theme.primaryColor}))},60780:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.CreateTopicScreen=void 0;var a,o,s,i=r(n(19452)),c=r(n(38416)),u=r(n(17156)),A=r(n(27424)),l=T(n(84481)),d=n(4007),p=T(n(46763)),C=n(91087),f=n(11361),h=n(92910),v=n(86702),m=n(12715),y=n(16300),_=n(58672),x=n(73781),g=n(33435),b=n(19855),w=n(47268),j=n(70075),M=r(n(78663)),S=n(58053),k=n(33823);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function T(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}var P={code:"function anonymous(){const{params}=this.__closure;return!!params.value.content;}",location:"/Users/phamduc/inside/src/screens/CreateTopicScreen/index.tsx",sourceMap:'{"version":3,"names":["anonymous","params","__closure","value","content"],"sources":["/Users/phamduc/inside/src/screens/CreateTopicScreen/index.tsx"],"mappings":"AA4F4C,SAAAA,SAAMA,CAAA,QAAAC,MAAA,OAAAC,SAAA,CAC9C,MAAO,CAAC,CAACD,MAAM,CAACE,KAAK,CAACC,OAAO,CAC/B"}',version:"3.5.4"},I={code:"function anonymous(_key,_value){const{params}=this.__closure;params.value={...params.value,[_key]:_value};}",location:"/Users/phamduc/inside/src/screens/CreateTopicScreen/index.tsx",sourceMap:'{"version":3,"names":["anonymous","_key","_value","params","__closure","value"],"sources":["/Users/phamduc/inside/src/screens/CreateTopicScreen/index.tsx"],"mappings":"AAkHc,QAAC,CAAAA,SAAcA,CAAAC,IAAM,CAAKC,MAAA,QAAAC,MAAA,OAAAC,SAAA,CAGhCD,MAAM,CAACE,KAAK,CAAG,CACb,GAAGF,MAAM,CAACE,KAAK,CACf,CAACJ,IAAI,EAAGC,MACV,CAAC,CACH"}',version:"3.5.4"},E=(0,l.memo)((function(){var e=(0,d.useNavigationParams)().id,t=(0,l.useRef)(null),r=(0,p.useAnimatedRef)(),a=(0,p.useSharedValue)(m.initCreateTopic),o=(0,d.useBoolean)(),s=(0,A.default)(o,3),i=s[0],O=(s[1],s[2]),T=(0,l.useRef)(null),E=(0,l.useState)(""),W=(0,A.default)(E,2),K=W[0],H=W[1],V=(0,x.useChannelsByQuery)("joined").map((function(e){var t;return{label:(null==(t=(0,x.getChannels)(e))?void 0:t.name)||"Undefined channel",value:e}})),G=(0,v.useAsyncFn)((0,u.default)((function*(){-1!==e?yield(0,_.requestEditTopic)(a.value):(yield(0,_.requestCreateTopic)(a.value),d.ToastService.show("Create topic successfully")),(0,d.goBack)()})),[e,a]),Q=(0,A.default)(G,2),F=Q[0],q=F.loading,N=F.error,L=Q[1];(0,d.useAutoToastError)(N);var R=(0,l.useCallback)((function(){(0,d.goBack)()}),[]);(0,l.useEffect)((function(){var t=Object.assign({},m.initCreateTopic);if(e>0){var n=(0,y.getTopics)(e);t={channel_id:0,id:null==n?void 0:n.id,content:(null==n?void 0:n.content)||"",name:(null==n?void 0:n.name)||"","file[]":null==n?void 0:n.files,followers:null==n?void 0:n.followers,privacy:null==n?void 0:n.privacy}}a.value=t}),[e,a]);var J,Y,z=(0,p.useDerivedValue)((J=[new n.g.Error,-2,-27],(Y=function(){return!!a.value.content}).__closure={params:a},Y.__initData=P,Y.__workletHash=3835743809214,Y.__stackDetails=J,Y),[]),X=(0,l.useCallback)((function(e,t){return(0,k.jsx)(b.MenuItem,{title:e.label,onPress:function(){var t;Z("channel_id",e.value),H(e.label),null==(t=T.current)||t.dismiss()}},t)}),[T]),Z=(0,l.useCallback)((function(e,t){(0,p.runOnUI)(function(){var e=[new n.g.Error,-2,-27],t=function(e,t){a.value=Object.assign({},a.value,(0,c.default)({},e,t))};return t.__closure={params:a},t.__initData=I,t.__workletHash=690685769123,t.__stackDetails=e,t}())(e,t)}),[a]);return(0,k.jsxs)(C.FullScreenWrapper,{isGrey:!0,children:[(0,k.jsxs)(C.MyKeyboardAvoidingView,{ref:t,scrollRef:r,children:[(0,k.jsx)(M.default,{isVisible:q}),(0,k.jsx)(j.HeaderCreatePost,{title:-1===e?"Create a topic":"Edit topic",onPress:L,active:z,id:e,loading:q,onGoBack:R}),(0,k.jsx)(D,{ref:r,keyboardShouldPersistTaps:"handled",children:(0,k.jsxs)(U,{children:[(0,k.jsxs)(B,{children:[(0,k.jsx)(w.AvatarWithSelectChannel,{bottomSheetRef:T,label:K,typePost:"an event"}),(0,k.jsx)(C.UIInput.Text,{title:"Title",keyName:"name",params:a,placeholder:"---",defaultValue:"",onChangeValue:Z,required:!0}),(0,k.jsx)(C.UITextInput,{title:"Content",keyName:"content",params:a,defaultValue:"",onChangeValue:Z}),(0,k.jsx)(C.UIInput.Attachment,{title:"Attach files or Images",keyName:"file[]",params:a,onChangeValue:Z}),(0,k.jsx)(C.UIInput.UserPicker,{title:"Followers",keyName:"followers",params:a,type:"user"})]}),(0,k.jsxs)(B,{children:[(0,k.jsx)(C.UIText.HeaderMedium,{children:"Advanced settings"}),(0,k.jsx)(S.CheckboxWithText,{params:a,keyName:"privacy",title:"Only visible to selected followers"}),(0,k.jsx)(f.AnimatedBottomSpace,{})]})]})})]}),(0,k.jsx)(h.DiscardDialog,{title:"Discard change",content:"You have made changes to this item that have not been saved. If you leave this page, your changes will be lost.",visible:i,onClose:O}),(0,k.jsx)(g.BottomSheetMenu,{name:"channel",ref:T,items:V,renderMenuItem:X,titleHeader:"Select channel"})]})}));t.CreateTopicScreen=E;var U=(0,d.styled)(p.default.View)(a||(a=(0,i.default)(["\n  flex: 1;\n  gap: 8px;\n"]))),B=d.styled.View(o||(o=(0,i.default)(["\n  margin-top: 8px;\n  background-color: white;\n  padding: 12px 16px;\n  gap: 8px;\n"]))),D=d.styled.ScrollView(s||(s=(0,i.default)(["\n  flex: 1;\n"])))},58672:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.requestTopicsChannel=t.requestMyTopicsChannel=t.requestEditTopic=t.requestCreateTopic=void 0;var a,o,s,i,c=r(n(861)),u=r(n(38416)),A=r(n(17156)),l=n(4007),d=n(30806),p=n(16300);t.requestTopicsChannel=function(e){return(a=a||(0,A.default)((function*(e){var t=(yield l.Fetch.postWithToken("@"+l.Core.systemPath+"/inside/ajax/api/channel/update/topic?path="+e.path)).data;return(0,d.batch)((function(){t.topics.length&&((0,p.syncTopics)(t.topics),(0,p.setTopicsQuery)((function(n){return Object.assign({},n,(0,u.default)({},e.path,t.topics.map((function(e){return e.id.toString()}))))})))})),t.topics}))).apply(this,arguments)};t.requestMyTopicsChannel=function(e){return(o=o||(0,A.default)((function*(e){var t=(yield l.Fetch.postWithToken("@"+l.Core.systemPath+"/inside/ajax/api/channel/update/topic?path="+e.path+"&created=mine")).data;return(0,d.batch)((function(){t.topics.length&&((0,p.syncTopics)(t.topics),(0,p.setTopicsQuery)((function(n){return Object.assign({},n,(0,u.default)({},"created_"+e.path,t.topics.map((function(e){return e.id.toString()}))))})))})),t.topics}))).apply(this,arguments)};t.requestCreateTopic=function(e){return(s=s||(0,A.default)((function*(e){var t=(yield l.Fetch.postWithToken("@"+l.Core.systemPath+"/inside/ajax/api/topic/create",e)).data;(0,d.batch)((function(){t.topic&&((0,p.syncTopics)([t.topic]),(0,p.setTopicsQuery)((function(e){return Object.assign({},e,(0,u.default)({},"all",[t.topic.id.toString()].concat((0,c.default)(e.all||[]))))})))}))}))).apply(this,arguments)};t.requestEditTopic=function(e){return(i=i||(0,A.default)((function*(e){var t=(yield l.Fetch.postWithToken("@"+l.Core.systemPath+"/inside/ajax/api/topic/edit",e)).data;(0,d.batch)((function(){t.topic&&(0,p.syncTopics)([t.topic])}))}))).apply(this,arguments)}},12715:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.initCreateTopic=void 0;t.initCreateTopic={name:"",content:"",channel_id:0}}}]);//# sourceMappingURL=src_screens_CreateTopicScreen_index_tsx.chunk.bundle.map?platform=ios