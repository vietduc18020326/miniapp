(self.webpackChunkInside=self.webpackChunkInside||[]).push([["src_MiniApp_tsx","node_modules_use-sync-external-store_shim_with-selector_js"],{38472:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(n(17156)),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var u=s?Object.getOwnPropertyDescriptor(e,r):null;u&&(u.get||u.set)?Object.defineProperty(a,r,u):a[r]=e[r]}a.default=e,n&&n.set(e,a);return a}(n(84481)),u=n(4007),o=n(91087),i=n(23586),c=n(36571),d=n(88583),l=n(15530),p=n(6093),y=n(67410),f=n(33823);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var v=(0,u.lazily)((function(){return Promise.all([n.e("vendors-node_modules_react-native-camera-roll_camera-roll_src_index_ts-node_modules_react-nat-0a041f"),n.e("vendors-node_modules_recyclerlistview_dist_reactnative_index_js"),n.e("vendors-node_modules_hoist-non-react-statics_dist_hoist-non-react-statics_cjs_js-node_modules-e329b1"),n.e("vendors-node_modules_react-navigation_elements_src_index_tsx-node_modules_true_ui_src_compone-aa9ce1"),n.e("vendors-node_modules_emotion_stylis_dist_stylis_browser_cjs_js-node_modules_emotion_unitless_-c05e19"),n.e("vendors-node_modules_multiple-platform_applist_src_index_tsx-node_modules_react-navigation_st-e4ac71"),n.e("webpack_sharing_consume_default_react-navigation_native_react-navigation_native"),n.e("webpack_sharing_consume_default_react-native-gesture-handler_react-native-gesture-handler"),n.e("webpack_sharing_consume_default_gorhom_bottom-sheet_gorhom_bottom-sheet-webpack_sharing_consu-af343e"),n.e("webpack_sharing_consume_default_i18next_i18next"),n.e("src_Routes_tsx-node_modules_moment_locale_sync_recursive_-webpack_sharing_consume_default_tru-709b6a")]).then(n.bind(n,8080))})).Routes;u.AppInfo.title="Inside",u.AppInfo.subTitle="A social network to connect and engage across the company",u.AppInfo.primaryColor="#3AA394",u.AppInfo.preSyncData=(0,s.default)((function*(){yield(0,l.requestSettingApp)(),yield(0,d.requestAllChannels)(),yield(0,d.requestJoinedChannels)(),yield(0,c.requestUpdatePosts)({order:p.EOrderUpdate.UPDATE})})),(0,u.addLangResources)({en:Object.assign({},n(13560)),vi:Object.assign({},n(39695))}).then();var m=(0,r.memo)((function(){return(0,f.jsx)(y.PostImageProvider,{children:(0,f.jsx)(o.MyMiniApp,{component:v,persistor:i.persistor})})}));t.default=m},67410:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.usePostImage=t.PostImageProvider=void 0;var s=a(n(27424)),r=a(n(37535)),u=n(46763),o=n(84481),i=(0,r.default)((function(){var e=(0,u.useSharedValue)({});return(0,o.useMemo)((function(){return{imageLayout:e}}),[e])}),(function(e){return e})),c=(0,s.default)(i,2),d=c[0],l=c[1];t.usePostImage=l,t.PostImageProvider=d},42755:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useAnnouncementsByQuery=t.useAnnouncements=t.syncAnnouncements=t.setAnnouncementsStore=t.setAnnouncementsQuery=t.getAnnouncementsByQuery=t.getAnnouncements=t.AnnouncementsReducer=void 0;var a=(0,n(4007).createArrayReducer)("announcements",["id"]),s=a.reducer,r=a.setStore,u=a.sync,o=a.setQueries,i=a.useByKey,c=a.getByKey,d=a.useKeysByQuery,l=a.getKeysByQuery;t.getAnnouncementsByQuery=l,t.useAnnouncementsByQuery=d,t.getAnnouncements=c,t.useAnnouncements=i,t.setAnnouncementsQuery=o,t.syncAnnouncements=u,t.setAnnouncementsStore=r,t.AnnouncementsReducer=s},88583:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.requestRemoveMemberChannel=t.requestJoinedChannels=t.requestCreateChannel=t.requestChannelPath=t.requestAllChannels=t.requestAdminGrantChannel=t.requestAddMemberChannel=void 0;var s,r,u,o,i,c,d,l=a(n(861)),p=a(n(38416)),y=a(n(17156)),f=n(4007),h=n(30806),v=n(97999),m=n(73781);t.requestAllChannels=function(){return(s=s||(0,y.default)((function*(){var e=(yield f.Fetch.postWithToken("@"+f.Core.systemPath+"/inside/ajax/api/channel/gets")).data;return(0,h.batch)((function(){e.channels.length&&((0,m.syncChannels)(e.channels),(0,m.setChannelsQuery)((function(t){var n;return Object.assign({},t,(n={},(0,p.default)(n,"all",e.channels.map((function(e){return e.id.toString()}))),(0,p.default)(n,v.ETypeChannel.TEAM,e.channels.filter((function(e){return e.metatype===v.ETypeChannel.TEAM})).map((function(e){return e.id.toString()}))),(0,p.default)(n,v.ETypeChannel.COMPANY,e.channels.filter((function(e){return e.metatype===v.ETypeChannel.COMPANY})).map((function(e){return e.id.toString()}))),n))})))})),e.channels}))).apply(this,arguments)};t.requestJoinedChannels=function(){return(r=r||(0,y.default)((function*(){var e=(yield f.Fetch.postWithToken("@"+f.Core.systemPath+"/inside/ajax/api/channel/gets.joined")).data;return(0,h.batch)((function(){e.channels.length&&((0,m.syncChannels)(e.channels),(0,m.setChannelsQuery)((function(t){return Object.assign({},t,(0,p.default)({},"joined",e.channels.map((function(e){return e.id.toString()}))))})))})),e.channels}))).apply(this,arguments)};t.requestChannelPath=function(e){return(u=u||(0,y.default)((function*(e){var t=(yield f.Fetch.postWithToken("@"+f.Core.systemPath+"/inside/ajax/api/channel/get?path="+e.path)).data;return(0,h.batch)((function(){t.channel&&(0,m.syncChannels)([t.channel])})),t.channel}))).apply(this,arguments)};t.requestAddMemberChannel=function(e){return(o=o||(0,y.default)((function*(e){var t=(yield f.Fetch.postWithToken("@"+f.Core.systemPath+"/inside/ajax/api/channel/member/add",e)).data;(0,h.batch)((function(){t.channel&&((0,m.syncChannels)([t.channel]),f.ToastService.show("Add member success"))}))}))).apply(this,arguments)};t.requestAdminGrantChannel=function(e){return(i=i||(0,y.default)((function*(e){var t=(yield f.Fetch.postWithToken("@"+f.Core.systemPath+"/inside/ajax/api/channel/member/admin.grant",e)).data;(0,h.batch)((function(){t.channel&&(0,m.syncChannels)([t.channel]),f.ToastService.show("Make admin success")}))}))).apply(this,arguments)};t.requestRemoveMemberChannel=function(e){return(c=c||(0,y.default)((function*(e){var t=(yield f.Fetch.postWithToken("@"+f.Core.systemPath+"/inside/ajax/api/channel/member/remove",e)).data;(0,h.batch)((function(){t.channel&&(0,m.syncChannels)([t.channel])}))}))).apply(this,arguments)};t.requestCreateChannel=function(e){return(d=d||(0,y.default)((function*(e){var t=(yield f.Fetch.postWithToken("@"+f.Core.systemPath+"/inside/ajax/api/channel/create",e)).data;(0,h.batch)((function(){t.channel&&((0,m.syncChannels)([t.channel]),(0,m.setChannelsQuery)((function(e){return Object.assign({},e,(0,p.default)({},"all",[t.channel.id.toString()].concat((0,l.default)(e.all))))})))}))}))).apply(this,arguments)}},73781:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useChannelsByQuery=t.useChannels=t.syncChannels=t.setChannelsStore=t.setChannelsQuery=t.getChannelsByQuery=t.getChannels=t.ChannelsReducer=void 0;var a=(0,n(4007).createArrayReducer)("channels",["id"]),s=a.reducer,r=a.setStore,u=a.sync,o=a.setQueries,i=a.useByKey,c=a.getByKey,d=a.useKeysByQuery,l=a.getKeysByQuery;t.getChannelsByQuery=l,t.useChannelsByQuery=d,t.getChannels=c,t.useChannels=i,t.setChannelsQuery=o,t.syncChannels=u,t.setChannelsStore=r,t.ChannelsReducer=s},97999:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.initCreateChannel=t.ETypeChannel=void 0;var n=function(e){return e.COMPANY="company",e.TEAM="team",e}({});t.ETypeChannel=n;var a={path:"",metatype:n.COMPANY,name:"",owners:""};t.initCreateChannel=a},38600:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useCoreValuesByQuery=t.useCoreValues=t.syncCoreValues=t.setCoreValuesStore=t.setCoreValuesQuery=t.getCoreValuesByQuery=t.getCoreValues=t.CoreValuesReducer=void 0;var a=(0,n(4007).createArrayReducer)("corevalues",["id"]),s=a.reducer,r=a.setStore,u=a.sync,o=a.setQueries,i=a.useByKey,c=a.getByKey,d=a.useKeysByQuery,l=a.getKeysByQuery;t.getCoreValuesByQuery=l,t.useCoreValuesByQuery=d,t.getCoreValues=c,t.useCoreValues=i,t.setCoreValuesQuery=o,t.syncCoreValues=u,t.setCoreValuesStore=r,t.CoreValuesReducer=s},75867:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useEventsByQuery=t.useEvents=t.syncEvents=t.setEventsStore=t.setEventsQuery=t.getEventsByQuery=t.getEvents=t.EventsReducer=void 0;var a=(0,n(4007).createArrayReducer)("events",["id"]),s=a.reducer,r=a.setStore,u=a.sync,o=a.setQueries,i=a.useByKey,c=a.getByKey,d=a.useKeysByQuery,l=a.getKeysByQuery;t.getEventsByQuery=l,t.useEventsByQuery=d,t.getEvents=c,t.useEvents=i,t.setEventsQuery=o,t.syncEvents=u,t.setEventsStore=r,t.EventsReducer=s},23586:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.setInsideStore=t.persistor=t.insideReducers=void 0;var a=n(4007),s=n(75867),r=n(73781),u=n(42755),o=n(60569),i=n(17118),c=n(16300),d=n(38600),l=n(92813),p=n(9926),y={events:s.EventsReducer,channels:r.ChannelsReducer,announcements:u.AnnouncementsReducer,updates:o.UpdatesReducer,letters:i.LettersReducer,topics:c.TopicsReducer,corevalues:d.CoreValuesReducer,saved:l.SavedReducer,setting:p.settingReducer};t.insideReducers=y;var f=function(e){(0,s.setEventsStore)(e),(0,r.setChannelsStore)(e),(0,u.setAnnouncementsStore)(e),(0,o.setUpdatesStore)(e),(0,i.setLettersStore)(e),(0,c.setTopicsStore)(e),(0,c.setTopicsStore)(e),(0,d.setCoreValuesStore)(e),(0,l.setSavedStore)(e),(0,p.setSettingStore)(e)};t.setInsideStore=f;var h=(0,a.setupStore)(y,f).persistor;t.persistor=h},17118:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useLettersByQuery=t.useLetters=t.syncLetters=t.setLettersStore=t.setLettersQuery=t.getLettersByQuery=t.getLetters=t.LettersReducer=void 0;var a=(0,n(4007).createArrayReducer)("letters",["id"]),s=a.reducer,r=a.setStore,u=a.sync,o=a.setQueries,i=a.useByKey,c=a.getByKey,d=a.useKeysByQuery,l=a.getKeysByQuery;t.getLettersByQuery=l,t.useLettersByQuery=d,t.getLetters=c,t.useLetters=i,t.setLettersQuery=o,t.syncLetters=u,t.setLettersStore=r,t.LettersReducer=s},92813:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useSavedByQuery=t.useSaved=t.syncSaved=t.setSavedStore=t.setSavedQuery=t.getSavedByQuery=t.getSaved=t.SavedReducer=void 0;var a=(0,n(4007).createArrayReducer)("saved",["id"]),s=a.reducer,r=a.setStore,u=a.sync,o=a.setQueries,i=a.useByKey,c=a.getByKey,d=a.useKeysByQuery,l=a.getKeysByQuery;t.getSavedByQuery=l,t.useSavedByQuery=d,t.getSaved=c,t.useSaved=i,t.setSavedQuery=o,t.syncSaved=u,t.setSavedStore=r,t.SavedReducer=s},15530:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.requestSettingApp=t.requestEditCompanyInfo=t.initEditCompany=void 0;var s,r,u=a(n(17156)),o=n(4007),i=n(30806),c=n(9926);t.requestSettingApp=function(){return(s=s||(0,u.default)((function*(){var e=(yield o.Fetch.postWithToken("@"+o.Core.systemPath+"/inside/ajax/api/setting/info")).data;return(0,i.batch)((function(){if(e.sysinfo){var t={appuser:e.appuser,darkmode:e.dark_mode,sysinfo:e.sysinfo};(0,c.syncSetting)(t)}})),e.sysinfo}))).apply(this,arguments)};t.initEditCompany={title:"",logo:"",image:"",address:"",vision:""};t.requestEditCompanyInfo=function(e){return(r=r||(0,u.default)((function*(e){var t=(yield o.Fetch.postWithToken("@"+o.Core.systemPath+"/inside/ajax/api/company/edit",e)).data;return(0,i.batch)((function(){if(t.sysinfo){var e={appuser:t.appuser,darkmode:t.dark_mode,sysinfo:t.sysinfo};(0,c.syncSetting)(e)}})),t.sysinfo}))).apply(this,arguments)}},9926:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useSetting=t.syncSetting=t.settingReducer=t.setSettingStore=t.resetSetting=t.getSetting=void 0;var a=(0,n(4007).createObjectReducer)("setting",{}),s=a.use,r=a.sync,u=a.get,o=a.reset,i=a.reducer,c=a.setStore;t.setSettingStore=c,t.settingReducer=i,t.resetSetting=o,t.getSetting=u,t.syncSetting=r,t.useSetting=s},16300:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useTopicsByQuery=t.useTopics=t.syncTopics=t.setTopicsStore=t.setTopicsQuery=t.getTopicsByQuery=t.getTopics=t.TopicsReducer=void 0;var a=(0,n(4007).createArrayReducer)("topics",["id"]),s=a.reducer,r=a.setStore,u=a.sync,o=a.setQueries,i=a.useByKey,c=a.getByKey,d=a.useKeysByQuery,l=a.getKeysByQuery;t.getTopicsByQuery=l,t.useTopicsByQuery=d,t.getTopics=c,t.useTopics=i,t.setTopicsQuery=o,t.syncTopics=u,t.setTopicsStore=r,t.TopicsReducer=s},36571:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.requestVoted=t.requestUserProfile=t.requestUpdatePostsChannel=t.requestUpdatePosts=t.requestUpdatePost=t.requestSearchUpdates=t.requestRemovePost=t.requestReaction=t.requestPinnedPost=t.requestLoadMoreUpdates=t.requestEditPost=t.requestEditPoll=t.requestCreatePost=t.requestCreatePoll=t.requestAddPollOptions=void 0;var s,r,u,o,i,c,d,l,p,y,f,h,v,m,g,_=a(n(38416)),S=a(n(861)),C=a(n(17156)),P=n(4007),b=n(30806),T=n(6093),E=n(60569),U=n(73781),j=n(85325);t.requestUpdatePosts=function(e){return(s=s||(0,C.default)((function*(e){var t=(yield P.Fetch.postWithToken("@"+P.Core.systemPath+"/inside/ajax/api/update/gets?order="+(null==e?void 0:e.order))).data;return(0,b.batch)((function(){t.updates.length&&((0,j.setTokenUpdate)(t.ptoken),(0,E.syncUpdates)([].concat((0,S.default)(t.updates),(0,S.default)(t.pinned_updates))),(0,E.setUpdatesQuery)((function(e){var n;return Object.assign({},e,(n={},(0,_.default)(n,"all",t.updates.map((function(e){return e.id.toString()}))),(0,_.default)(n,"pinned",t.pinned_updates.map((function(e){return e.id.toString()}))),(0,_.default)(n,T.ETypeUpdate.IDEA,t.updates.filter((function(e){return e.truetype===T.ETypeUpdate.IDEA})).map((function(e){return e.id.toString()}))),(0,_.default)(n,T.ETypeUpdate.ANNOUNCEMENT,t.updates.filter((function(e){return e.truetype===T.ETypeUpdate.ANNOUNCEMENT})).map((function(e){return e.id.toString()}))),(0,_.default)(n,T.ETypeUpdate.EVENT,t.updates.filter((function(e){return e.truetype===T.ETypeUpdate.EVENT})).map((function(e){return e.id.toString()}))),(0,_.default)(n,T.ETypeUpdate.POLL,t.updates.filter((function(e){return e.truetype===T.ETypeUpdate.POLL})).map((function(e){return e.id.toString()}))),(0,_.default)(n,T.ETypeUpdate.STYLED,t.updates.filter((function(e){return e.truetype===T.ETypeUpdate.STYLED})).map((function(e){return e.id.toString()}))),(0,_.default)(n,T.ETypeUpdate.UPDATE,t.updates.filter((function(e){return e.truetype===T.ETypeUpdate.UPDATE})).map((function(e){return e.id.toString()}))),(0,_.default)(n,T.ETypeUpdate.WELCOME,t.updates.filter((function(e){return e.truetype===T.ETypeUpdate.WELCOME})).map((function(e){return e.id.toString()}))),n))})))})),t.updates}))).apply(this,arguments)};t.requestUpdatePost=function(e){return(r=r||(0,C.default)((function*(e){var t=(yield P.Fetch.postWithToken("@"+P.Core.systemPath+"/inside/ajax/api/update/get?update_id="+e.update_id)).data;return(0,b.batch)((function(){t.update&&(0,E.syncUpdates)([t.update])})),t.update}))).apply(this,arguments)};t.requestUpdatePostsChannel=function(e){return(u=u||(0,C.default)((function*(e){var t=(yield P.Fetch.postWithToken("@"+P.Core.systemPath+"/inside/ajax/api/channel/get?path="+e.path+"&order="+e.order)).data;return(0,b.batch)((function(){t.updates.length&&((0,j.setTokenUpdate)(t.ptoken),(0,E.syncUpdates)([].concat((0,S.default)(t.updates),(0,S.default)(t.pinned_updates))),(0,E.setUpdatesQuery)((function(n){var a;return Object.assign({},n,(a={},(0,_.default)(a,e.path,t.updates.map((function(e){return e.id.toString()}))),(0,_.default)(a,"pinned_"+e.path,t.pinned_updates.map((function(e){return e.id.toString()}))),a))})))})),t.updates}))).apply(this,arguments)};t.requestUserProfile=function(e){return(o=o||(0,C.default)((function*(e){var t=(yield P.Fetch.postWithToken("@"+P.Core.systemPath+"/inside/ajax/api/profile/get?tail=saved&username="+e.username)).data;(0,b.batch)((function(){t.updates.length&&((0,j.setTokenUpdate)(t.ptoken),(0,E.syncUpdates)(t.updates),(0,E.setUpdatesQuery)((function(n){return Object.assign({},n,(0,_.default)({},e.username,t.updates.map((function(e){return e.id.toString()}))))}))),t.channels.length&&(0,U.setChannelsQuery)((function(n){return Object.assign({},n,(0,_.default)({},e.username,t.channels.map((function(e){return e.id.toString()}))))}))}))}))).apply(this,arguments)};t.requestCreatePost=function(e){return(i=i||(0,C.default)((function*(e){var t=(yield P.Fetch.postWithToken("@"+P.Core.systemPath+"/inside/ajax/api/update/post",e)).data;return(0,b.batch)((function(){"ok"===t.message&&((0,E.syncUpdates)([t.update]),(0,E.setUpdatesQuery)((function(e){return Object.assign({},e,(0,_.default)({},"all",[t.update.id.toString()].concat((0,S.default)(e.all))))})),P.ToastService.show("Create post successfully"))})),null==t?void 0:t.message}))).apply(this,arguments)};t.requestEditPost=function(e){return(c=c||(0,C.default)((function*(e){var t=(yield P.Fetch.postWithToken("@"+P.Core.systemPath+"/inside/ajax/api/update/edit",e)).data;return(0,b.batch)((function(){if(t.update){var n=(0,E.getUpdates)((null==e?void 0:e.id)||"");(0,E.syncUpdates)([Object.assign({},n,t.update)]),console.log("Edit success post",t.update)}})),null==t?void 0:t.message}))).apply(this,arguments)};t.requestRemovePost=function(e){return(d=d||(0,C.default)((function*(e){var t=(yield P.Fetch.postWithToken("@"+P.Core.systemPath+"/inside/ajax/api/update/remove",e)).data;(0,b.batch)((function(){t.code&&((0,E.setUpdatesQuery)((function(t){return Object.assign({},t,(0,_.default)({},"all",(0,S.default)(t.all.filter((function(t){return t!==e.id.toString()})))))})),null!=e&&e.pathChannel&&(0,E.setUpdatesQuery)((function(t){return Object.assign({},t,(0,_.default)({},e.pathChannel,(0,S.default)(t.all.filter((function(t){return t!==e.id})))))})),console.log("remove success post"))}))}))).apply(this,arguments)};t.requestReaction=function(e){return(l=l||(0,C.default)((function*(e){var t=e.hid,n=e.token,a=e.reaction,s=(yield P.Fetch.postWithToken("@"+P.Core.systemPath+"/inside/ajax/api/like/reaction",{hid:t,token:n,reaction:a})).data;return(0,b.batch)((function(){if(s.origin){var e=(0,E.getUpdates)(s.origin.update_id);null!=e&&e.attachment?(0,E.syncUpdates)([Object.assign({},e,{attachment:s.origin})]):(0,E.syncUpdates)([s.origin]),console.log("reaction successfully")}})),null==s?void 0:s.origin}))).apply(this,arguments)};t.requestPinnedPost=function(e){return(p=p||(0,C.default)((function*(e){var t=e.id,n=(yield P.Fetch.postWithToken("@"+P.Core.systemPath+"/inside/ajax/api/update/pin/pin",{id:t})).data;return(0,b.batch)((function(){n.update&&((0,E.syncUpdates)([n.update]),P.ToastService.show("Pinned successfully"))})),null==n?void 0:n.update}))).apply(this,arguments)};t.requestVoted=function(e){return(y=y||(0,C.default)((function*(e){var t=(yield P.Fetch.postWithToken("@"+P.Core.systemPath+"/inside/ajax/api/poll/vote",e)).data;(0,b.batch)((function(){if(t.update&&t.poll){(0,E.getUpdates)(e.id);(0,E.syncUpdates)([Object.assign({},t.update,{attachment:t.poll,truetype:"polls"})]),console.log("Voted successfully")}}))}))).apply(this,arguments)};t.requestLoadMoreUpdates=function(e){return(f=f||(0,C.default)((function*(e){console.log("ccc");var t=(yield P.Fetch.postWithToken("@"+P.Core.systemPath+"/inside/ajax/api/newsfeed/company",e)).data;return(0,b.batch)((function(){console.log(t.ptoken,"data.ptoken"),t.updates.length&&((0,j.setTokenUpdate)(t.ptoken),(0,E.syncUpdates)((0,S.default)(t.updates)),(0,E.setUpdatesQuery)((function(e){return Object.assign({},e,(0,_.default)({},"all",(0,S.default)(new Set([].concat((0,S.default)(e.all),(0,S.default)(t.updates.map((function(e){return e.id.toString()}))))))))})))})),t.updates}))).apply(this,arguments)};t.requestSearchUpdates=function(e){return(h=h||(0,C.default)((function*(e){var t=(yield P.Fetch.postWithToken("@"+P.Core.systemPath+"/inside/ajax/api/search/index?q="+e.q,e)).data;(0,b.batch)((function(){(0,E.syncUpdates)(t.updates),(0,E.setUpdatesQuery)((function(e){return Object.assign({},e,(0,_.default)({},"search",t.updates.map((function(e){return e.id.toString()}))))}))}))}))).apply(this,arguments)};t.requestCreatePoll=function(e){return(v=v||(0,C.default)((function*(e){var t=(yield P.Fetch.postWithToken("@"+P.Core.systemPath+"/inside/ajax/api/poll/create",e)).data;console.log(t),(0,b.batch)((function(){t.update&&((0,E.syncUpdates)([t.update]),(0,E.setUpdatesQuery)((function(e){return Object.assign({},e,(0,_.default)({},"all",(e.all||[]).concat(t.update.id.toString())))})))}))}))).apply(this,arguments)};t.requestEditPoll=function(e){return(m=m||(0,C.default)((function*(e){var t=(yield P.Fetch.postWithToken("@"+P.Core.systemPath+"/inside/ajax/api/poll/edit",e)).data;(0,b.batch)((function(){(0,E.syncUpdates)([t.update])}))}))).apply(this,arguments)};t.requestAddPollOptions=function(e){return(g=g||(0,C.default)((function*(e){var t,n=(yield P.Fetch.postWithToken("@"+P.Core.systemPath+"/inside/ajax/api/poll/options",(t={},(0,_.default)(t,"options[]",e.name),(0,_.default)(t,"id",e.id),(0,_.default)(t,"channel_id",e.channel_id),t))).data;(0,b.batch)((function(){if(null!=n&&n.poll){var e=(0,E.getUpdates)(n.update.id);(0,E.syncUpdates)([Object.assign({},e,{attachment:n.poll})])}}))}))).apply(this,arguments)}},60569:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.useUpdatesByQuery=t.useUpdates=t.syncUpdates=t.setUpdatesStore=t.setUpdatesQuery=t.getUpdatesByQuery=t.getUpdates=t.deleteUpdates=t.UpdatesReducer=void 0;var a=(0,n(4007).createArrayReducer)("updates",["id"]),s=a.reducer,r=a.setStore,u=a.sync,o=a.setQueries,i=a.useByKey,c=a.getByKey,d=a.useKeysByQuery,l=a.getKeysByQuery,p=a.deleteItem;t.deleteUpdates=p,t.getUpdatesByQuery=l,t.useUpdatesByQuery=d,t.getUpdates=c,t.useUpdates=i,t.setUpdatesQuery=o,t.syncUpdates=u,t.setUpdatesStore=r,t.UpdatesReducer=s},6093:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.initParamCreatePost=t.initParamCreatePoll=t.ETypeUpdate=t.EOrderUpdate=void 0;var n=function(e){return e.UPDATE="updated",e.CREATED="created",e}({});t.EOrderUpdate=n;t.initParamCreatePost={channel_id:0,metatype:"update",content:"",name:"","image-color":"","image-type":"image","image-bg":"","image-opacity":1,"image-percent":100};t.initParamCreatePoll={channel_id:0,name:"",multi:!1,has_etime:!1,has_stime:!1,etime:0,stime:0,allow_update:!1,allow_added:!1,has_limit:!1,limited_answers:3};var a=function(e){return e.UPDATE="update",e.STYLED="styled",e.WELCOME="welcome",e.TOPIC="topics",e.IDEA="idea",e.ANNOUNCEMENT="announcement",e.EXTERNAL="external",e.POLL="polls",e.EVENT="events",e.COMPANY_LETTER="companyletters",e.CORE_VALUE="companycorevalues",e}({});t.ETypeUpdate=a},85325:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.useTokenUpdate=t.setTokenUpdate=void 0;var s=a(n(69111)),r=a(n(14894)),u=n(14316),o=(0,r.default)((0,u.persist)((function(){return{value:""}}),{name:"TokenUpdate",getStorage:function(){return s.default}}));t.useTokenUpdate=function(){return o((function(e){return e.value||""}))};t.setTokenUpdate=function(e){o.setState({value:e})}},37535:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(84481);var s=!1,r={};t.default=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),u=1;u<t;u++)n[u-1]=arguments[u];var o=[],i=[],c=function(e){var t=a.createContext(r);s&&e&&(t.displayName=e),o.push(t),i.push(function(e){return function(){var t=a.useContext(e);if(s&&t===r){var n=e.displayName?"The context consumer of "+e.displayName+" must be wrapped with its corresponding Provider":"Component must be wrapped with Provider.";console.warn(n)}return t}}(t))};n.length?n.forEach((function(e){return c(e.name)})):c(e.name);var d=function(t){for(var s=t.children,r=function(e,t){if(null==e)return{};var n,a,s={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(t,["children"]),u=e(r),i=s,c=0;c<o.length;c+=1){var d=o[c],l=n[c]||function(e){return e};i=a.createElement(d.Provider,{value:l(u)},i)}return i};return s&&e.name&&(d.displayName="Constate"),[d].concat(i)}},50139:function(e,t,n){"use strict";var a=n(84481),s=n(36940);var r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},u=s.useSyncExternalStore,o=a.useRef,i=a.useEffect,c=a.useMemo,d=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,a,s){var l=o(null);if(null===l.current){var p={hasValue:!1,value:null};l.current=p}else p=l.current;l=c((function(){function e(e){if(!i){if(i=!0,u=e,e=a(e),void 0!==s&&p.hasValue){var t=p.value;if(s(t,e))return o=t}return o=e}if(t=o,r(u,e))return t;var n=a(e);return void 0!==s&&s(t,n)?t:(u=e,o=n)}var u,o,i=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,a,s]);var y=u(e,l[0],l[1]);return i((function(){p.hasValue=!0,p.value=y}),[y]),d(y),y}},52798:function(e,t,n){"use strict";e.exports=n(50139)},14894:function(e,t,n){"use strict";var a=n(77314),s=n(84481),r=n(52798).useSyncExternalStoreWithSelector;function u(e,t,n){void 0===t&&(t=e.getState);var a=r(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return s.useDebugValue(a),a}var o=function(e){var t="function"==typeof e?a.createStore(e):e,n=function(e,n){return u(t,e,n)};return Object.assign(n,t),n},i=function(e){return e?o(e):o},c=function(e){return i(e)};t.create=i,t.default=c,t.useStore=u,Object.keys(a).forEach((function(e){"default"===e||Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})})),e.exports=c,e.exports.create=i,e.exports.useStore=u,e.exports.createStore=a.createStore,t.default=e.exports},77314:function(e,t){"use strict";var n=function(e){var t,n=new Set,a=function(e,a){var s="function"==typeof e?e(t):e;if(!Object.is(s,t)){var r=t;t=(null!=a?a:"object"!=typeof s)?s:Object.assign({},t,s),n.forEach((function(e){return e(t,r)}))}},s=function(){return t},r={setState:a,getState:s,subscribe:function(e){return n.add(e),function(){return n.delete(e)}},destroy:function(){n.clear()}};return t=e(a,s,r),r},a=function(e){return e?n(e):n},s=function(e){return a(e)};t.createStore=a,t.default=s,e.exports=s,e.exports.createStore=a,t.default=e.exports},13560:function(e){"use strict";e.exports=JSON.parse('{"policy":{"all_policies":"All policies","pending_approval":"Pending approval","need_attestation":"Need attestation","followings":"Followings","home":"Home","main_information":"Main information","other_information":"Other information","overview":"Overview","attachments":"Attachments","general_details":"General details","discussions":"Discussions","document_review":"Document review","recipients":"Recipients","linked_documents":"Linked documents","followers":"Followers","seens":"Seens","no_more_doc":"No data"},"common/save":"Save","comp":{"save":"Save"}}')},39695:function(e){"use strict";e.exports=JSON.parse('{"policy":{"all_policies":"All policies","pending_approval":"Pending approval","need_attestation":"Need attestation","followings":"Followings","home":"Home","main_information":"Main information","other_information":"Other information","overview":"Overview","attachments":"Attachments","general_details":"General details","discussions":"Discussions","document_review":"Document review","recipients":"Recipients","linked_documents":"Linked documents","followers":"Followers","seens":"Seens","no_more_doc":"No data"},"common/save":"Save","comp":{"save":"Lưu"}}')}}]);//# sourceMappingURL=src_MiniApp_tsx.chunk.bundle.map?platform=ios