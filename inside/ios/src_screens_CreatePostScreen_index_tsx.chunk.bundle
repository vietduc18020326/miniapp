(self.webpackChunkInside=self.webpackChunkInside||[]).push([["src_screens_CreatePostScreen_index_tsx"],{92551:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarWithSelectChannel=void 0;var a,o,s,i,u=r(n(19452)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(84481)),A=n(4007),c=n(14025),d=n(91087),C=n(46763),p=n(33823);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}var h={code:"function anonymous(){const{widthButton}=this.__closure;return{width:widthButton.value};}",location:"/Users/phamduc/inside/src/components/AvatarWithSelectChannel/index.tsx",sourceMap:'{"version":3,"names":["anonymous","widthButton","__closure","width","value"],"sources":["/Users/phamduc/inside/src/components/AvatarWithSelectChannel/index.tsx"],"mappings":"AA0BI,SAAAA,UAAA,QAAAC,WAAA,OAAAC,SAAA,OAAO,CACLC,KAAK,CAAEF,WAAW,CAACG,KACrB,CAAC"}',version:"3.5.4"},m={code:"function anonymous(e){const{widthButton}=this.__closure;widthButton.value=e.nativeEvent.layout.width;}",location:"/Users/phamduc/inside/src/components/AvatarWithSelectChannel/index.tsx",sourceMap:'{"version":3,"names":["anonymous","e","widthButton","__closure","value","nativeEvent","layout","width"],"sources":["/Users/phamduc/inside/src/components/AvatarWithSelectChannel/index.tsx"],"mappings":"AAgCI,QAAC,CAAAA,SAAyBA,CAAAC,CAAA,QAAAC,WAAA,OAAAC,SAAA,CACxBD,WAAW,CAACE,KAAK,CAAGH,CAAC,CAACI,WAAW,CAACC,MAAM,CAACC,KAAK,CAChD"}',version:"3.5.4"},v=(0,l.memo)((function(e){var t,r,a=e.bottomSheetRef,o=e.label,s=e.typePost,i=(0,A.useMe)(),u=(0,C.useSharedValue)(200),l=(0,C.useAnimatedStyle)((t=[new n.g.Error,-2,-27],(r=function(){return{width:u.value}}).__closure={widthButton:u},r.__initData=h,r.__workletHash=8674385749251,r.__stackDetails=t,r),[]),f=(0,C.useWorkletCallback)(function(){var e=[new n.g.Error,-2,-27],t=function(e){u.value=e.nativeEvent.layout.width};return t.__closure={widthButton:u},t.__initData=m,t.__workletHash=0xcd259325f91,t.__stackDetails=e,t}(),[u]);return(0,p.jsxs)(g,{children:[(0,p.jsx)(d.Avatar,{size:48,userKey:(null==i?void 0:i.id)||"0",disableClick:!0}),(0,p.jsxs)(y,{children:[(0,p.jsxs)(d.UIText.BodyMedium500,{onLayout:f,children:[null==i?void 0:i.name," create ",s]}),(0,p.jsx)(x,{style:l,title:o||"Select channel",onPress:function(){var e;null==(e=a.current)||e.present()},children:(0,p.jsx)(_,{source:c.IC_OUTLINED_EXPAND_MORE})})]})]})}));t.AvatarWithSelectChannel=v;var g=A.styled.View(a||(a=(0,u.default)(["\n  flex-direction: row;\n  align-items: center;\n  gap: 12px;\n"]))),y=A.styled.View(o||(o=(0,u.default)(["\n  justify-content: center;\n  gap: 4px;\n"]))),x=(0,A.styled)(d.UIButton).attrs((function(e){return{textStyle:Object.assign({},d.UITextStyle.body_medium_400,{color:e.theme.neutral2,width:"85%"}),textProps:{numberOfLines:1}}}))(s||(s=(0,u.default)(["\n  flex-direction: row;\n  border-radius: 40px;\n  border-width: 1px;\n  border-color: ",";\n  justify-content: space-between;\n  align-items: center;\n  height: 32px;\n  padding-left: 16px;\n  padding-right: 8px;\n"])),(function(e){return e.theme.neutral5})),_=A.styled.Image(i||(i=(0,u.default)(["\n  width: 24px;\n  height: 24px;\n  tint-color: ",";\n"])),(function(e){return e.theme.neutral2}))},51705:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.MyInputBackground=void 0;var a,o,s,i,u,l,A,c,d=r(n(19452)),C=r(n(27424)),p=n(84481),f=n(4007),h=n(20349),m=n(14025),v=n(71527),g=n(22532),y=n(33823),x=(0,p.memo)((function(e){var t=e.onSelectedImage,n=e.image,r=(0,p.useState)(""),a=(0,C.default)(r,2),o=a[0],s=a[1],i=(0,p.useCallback)((function(e){s(e.url),t(e)}),[t]),u=(0,p.useCallback)((function(){(0,h.openCameraRollScreen)({onSubmit:i})}),[]),l=(0,p.useMemo)((function(){var e=o||n;return Object.values(v.BG_TEMPLATE).includes(e)?(0,g.getTemplateImage)(e):{uri:e}}),[o,n]);return(0,y.jsxs)(_,{children:[(0,y.jsx)(b,{children:"Background"}),(0,y.jsx)(j,{resizeMode:"cover",source:l,children:o||n?(0,y.jsx)(M,{hasImage:o||n,onPress:u,children:(0,y.jsx)(O,{hasImage:o||n,children:"Change"})}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(I,{children:[(0,y.jsx)(S,{source:m.IC_OUTLINED_IMAGE}),(0,y.jsx)(w,{children:"Upload your background"})]}),(0,y.jsx)(M,{hasImage:o||n,onPress:u,children:(0,y.jsx)(O,{children:"Choose file"})})]})})]})}));t.MyInputBackground=x;var _=f.styled.TouchableOpacity(a||(a=(0,d.default)(["\n  justify-content: center;\n  border-radius: 4px;\n  border: 1px solid #ebebeb;\n  padding: 0 16px 12px 16px;\n"]))),b=f.styled.Text(o||(o=(0,d.default)(["\n  font-family: ",";\n  font-size: 14px;\n  line-height: 20px;\n  color: ",";\n  margin-top: 8px;\n  margin-bottom: 4px;\n"])),f.Fonts.Regular,(function(e){return e.theme.neutral2})),j=f.styled.ImageBackground(s||(s=(0,d.default)(["\n  background-color: ",";\n  min-height: 180px;\n  border-radius: 8px;\n"])),(function(e){return e.theme.neutral9})),w=f.styled.Text(i||(i=(0,d.default)(["\n  font-family: ",";\n  font-size: 14px;\n  line-height: 20px;\n  color: ",";\n"])),f.Fonts.Regular,(function(e){return e.theme.neutral2})),M=f.styled.TouchableOpacity(u||(u=(0,d.default)(["\n  width: 120px;\n  height: 40px;\n  padding: 4px 16px;\n  justify-content: center;\n  align-items: center;\n  border-radius: 8px;\n  background: ",";\n  margin-top: ","px;\n  align-self: center;\n"])),(function(e){return e.hasImage?"rgba(0, 0, 0, 0.65)":"#EAEAEA"}),(function(e){return e.hasImage?68:12})),I=f.styled.View(l||(l=(0,d.default)(["\n  align-items: center;\n  justify-content: center;\n  margin-right: 4px;\n  margin-top: 36px;\n"]))),S=f.styled.Image(A||(A=(0,d.default)(["\n  width: 32px;\n  height: 32px;\n  tint-color: ",";\n"])),(function(e){return e.theme.neutral2})),O=f.styled.Text(c||(c=(0,d.default)(["\n  font-family: ",";\n  font-size: 14px;\n  line-height: 24px;\n  color: ",";\n"])),f.Fonts.Medium,(function(e){return e.hasImage?e.theme.white:e.theme.neutral2}))},70075:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderCreatePost=void 0;var a,o,s=r(n(19452)),i=n(84481),u=n(25736),l=n(4007),A=n(14025),c=n(91087),d=n(25200),C=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(46763)),p=n(33823);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}var h={code:"function anonymous(){const{aTop}=this.__closure;return{paddingTop:aTop.value};}",location:"/Users/phamduc/inside/src/screens/CreatePostScreen/HeaderCreatePost.tsx",sourceMap:'{"version":3,"names":["anonymous","aTop","__closure","paddingTop","value"],"sources":["/Users/phamduc/inside/src/screens/CreatePostScreen/HeaderCreatePost.tsx"],"mappings":"AAwB8C,SAAAA,UAAA,QAAAC,IAAA,OAAAC,SAAA,OAAO,CACjDC,UAAU,CAAEF,IAAI,CAACG,KACnB,CAAC"}',version:"3.5.4"},m={code:"function anonymous(){const{interpolateColor,active,theme}=this.__closure;return{backgroundColor:interpolateColor(active.value?1:0,[0,1],[theme.neutral3,theme.primaryColor]),width:'100%'};}",location:"/Users/phamduc/inside/src/screens/CreatePostScreen/HeaderCreatePost.tsx",sourceMap:'{"version":3,"names":["anonymous","interpolateColor","active","theme","__closure","backgroundColor","value","neutral3","primaryColor","width"],"sources":["/Users/phamduc/inside/src/screens/CreatePostScreen/HeaderCreatePost.tsx"],"mappings":"AA8B4C,SAAAA,SAAMA,CAAA,QAAAC,gBAAA,CAAAC,MAAA,CAAAC,KAAA,OAAAC,SAAA,CAC9C,MAAO,CACLC,eAAe,CAAEJ,gBAAgB,CAC/BC,MAAM,CAACI,KAAK,CAAG,CAAC,CAAG,CAAC,CACpB,CAAC,CAAC,CAAE,CAAC,CAAC,CACN,CAACH,KAAK,CAACI,QAAQ,CAAEJ,KAAK,CAACK,YAAY,CACrC,CAAC,CACDC,KAAK,CAAE,MACT,CAAC,CACH"}',version:"3.5.4"},v={code:"function anonymous(){const{active}=this.__closure;return{pointerEvents:active.value?'auto':'none'};}",location:"/Users/phamduc/inside/src/screens/CreatePostScreen/HeaderCreatePost.tsx",sourceMap:'{"version":3,"names":["anonymous","active","__closure","pointerEvents","value"],"sources":["/Users/phamduc/inside/src/screens/CreatePostScreen/HeaderCreatePost.tsx"],"mappings":"AAyCyC,SAAAA,SAAMA,CAAA,QAAAC,MAAA,OAAAC,SAAA,CAC3C,MAAO,CACLC,aAAa,CAAEF,MAAM,CAACG,KAAK,CAAG,MAAM,CAAG,MACzC,CAAC,CACH"}',version:"3.5.4"},g=(0,i.memo)((function(e){var t,r,a=(0,d.useAnimatedSafeAreaInsets)().aTop,o=(0,C.useAnimatedStyle)((t=[new n.g.Error,-2,-27],(r=function(){return{paddingTop:a.value}}).__closure={aTop:a},r.__initData=h,r.__workletHash=9978501313055,r.__stackDetails=t,r)),s=(0,l.useTheme)(),i=e.title,f=e.active,g=e.id,_=e.onPress,b=(e.loading,e.onGoBack),j=(0,C.useAnimatedStyle)(function(){var e=[new n.g.Error,-4,-27],t=function(){return{backgroundColor:(0,C.interpolateColor)(f.value?1:0,[0,1],[s.neutral3,s.primaryColor]),width:"100%"}};return t.__closure={interpolateColor:C.interpolateColor,active:f,theme:s},t.__initData=m,t.__workletHash=0xefaedf5ccd0,t.__stackDetails=e,t}(),[s]),w=(0,C.useAnimatedProps)(function(){var e=[new n.g.Error,-2,-27],t=function(){return{pointerEvents:f.value?"auto":"none"}};return t.__closure={active:f},t.__initData=v,t.__workletHash=0xcd0f6a5dae1,t.__stackDetails=e,t}());return(0,p.jsxs)(y,{style:o,children:[(0,p.jsxs)(u.FlexCenter,{gap:8,children:[(0,p.jsx)(c.UIButton,{source:A.IC_OUTLINED_LEFT,onPress:b||l.goBack}),(0,p.jsx)(c.UIText.HeaderLarge,{children:i})]}),(0,p.jsx)(C.default.View,{animatedProps:w,children:(0,p.jsx)(x,{title:g?"Update":"Create",onPress:_,style:j})})]})}));t.HeaderCreatePost=g;var y=(0,l.styled)(C.default.View)(a||(a=(0,s.default)(["\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom-color: ",";\n  border-bottom-width: 1px;\n  padding: 6px 16px;\n  background-color: white;\n"])),(function(e){return e.theme.neutral4})),x=(0,l.styled)(c.UIButton).attrs((function(e){return{textStyle:Object.assign({},c.UITextStyle.body_medium_500,{color:"#fff"})}}))(o||(o=(0,s.default)(["\n  width: 94px;\n  height: 32px;\n  border-radius: 8px;\n  align-items: center;\n  justify-content: center;\n  padding: 4px 16px;\n  background-color: ",";\n"])),(function(e){return e.theme.primaryColor}))},85382:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.CreatePostScreen=void 0;var a,o,s,i,u=r(n(19452)),l=r(n(38416)),A=r(n(17156)),c=r(n(27424)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(84481)),C=n(91087),p=n(11361),f=n(4007),h=n(46763),m=n(6093),v=n(70075),g=n(73781),y=n(25736),x=n(60569),_=n(48764),b=n(92910),j=n(36571),w=n(51705),M=n(33435),I=n(19855),S=n(92551),O=r(n(78663)),P=n(92571),k=n(33823);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}var U={code:"function anonymous(){const{channel_id,params}=this.__closure;if(channel_id){return!!params.value.content;}return!!params.value.content;}",location:"/Users/phamduc/inside/src/screens/CreatePostScreen/index.tsx",sourceMap:'{"version":3,"names":["anonymous","channel_id","params","__closure","value","content"],"sources":["/Users/phamduc/inside/src/screens/CreatePostScreen/index.tsx"],"mappings":"AA8I4C,SAAAA,SAAMA,CAAA,QAAAC,UAAA,CAAAC,MAAA,OAAAC,SAAA,CAC9C,GAAIF,UAAU,CAAE,CACd,MAAO,CAAC,CAACC,MAAM,CAACE,KAAK,CAACC,OAAO,CAC/B,CAEA,MAAO,CAAC,CAACH,MAAM,CAACE,KAAK,CAACC,OAAO,CAC/B"}',version:"3.5.4"},T={code:"function anonymous(_key,_value){const{params}=this.__closure;params.value={...params.value,[_key]:_value};}",location:"/Users/phamduc/inside/src/screens/CreatePostScreen/index.tsx",sourceMap:'{"version":3,"names":["anonymous","_key","_value","params","__closure","value"],"sources":["/Users/phamduc/inside/src/screens/CreatePostScreen/index.tsx"],"mappings":"AAwKc,QAAC,CAAAA,SAAcA,CAAAC,IAAM,CAAKC,MAAA,QAAAC,MAAA,OAAAC,SAAA,CAGhCD,MAAM,CAACE,KAAK,CAAG,CACb,GAAGF,MAAM,CAACE,KAAK,CACf,CAACJ,IAAI,EAAGC,MACV,CAAC,CACH"}',version:"3.5.4"},B=(0,d.memo)((function(){var e=(0,f.useNavigationParams)(),t=e.type,r=e.id,a=e.channel_id,o=(0,d.useRef)(null),s=(0,h.useAnimatedRef)(),i=(0,h.useSharedValue)(m.initParamCreatePost),u=(0,f.useBoolean)(),E=(0,c.default)(u,3),B=E[0],G=(E[1],E[2]),V=(0,d.useRef)(null),N=(0,g.useChannelsByQuery)("joined").map((function(e){var t;return{label:(null==(t=(0,g.getChannels)(e))?void 0:t.name)||"Undefined channel",value:e}})),L=(0,d.useState)(""),F=(0,c.default)(L,2),Q=F[0],R=F[1],J=(0,d.useRef)(null);(0,d.useEffect)((function(){if(N&&N.length>0){var e=N.find((function(e){return e.value===i.value.channel_id.toString()}));e&&R(e.label)}}),[i,R,N]);var q=(0,d.useCallback)((function(e){J.current=e,i.value["image-bg"]=e.url}),[J,i]),z=(0,f.useAsyncFn)((0,A.default)((function*(){var e=i.value["image-bg"];J.current&&(e=yield(0,y.uploadImage)(J.current));var n=Object.assign({},i.value,{metatype:t,"image-bg":e});r?yield(0,j.requestEditPost)(n):(yield(0,j.requestCreatePost)(n),f.ToastService.show("Create post successfully")),(0,f.goBack)()})),[r,J,i]),Y=(0,c.default)(z,2),X=Y[0],Z=X.loading,$=X.error,ee=Y[1];(0,f.useAutoToastError)($);var te=(0,d.useCallback)((function(){console.log("aaa"),(0,f.goBack)()}),[]);(0,d.useEffect)((function(){var e=Object.assign({},m.initParamCreatePost);if(r){var n=(0,x.getUpdates)(r),a=JSON.parse(_.Buffer.from((null==n?void 0:n.image)||"eyJ0eXBlIjoiIiwiY29sb3IiOiIiLCJvcGFjaXR5IjowLCJwZXJjZW50IjoxMDAsImltYWdlIjoiIiwidGV4dHMiOltdfQ","base64").toString("utf-8"));e={id:null==n?void 0:n.id,channel_id:(null==n?void 0:n.channel_id)||0,metatype:t,content:(null==n?void 0:n.content)||"","file[]":[],name:(null==n?void 0:n.name)||"","image-bg":null==a?void 0:a.image}}i.value=e}),[i,t]);var ne,re,ae=(0,h.useDerivedValue)((ne=[new n.g.Error,-3,-27],(re=function(){return!!i.value.content}).__closure={channel_id:a,params:i},re.__initData=U,re.__workletHash=2192383653013,re.__stackDetails=ne,re),[a]),oe=(0,d.useCallback)((function(e,t){return(0,k.jsx)(I.MenuItem,{title:e.label,onPress:function(){var t;se("channel_id",e.value),R(e.label),null==(t=V.current)||t.dismiss()}},t)}),[V]),se=(0,d.useCallback)((function(e,t){(0,h.runOnUI)(function(){var e=[new n.g.Error,-2,-27],t=function(e,t){i.value=Object.assign({},i.value,(0,l.default)({},e,t))};return t.__closure={params:i},t.__initData=T,t.__workletHash=690685769123,t.__stackDetails=e,t}())(e,t)}),[i]);return(0,k.jsx)(C.FullScreenWrapper,{isGrey:!0,children:(0,k.jsxs)(C.MyKeyboardAvoidingView,{ref:o,scrollRef:s,children:[(0,k.jsx)(v.HeaderCreatePost,{title:r?"Edit update":"Create update",active:ae,onPress:ee,loading:Z,id:r,onGoBack:te}),(0,k.jsx)(O.default,{isVisible:Z}),(0,k.jsx)(W,{ref:s,keyboardShouldPersistTaps:"handled",children:(0,k.jsxs)(D,{children:[(0,k.jsxs)(P.View,{style:{gap:12},children:[(0,k.jsx)(C.UIText.HeaderMedium,{children:"General information"}),(0,k.jsx)(S.AvatarWithSelectChannel,{bottomSheetRef:V,label:Q,typePost:t}),(0,k.jsxs)(K,{children:[t===m.ETypeUpdate.ANNOUNCEMENT||t===m.ETypeUpdate.WELCOME?(0,k.jsx)(w.MyInputBackground,{onSelectedImage:q,image:i.value["image-bg"]}):null,t==m.ETypeUpdate.ANNOUNCEMENT||t===m.ETypeUpdate.IDEA?(0,k.jsx)(C.UIInput.Text,{keyName:"name",params:i,title:"announcement"===t?"Title":"The idea",onChangeValue:se,placeholder:"---",required:!0}):null,t==m.ETypeUpdate.WELCOME?(0,k.jsx)(C.UIInput.UserPicker,{title:"Select people",type:"user",keyName:"usernames",params:i,onChangeValue:se,multiple:!0,placeholder:"---",required:!0}):null,t==m.ETypeUpdate.UPDATE||t===m.ETypeUpdate.IDEA?(0,k.jsx)(H,{title:"idea"===t?"Extra description":"Share with your team",keyName:"content",params:i,placeholder:"---",defaultValue:"",required:!0,multiline:!0}):(0,k.jsx)(C.UITextInput,{title:"Content",keyName:"content",params:i,defaultValue:"",required:!0}),(0,k.jsx)(C.UIInput.Attachment,{title:"Attach files or Images",keyName:"file[]",params:i,onChangeValue:se})]})]}),(0,k.jsx)(p.AnimatedBottomSpace,{})]})}),(0,k.jsx)(b.DiscardDialog,{title:"Discard change",content:"You have made changes to this item that have not been saved. If you leave this page, your changes will be lost.",visible:B,onClose:G}),(0,k.jsx)(M.BottomSheetMenu,{name:"channel",ref:V,items:N,renderMenuItem:oe,titleHeader:"Select channel"})]})})}));t.CreatePostScreen=B;var D=f.styled.View(a||(a=(0,u.default)(["\n  padding: 12px 16px;\n"]))),K=f.styled.View(o||(o=(0,u.default)(["\n  gap: 8px;\n"]))),W=f.styled.ScrollView(s||(s=(0,u.default)(["\n  flex: 1;\n  background-color: white;\n  margin-top: 8px;\n"]))),H=(0,f.styled)(C.UITextInput).attrs((function(e){return{textStyle:{minHeight:320}}}))(i||(i=(0,u.default)([""])))}}]);//# sourceMappingURL=src_screens_CreatePostScreen_index_tsx.chunk.bundle.map?platform=ios