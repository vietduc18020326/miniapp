(self.webpackChunkInside=self.webpackChunkInside||[]).push([["src_screens_CreatePostScreen_index_tsx"],{92551:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarWithSelectChannel=void 0;var a,o,i,l,u=r(n(19452)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(84481)),c=n(4007),d=n(25277),f=n(91087),p=n(46763),h=n(33823);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}var y={code:"function anonymous(){const{widthButton}=this.__closure;return{width:widthButton.value};}"},g={code:"function anonymous(e){const{widthButton}=this.__closure;widthButton.value=e.nativeEvent.layout.width;}"},v=(t.AvatarWithSelectChannel=(0,s.memo)((function(e){var t,n=e.bottomSheetRef,r=e.label,a=e.typePost,o=(0,c.useMe)(),i=(0,p.useSharedValue)(200),l=(0,p.useAnimatedStyle)(((t=function(){return{width:i.value}}).__closure={widthButton:i},t.__initData=y,t.__workletHash=8674385749251,t),[]),u=(0,p.useWorkletCallback)(function(){var e=function(e){i.value=e.nativeEvent.layout.width};return e.__closure={widthButton:i},e.__initData=g,e.__workletHash=0xcd259325f91,e}(),[i]);return(0,h.jsxs)(v,{children:[(0,h.jsx)(f.Avatar,{size:48,userKey:(null==o?void 0:o.id)||"0",disableClick:!0}),(0,h.jsxs)(x,{children:[(0,h.jsxs)(f.UIText.BodyMedium500,{onLayout:u,children:[null==o?void 0:o.name," create ",a]}),(0,h.jsx)(_,{style:l,title:r||"Select channel",onPress:function(){var e;null==(e=n.current)||e.present()},children:(0,h.jsx)(b,{source:d.IC_OUTLINED_EXPAND_MORE})})]})]})})),c.styled.View(a||(a=(0,u.default)(["\n  flex-direction: row;\n  align-items: center;\n  gap: 12px;\n"])))),x=c.styled.View(o||(o=(0,u.default)(["\n  justify-content: center;\n  gap: 4px;\n"]))),_=(0,c.styled)(f.UIButton).attrs((function(e){return{textStyle:Object.assign({},f.UITextStyle.body_medium_400,{color:e.theme.neutral2,width:"85%"}),textProps:{numberOfLines:1}}}))(i||(i=(0,u.default)(["\n  flex-direction: row;\n  border-radius: 40px;\n  border-width: 1px;\n  border-color: ",";\n  justify-content: space-between;\n  align-items: center;\n  height: 32px;\n  padding-left: 16px;\n  padding-right: 8px;\n"])),(function(e){return e.theme.neutral5})),b=c.styled.Image(l||(l=(0,u.default)(["\n  width: 24px;\n  height: 24px;\n  tint-color: ",";\n"])),(function(e){return e.theme.neutral2}))},51705:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.MyInputBackground=void 0;var a,o,i,l,u,s,c,d,f=r(n(19452)),p=r(n(27424)),h=n(84481),m=n(4007),y=n(20349),g=n(25277),v=n(71527),x=n(22532),_=n(33823),b=(t.MyInputBackground=(0,h.memo)((function(e){var t=e.onSelectedImage,n=e.image,r=(0,h.useState)(""),a=(0,p.default)(r,2),o=a[0],i=a[1],l=(0,h.useCallback)((function(e){i(e.url),t(e)}),[t]),u=(0,h.useCallback)((function(){(0,y.openCameraRollScreen)({onSubmit:l})}),[]),s=(0,h.useMemo)((function(){var e=o||n;return Object.values(v.BG_TEMPLATE).includes(e)?(0,x.getTemplateImage)(e):{uri:e}}),[o,n]);return(0,_.jsxs)(b,{children:[(0,_.jsx)(j,{children:"Background"}),(0,_.jsx)(w,{resizeMode:"cover",source:s,children:o||n?(0,_.jsx)(k,{hasImage:o||n,onPress:u,children:(0,_.jsx)(O,{hasImage:o||n,children:"Change"})}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(C,{children:[(0,_.jsx)(P,{source:g.IC_OUTLINED_IMAGE}),(0,_.jsx)(I,{children:"Upload your background"})]}),(0,_.jsx)(k,{hasImage:o||n,onPress:u,children:(0,_.jsx)(O,{children:"Choose file"})})]})})]})})),m.styled.TouchableOpacity(a||(a=(0,f.default)(["\n  justify-content: center;\n  border-radius: 4px;\n  border: 1px solid #ebebeb;\n  padding: 0 16px 12px 16px;\n"])))),j=m.styled.Text(o||(o=(0,f.default)(["\n  font-family: ",";\n  font-size: 14px;\n  line-height: 20px;\n  color: ",";\n  margin-top: 8px;\n  margin-bottom: 4px;\n"])),m.Fonts.Regular,(function(e){return e.theme.neutral2})),w=m.styled.ImageBackground(i||(i=(0,f.default)(["\n  background-color: ",";\n  min-height: 180px;\n  border-radius: 8px;\n"])),(function(e){return e.theme.neutral9})),I=m.styled.Text(l||(l=(0,f.default)(["\n  font-family: ",";\n  font-size: 14px;\n  line-height: 20px;\n  color: ",";\n"])),m.Fonts.Regular,(function(e){return e.theme.neutral2})),k=m.styled.TouchableOpacity(u||(u=(0,f.default)(["\n  width: 120px;\n  height: 40px;\n  padding: 4px 16px;\n  justify-content: center;\n  align-items: center;\n  border-radius: 8px;\n  background: ",";\n  margin-top: ","px;\n  align-self: center;\n"])),(function(e){return e.hasImage?"rgba(0, 0, 0, 0.65)":"#EAEAEA"}),(function(e){return e.hasImage?68:12})),C=m.styled.View(s||(s=(0,f.default)(["\n  align-items: center;\n  justify-content: center;\n  margin-right: 4px;\n  margin-top: 36px;\n"]))),P=m.styled.Image(c||(c=(0,f.default)(["\n  width: 32px;\n  height: 32px;\n  tint-color: ",";\n"])),(function(e){return e.theme.neutral2})),O=m.styled.Text(d||(d=(0,f.default)(["\n  font-family: ",";\n  font-size: 14px;\n  line-height: 24px;\n  color: ",";\n"])),m.Fonts.Medium,(function(e){return e.hasImage?e.theme.white:e.theme.neutral2}))},70075:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderCreatePost=void 0;var a,o,i=r(n(19452)),l=n(84481),u=n(25736),s=n(4007),c=n(25277),d=n(91087),f=n(25200),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(46763)),h=n(33823);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}var y={code:"function anonymous(){const{aTop}=this.__closure;return{paddingTop:aTop.value};}"},g={code:"function anonymous(){const{interpolateColor,active,theme}=this.__closure;return{backgroundColor:interpolateColor(active.value?1:0,[0,1],[theme.neutral3,theme.primaryColor]),width:'100%'};}"},v={code:"function anonymous(){const{active}=this.__closure;return{pointerEvents:active.value?'auto':'none'};}"},x=(t.HeaderCreatePost=(0,l.memo)((function(e){var t,n=(0,f.useAnimatedSafeAreaInsets)().aTop,r=(0,p.useAnimatedStyle)(((t=function(){return{paddingTop:n.value}}).__closure={aTop:n},t.__initData=y,t.__workletHash=9978501313055,t)),a=(0,s.useTheme)(),o=e.title,i=e.active,l=e.id,m=e.onPress,b=(e.loading,e.onGoBack),j=(0,p.useAnimatedStyle)(function(){var e=function(){return{backgroundColor:(0,p.interpolateColor)(i.value?1:0,[0,1],[a.neutral3,a.primaryColor]),width:"100%"}};return e.__closure={interpolateColor:p.interpolateColor,active:i,theme:a},e.__initData=g,e.__workletHash=0xefaedf5ccd0,e}(),[a]),w=(0,p.useAnimatedProps)(function(){var e=function(){return{pointerEvents:i.value?"auto":"none"}};return e.__closure={active:i},e.__initData=v,e.__workletHash=0xcd0f6a5dae1,e}());return(0,h.jsxs)(x,{style:r,children:[(0,h.jsxs)(u.FlexCenter,{gap:8,children:[(0,h.jsx)(d.UIButton,{source:c.IC_OUTLINED_LEFT,onPress:b||s.goBack}),(0,h.jsx)(d.UIText.HeaderLarge,{children:o})]}),(0,h.jsx)(p.default.View,{animatedProps:w,children:(0,h.jsx)(_,{title:l?"Update":"Create",onPress:m,style:j})})]})})),(0,s.styled)(p.default.View)(a||(a=(0,i.default)(["\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom-color: ",";\n  border-bottom-width: 1px;\n  padding: 6px 16px;\n  background-color: white;\n"])),(function(e){return e.theme.neutral4}))),_=(0,s.styled)(d.UIButton).attrs((function(e){return{textStyle:Object.assign({},d.UITextStyle.body_medium_500,{color:"#fff"})}}))(o||(o=(0,i.default)(["\n  width: 94px;\n  height: 32px;\n  border-radius: 8px;\n  align-items: center;\n  justify-content: center;\n  padding: 4px 16px;\n  background-color: ",";\n"])),(function(e){return e.theme.primaryColor}))},85382:function(e,t,n){var r=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.CreatePostScreen=void 0;var a,o,i,l,u=r(n(19452)),s=r(n(38416)),c=r(n(17156)),d=r(n(27424)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(84481)),p=n(91087),h=n(11361),m=n(4007),y=n(46763),g=n(6093),v=n(70075),x=n(73781),_=n(25736),b=n(60569),j=n(48764),w=n(92910),I=n(36571),k=n(51705),C=n(33435),P=n(19855),O=n(92551),T=r(n(78663)),E=n(92571),M=n(33823);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}var U={code:"function anonymous(){const{channel_id,params}=this.__closure;if(channel_id){return!!params.value.content;}return!!params.value.content;}"},A={code:"function anonymous(_key,_value){const{params}=this.__closure;params.value={...params.value,[_key]:_value};}"},B=(t.CreatePostScreen=(0,f.memo)((function(){var e=(0,m.useNavigationParams)(),t=e.type,n=e.id,r=e.channel_id,a=(0,f.useRef)(null),o=(0,y.useAnimatedRef)(),i=(0,y.useSharedValue)(g.initParamCreatePost),l=(0,m.useBoolean)(),u=(0,d.default)(l,3),S=u[0],W=(u[1],u[2]),H=(0,f.useRef)(null),L=(0,x.useChannelsByQuery)("joined").map((function(e){var t;return{label:(null==(t=(0,x.getChannels)(e))?void 0:t.name)||"Undefined channel",value:e}})),R=(0,f.useState)(""),F=(0,d.default)(R,2),G=F[0],q=F[1],z=(0,f.useRef)(null);(0,f.useEffect)((function(){if(L&&L.length>0){var e=L.find((function(e){return e.value===i.value.channel_id.toString()}));e&&q(e.label)}}),[i,q,L]);var J=(0,f.useCallback)((function(e){z.current=e,i.value["image-bg"]=e.url}),[z,i]),X=(0,m.useAsyncFn)((0,c.default)((function*(){var e=i.value["image-bg"];z.current&&(e=yield(0,_.uploadImage)(z.current));var r=Object.assign({},i.value,{metatype:t,"image-bg":e});n?yield(0,I.requestEditPost)(r):(yield(0,I.requestCreatePost)(r),m.ToastService.show("Create post successfully")),(0,m.goBack)()})),[n,z,i]),Y=(0,d.default)(X,2),K=Y[0],Q=K.loading,Z=K.error,$=Y[1];(0,m.useAutoToastError)(Z);var ee=(0,f.useCallback)((function(){console.log("aaa"),(0,m.goBack)()}),[]);(0,f.useEffect)((function(){var e=Object.assign({},g.initParamCreatePost);if(n){var r=(0,b.getUpdates)(n),a=JSON.parse(j.Buffer.from((null==r?void 0:r.image)||"eyJ0eXBlIjoiIiwiY29sb3IiOiIiLCJvcGFjaXR5IjowLCJwZXJjZW50IjoxMDAsImltYWdlIjoiIiwidGV4dHMiOltdfQ","base64").toString("utf-8")||"");e={id:null==r?void 0:r.id,channel_id:(null==r?void 0:r.channel_id)||0,metatype:t,content:(null==r?void 0:r.content)||"","file[]":[],name:(null==r?void 0:r.name)||"","image-bg":null==a?void 0:a.image}}i.value=e}),[i,t]);var te,ne=(0,y.useDerivedValue)(((te=function(){return!!i.value.content}).__closure={channel_id:r,params:i},te.__initData=U,te.__workletHash=2192383653013,te),[r]),re=(0,f.useCallback)((function(e,t){return(0,M.jsx)(P.MenuItem,{title:e.label,onPress:function(){var t;ae("channel_id",e.value),q(e.label),null==(t=H.current)||t.dismiss()}},t)}),[H]),ae=(0,f.useCallback)((function(e,t){(0,y.runOnUI)(function(){var e=function(e,t){i.value=Object.assign({},i.value,(0,s.default)({},e,t))};return e.__closure={params:i},e.__initData=A,e.__workletHash=690685769123,e}())(e,t)}),[i]);return(0,M.jsx)(p.FullScreenWrapper,{isGrey:!0,children:(0,M.jsxs)(p.MyKeyboardAvoidingView,{ref:a,scrollRef:o,children:[(0,M.jsx)(v.HeaderCreatePost,{title:n?"Edit update":"Create update",active:ne,onPress:$,loading:Q,id:n,onGoBack:ee}),(0,M.jsx)(T.default,{isVisible:Q}),(0,M.jsx)(V,{ref:o,keyboardShouldPersistTaps:"handled",children:(0,M.jsxs)(B,{children:[(0,M.jsxs)(E.View,{style:{gap:12},children:[(0,M.jsx)(p.UIText.HeaderMedium,{children:"General information"}),(0,M.jsx)(O.AvatarWithSelectChannel,{bottomSheetRef:H,label:G,typePost:t}),(0,M.jsxs)(D,{children:[t===g.ETypeUpdate.ANNOUNCEMENT||t===g.ETypeUpdate.WELCOME?(0,M.jsx)(k.MyInputBackground,{onSelectedImage:J,image:i.value["image-bg"]}):null,t==g.ETypeUpdate.ANNOUNCEMENT||t===g.ETypeUpdate.IDEA?(0,M.jsx)(p.UIInput.Text,{keyName:"name",params:i,title:"announcement"===t?"Title":"The idea",onChangeValue:ae,placeholder:"---",required:!0}):null,t==g.ETypeUpdate.WELCOME?(0,M.jsx)(p.UIInput.UserPicker,{title:"Select people",type:"user",keyName:"usernames",params:i,onChangeValue:ae,multiple:!0,placeholder:"---",required:!0}):null,t==g.ETypeUpdate.UPDATE||t===g.ETypeUpdate.IDEA?(0,M.jsx)(N,{title:"idea"===t?"Extra description":"Share with your team",keyName:"content",params:i,placeholder:"---",defaultValue:"",required:!0,multiline:!0}):(0,M.jsx)(p.UITextInput,{title:"Content",keyName:"content",params:i,defaultValue:"",required:!0}),(0,M.jsx)(p.UIInput.Attachment,{title:"Attach files or Images",keyName:"file[]",params:i,onChangeValue:ae})]})]}),(0,M.jsx)(h.AnimatedBottomSpace,{})]})}),(0,M.jsx)(w.DiscardDialog,{title:"Discard change",content:"You have made changes to this item that have not been saved. If you leave this page, your changes will be lost.",visible:S,onClose:W}),(0,M.jsx)(C.BottomSheetMenu,{name:"channel",ref:H,items:L,renderMenuItem:re,titleHeader:"Select channel"})]})})})),m.styled.View(a||(a=(0,u.default)(["\n  padding: 12px 16px;\n"])))),D=m.styled.View(o||(o=(0,u.default)(["\n  gap: 8px;\n"]))),V=m.styled.ScrollView(i||(i=(0,u.default)(["\n  flex: 1;\n  background-color: white;\n  margin-top: 8px;\n"]))),N=(0,m.styled)(p.UITextInput).attrs((function(e){return{textStyle:{minHeight:320}}}))(l||(l=(0,u.default)([""])))}}]);//# sourceMappingURL=src_screens_CreatePostScreen_index_tsx.chunk.bundle.map?platform=ios