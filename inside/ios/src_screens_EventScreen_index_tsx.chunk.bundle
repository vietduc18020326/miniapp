(self.webpackChunkInside=self.webpackChunkInside||[]).push([["src_screens_EventScreen_index_tsx"],{83899:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.EventThumbnail=void 0;var r,i,s,u,o,l,d,c,f,v,p,h,y=a(n(19452)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(84481)),x=n(4007),g=a(n(30381)),m=n(20349),j=n(75867),E=n(48764),k=a(n(82825)),O=n(73781),q=n(33823);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}var P=(0,b.memo)((function(e){var t=e.id,n=(0,j.useEvents)(t),a=JSON.parse(E.Buffer.from((null==n?void 0:n.cover)||"","base64").toString("utf-8")),r=(0,b.useCallback)((function(){(0,m.openDetailEventScreen)({id:t})}),[]),i=(0,b.useMemo)((function(){var e;return null==(e=(0,O.getChannels)((null==n?void 0:n.channel_id)||""))?void 0:e.name}),[]);return(0,q.jsx)(C,{children:(0,q.jsxs)(T,{onPress:r,children:[(0,q.jsxs)(S,{children:[(0,q.jsx)(I,{children:(0,q.jsx)(z,{children:i})}),(0,q.jsx)(F,{resizeMode:"cover",source:{uri:a.image}})]}),(0,q.jsxs)(M,{children:[(0,q.jsx)(_,{children:(0,g.default)(1e3*(null==n?void 0:n.time)).format("dddd, HH:mm DD/MM/YYYY")}),(0,q.jsx)(Q,{children:null==n?void 0:n.name}),(0,q.jsxs)(W,{children:[(0,q.jsx)(V,{children:(null==n?void 0:n.attendees.length)+" attendees"}),(0,q.jsx)(D,{}),(0,q.jsx)(V,{children:null==n?void 0:n.address})]})]})]})})}));t.EventThumbnail=P;var C=x.styled.View(r||(r=(0,y.default)(["\n  background-color: transparent;\n"]))),T=x.styled.TouchableOpacity(i||(i=(0,y.default)(["\n  background-color: white;\n  border-radius: 8px;\n  border: 1px solid #ebebeb;\n  margin: 16px 16px 0 16px;\n  padding: 12px;\n"]))),S=x.styled.View(s||(s=(0,y.default)(["\n  width: 100%;\n"]))),F=(0,x.styled)(k.default)(u||(u=(0,y.default)(["\n  width: 100%;\n  height: 180px;\n  max-height: 180px;\n  border-radius: 8px;\n  background-color: #2a91d6;\n"]))),M=x.styled.View(o||(o=(0,y.default)(["\n  align-items: flex-start;\n  justify-content: center;\n"]))),W=x.styled.View(l||(l=(0,y.default)(["\n  flex-direction: row;\n  align-items: center;\n"]))),_=x.styled.Text(d||(d=(0,y.default)(["\n  color: ",";\n  font-family: ",";\n  font-size: 14px;\n  line-height: 20px;\n  margin-top: 8px\n"])),(function(e){return e.theme.neutral2}),x.Fonts.Medium),Q=x.styled.Text.attrs((function(e){return{numberOfLines:2}}))(c||(c=(0,y.default)(["\n  color: ",";\n  font-family: ",";\n  font-size: 16px;\n  line-height: 24px; \n  margin-top: 4px\n"])),(function(e){return e.theme.neutral1}),x.Fonts.Regular),V=x.styled.Text(f||(f=(0,y.default)(["\n  color: ",";\n  font-family: ",";\n  font-size: 12px;\n  line-height: 16px;\n  margin-top: 8px\n"])),(function(e){return e.theme.neutral2}),x.Fonts.Medium),D=x.styled.View(v||(v=(0,y.default)(["\n  background-color: ",";\n  width: 4px;\n  height: 4px;\n  border-radius: 2px;\n  margin: 8px 6px 0 6px;\n"])),(function(e){return e.theme.neutral3})),I=x.styled.View(p||(p=(0,y.default)(["\n  display: inline-flex;\n  padding: 4px 8px;\n  justify-content: center;\n  align-items: center;\n  gap: 4px;\n  border-radius: 40px;\n  background-color: rgba(0, 0, 0, 0.65);\n  position: absolute;\n  top:8px;\n  left: 8px;\n  z-index: 10;\n"]))),z=x.styled.Text(h||(h=(0,y.default)(["\n  color: #fff;\n  /* Caption/caption-medium-500 */\n  font-family: ",";\n  font-size: 12px;\n  line-height: 16px; /* 133.333% */\n"])),x.Fonts.Medium)},5639:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.EventScreen=void 0;var r=a(n(17156)),i=a(n(27424)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=r?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}a.default=e,n&&n.set(e,a);return a}(n(84481)),u=n(55766),o=n(4007),l=n(20349),d=n(91087),c=n(83899),f=n(75867),v=n(79837),p=n(33823);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}var y=(0,s.memo)((function(){var e,t=(0,s.useState)({}),n=(0,i.default)(t,2),a=n[0],h=(n[1],(0,s.useState)("")),y=(0,i.default)(h,2),b=y[0],x=y[1],g=(0,s.useCallback)((function(t){return(e=e||(0,r.default)((function*(e){x(e)}))).apply(this,arguments)}),[a]),m=(0,s.useCallback)((function(e){return(e||[]).filter((function(e){var t;return(0,o.normalizeStringForSearch)((null==(t=(0,f.getEvents)(e))?void 0:t.name)||"").includes(b)}))}),[b]),j=(0,s.useCallback)((function(e,t,n){return(0,p.jsx)(c.EventThumbnail,{id:e})}),[]);return(0,p.jsxs)(d.ScreenWrapper,{isGrey:!0,children:[(0,p.jsx)(u.CustomHeader,{title:"Events",isBack:!0,onCreate:function(){(0,l.navigateToCreateEvent)({id:-1})},isSearch:!0,onChangeText:g}),(0,p.jsxs)(d.ScrollableTabView.Provider,{params:{},renderItem:j,getItemByQuery:f.getEventsByQuery,useItemByQuery:f.useEventsByQuery,tabs:[{title:"Public events",content:function(e){return(0,p.jsx)(d.ScrollableTabView.List,Object.assign({},e,{itemHeight:190,index:0,requestFn:v.requestPublicEvents,setData:m}))}},{title:"Joined events",content:function(e){return(0,p.jsx)(d.ScrollableTabView.List,Object.assign({},e,{itemHeight:190,index:1,requestFn:v.requestJoinedEvents,query:"joined",setData:m}))}}],children:[(0,p.jsx)(d.ScrollableTabView.CollapsableTabBar,{}),(0,p.jsx)(d.ScrollableTabView.Content,{})]})]})}));t.EventScreen=y},79837:function(e,t,n){var a=n(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.requestRemoveEvent=t.requestPublicEvents=t.requestJoinedEvents=t.requestInviteEvent=t.requestEventsProfile=t.requestEventsJoinedChannel=t.requestEventsChannel=t.requestEvent=t.requestEditEvent=t.requestCreateEvent=t.requestAttendEvent=void 0;var r,i,s,u,o,l,d,c,f,v,p,h=a(n(861)),y=a(n(38416)),b=a(n(17156)),x=n(4007),g=n(30806),m=n(75867),j=n(60569);t.requestPublicEvents=function(){return(r=r||(0,b.default)((function*(){var e=(yield x.Fetch.postWithToken("@"+x.Core.systemPath+"/inside/ajax/api/event/gets")).data;return(0,g.batch)((function(){e.events.length&&((0,m.syncEvents)(e.events),(0,m.setEventsQuery)((function(t){return Object.assign({},t,(0,y.default)({},"all",e.events.map((function(e){return e.id.toString()}))))})))})),e.events}))).apply(this,arguments)};t.requestJoinedEvents=function(){return(i=i||(0,b.default)((function*(){var e=(yield x.Fetch.postWithToken("@"+x.Core.systemPath+"/inside/ajax/api/event/joined")).data;return(0,g.batch)((function(){e.events.length&&((0,m.syncEvents)(e.events),(0,m.setEventsQuery)((function(t){return Object.assign({},t,(0,y.default)({},"joined",e.events.map((function(e){return e.id.toString()}))))})))})),e.events}))).apply(this,arguments)};t.requestEvent=function(e){return(s=s||(0,b.default)((function*(e){var t=(yield x.Fetch.postWithToken("@"+x.Core.systemPath+"/inside/ajax/api/event/get?event_id="+e.event_id)).data;return(0,g.batch)((function(){t.event&&(0,m.syncEvents)([t.event])})),t.event}))).apply(this,arguments)};t.requestCreateEvent=function(e){return(u=u||(0,b.default)((function*(e){var t=(yield x.Fetch.postWithToken("@"+x.Core.systemPath+"/inside/ajax/api/event/create",e)).data;(0,g.batch)((function(){t.event&&((0,m.syncEvents)([t.event]),(0,m.setEventsQuery)((function(e){return Object.assign({},e,(0,y.default)({},"all",[t.event.id.toString()].concat((0,h.default)(e.all||[]))))})))}))}))).apply(this,arguments)};t.requestEditEvent=function(e,t){return(o=o||(0,b.default)((function*(e,t){var n=(yield x.Fetch.postWithToken("@"+x.Core.systemPath+"/inside/ajax/api/event/edit",e)).data;(0,g.batch)((function(){if(n.event){if(t&&t>0){var e=(0,j.getUpdates)(t);e&&(0,j.syncUpdates)([Object.assign({},e,{attachment:n.event})])}(0,m.syncEvents)([n.event])}}))}))).apply(this,arguments)};t.requestRemoveEvent=function(e){return(l=l||(0,b.default)((function*(e){var t=(yield x.Fetch.postWithToken("@"+x.Core.systemPath+"/inside/ajax/api/event/remove",e)).data;(0,g.batch)((function(){"ok"===t.message&&(0,m.setEventsQuery)((function(t){return Object.assign({},t,(0,y.default)({},"all",(t.all||[]).filter((function(t){return t!==e.id.toString()}))))}))}))}))).apply(this,arguments)};t.requestAttendEvent=function(e){return(d=d||(0,b.default)((function*(e){"ok"==(yield x.Fetch.postWithToken("@"+x.Core.systemPath+"/inside/ajax/api/event/attendee/attend",e)).data.message&&((0,m.syncEvents)([Object.assign({},e.data,{attendees:(0,h.default)(new Set([].concat((0,h.default)(e.data.attendees),[Number(e.myId)])))})]),x.ToastService.show("Attend event successfully"))}))).apply(this,arguments)};t.requestInviteEvent=function(e){return(c=c||(0,b.default)((function*(e){"ok"==(yield x.Fetch.postWithToken("@"+x.Core.systemPath+"/inside/ajax/api/event/attendee/invite",e)).data.message&&e.data&&((0,m.syncEvents)([Object.assign({},e.data,{attendees:(0,h.default)(new Set([].concat((0,h.default)(e.data.attendees),(0,h.default)(e.ids))))})]),x.ToastService.show("Invite event successfully"))}))).apply(this,arguments)};t.requestEventsChannel=function(e){return(f=f||(0,b.default)((function*(e){var t=(yield x.Fetch.postWithToken("@"+x.Core.systemPath+"/inside/ajax/api/channel/update/event?path="+e.path+(null!=e&&e.q?"&q="+e.q:""))).data;return console.log("asd"),(0,g.batch)((function(){t.events.length&&((0,m.syncEvents)(t.events),(0,m.setEventsQuery)((function(n){return Object.assign({},n,(0,y.default)({},e.path,t.events.map((function(e){return e.id.toString()}))))})))})),t.events}))).apply(this,arguments)};t.requestEventsJoinedChannel=function(e){return(v=v||(0,b.default)((function*(e){var t=(yield x.Fetch.postWithToken("@"+x.Core.systemPath+"/inside/ajax/api/channel/update/event?path="+e.path+"&state=joined"+(null!=e&&e.q?"&q="+e.q:""))).data;return(0,g.batch)((function(){t.events.length&&(0,m.setEventsQuery)((function(n){return Object.assign({},n,(0,y.default)({},"joined_"+e.path,t.events.map((function(e){return e.id.toString()}))))}))})),t.events}))).apply(this,arguments)};t.requestEventsProfile=function(e){return(p=p||(0,b.default)((function*(e){var t=(yield x.Fetch.postWithToken("@"+x.Core.systemPath+"/inside/ajax/api/profile/get?tail=events&username="+e.username)).data;(0,g.batch)((function(){t.events.length&&((0,m.syncEvents)(t.events),(0,m.setEventsQuery)((function(n){return Object.assign({},n,(0,y.default)({},e.username,t.events.map((function(e){return e.id.toString()}))))})))}))}))).apply(this,arguments)}}}]);//# sourceMappingURL=src_screens_EventScreen_index_tsx.chunk.bundle.map?platform=ios